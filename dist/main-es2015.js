(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/_directives/alert.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/_directives/alert.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div *ngIf=\"message\" [ngClass]=\"{\n    'alert': message,\n    'alert-success': message.type === 'success',\n    'alert-danger': message.type === 'error'\n  }\">{{message.text}}\n</div>\n<!-- <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button> -->\n<!-- 'alert-dismissible' -->\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html":
/*!**************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html ***!
  \**************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"jumbotron\" style=\"background-color: #ffffff;\">\n  <div class=\"ml-3 mt-3\" style=\"float: right\">\n    <img src=\"assets/visbologo.svg\">\n  </div>\n  <!-- <h2>{{title}}</h2> -->\n  <div class=\"wrapper\">\n    <div class=\"container-fluid\">\n        <alert></alert>\n        <router-outlet></router-outlet>\n    </div>\n</div>\n<div class=\"col-12 bg-light text-dark\">\n  Copyright 2019 Â© <a href=\"https://visbo.de/\" class=\"text-secondary\">Visbo GmbH</a>,\n  <a data-toggle=\"modal\" data-target=\"#versionModal\" >Visbo Visual Board {{version}}</a>\n  <div class=\"row\">\n    <div class=\"col\">\n      <a href=\"mailto:support@visbo.de\" >Support</a>\n    </div>\n    <div class=\"col\">\n      <a href=\"https://visbo.de/impressum\" target=\"_blank\">Impressum</a>\n    </div>\n    <div class=\"col\">\n      <a href=\"https://visbo.de/visbo-terms-conditions\" target=\"_blank\">Terms of Use</a>\n    </div>\n    <div class=\"col\">\n      <a href=\"https://visbo.de/visbo-data-protection/\" target=\"_blank\">Data Protection</a>\n    </div>\n  </div>\n</div>\n<app-logouttimer></app-logouttimer>\n<app-messages></app-messages>\n\n<!-- Modal Version Info -->\n<div class=\"modal fade\" id=\"versionModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"versionModalTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"versionModalTitle\">Version Info</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"form-group row\">\n          <label for=\"restServer\" class=\"col-4 col-form-label\">Server Version:</label>\n          <label class=\"col-8 form-control-static\">{{ restVersionString }} </label>\n        </div>\n        <div class=\"form-group row\">\n          <label for=\"restUIServer\" class=\"col-4 col-form-label\">UI Version:</label>\n          <label class=\"col-8 form-control-static\">{{ restUIVersionString }} </label>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/dashboard/dashboard.component.html":
/*!******************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/dashboard/dashboard.component.html ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class='well'>\n  <visbo-navbar></visbo-navbar>\n  <div class='panel-heading'>\n    <h2>Top Visbo Centers</h2>\n  </div>\n</div>\n<div class=\"container-fluit\" >\n  <div class=\"col-12\">\n  \t<div class=\"row\">\n  \t\t<div class=\"card-group col-sm-8 col-md-6 col-lg-4 mb-2\" *ngFor=\"let vc of visbocenters\">\n        <div class=\"card\" style=\"width: 18rem;\">\n          <div class=\"card-body d-flex flex-column\">\n            <h3 class=\"card-title\" (click)=\"gotoClickedVc(vc)\">{{vc.name}}</h3>\n            <h6 class=\"card-subtitle mb-2 text-muted\">{{vc.updatedAt | date :'dd.MM.yyyy HH:mm'}}</h6>\n            <p class=\"card-text\">{{vc.description}}</p>\n            <!-- <p class=\"card-subtitle\">{{vc.users.length}} Users</p> -->\n            <div class=\"align-self-bottom\" style=\"margin-top: auto;\">\n              <button type=\"button\" class=\"mx-1 btn btn-primary\" (click)=\"gotoClickedVc(vc)\">{{vc.vpCount}} Projects</button>\n              <button type=\"button\" class=\"mx-1 btn btn-secondary\" (click)=\"gotoClickedVcDetail(vc)\">Detail</button>\n            </div>\n          </div> <!-- end of card-body -->\n        </div> <!-- end of card -->\n      </div> <!-- end of col -->\n    </div> <!-- end of row -->\n  </div>\n</div>\n<div class='well'>\n  <div class='panel-heading'>\n      <h2>Top Visbo Projects</h2>\n  </div>\n</div>\n<div class=\"container-fluit\" >\n  <div class=\"col-12\">\n  \t<div class=\"row\">\n  \t\t<div class=\"card-group col-sm-8 col-md-6 col-lg-4 mb-2\" *ngFor=\"let vp of visboprojects\">\n        <div class=\"card\" style=\"width: 18rem;\">\n          <div class=\"card-body d-flex flex-column\">\n            <h3 class=\"card-title\" (click)=\"gotoClickedVp(vp)\">{{vp.name}}</h3>\n            <h6 class=\"card-subtitle mb-2 text-muted\">{{vp.updatedAt | date :'dd.MM.yyyy HH:mm'}}</h6>\n            <p class=\"card-text\">{{vp.description}}</p>\n            <!-- <p class=\"card-subtitle\">{{vp.users.length}} Users</p> -->\n            <div class=\"align-self-bottom\" style=\"margin-top: auto;\">\n              <button type=\"button\" class=\"mx-1 btn btn-primary\" (click)=\"gotoClickedVp(vp)\">{{vp.vpvCount}} Versions</button>\n              <button type=\"button\" class=\"mx-1 btn btn-secondary\" (click)=\"gotoClickedVpDetail(vp)\">Detail</button>\n            </div>\n          </div> <!-- end of card-body -->\n        </div> <!-- end of card -->\n      </div> <!-- end of col -->\n    </div> <!-- end of row -->\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/bubble-chart/bubble-chart.component.html":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/bubble-chart/bubble-chart.component.html ***!
  \*************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divBubbleChart\">\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/column-chart/column-chart.component.html":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/column-chart/column-chart.component.html ***!
  \*************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divColumnChart\">\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/line-chart/line-chart.component.html":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/line-chart/line-chart.component.html ***!
  \*********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divLineChart\">\n</div>");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/pie-chart/pie-chart.component.html":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/pie-chart/pie-chart.component.html ***!
  \*******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divPieChart\">\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/scatter-chart/scatter-chart.component.html":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/scatter-chart/scatter-chart.component.html ***!
  \***************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divScatterChart\">\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/table-chart/table-chart.component.html":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/table-chart/table-chart.component.html ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div id=\"divTableChart\">\n</div>");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/login/login.component.html":
/*!**********************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/login/login.component.html ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"col-md-6 col-md-offset-3\">\n  <h2>Login to the Visbo System</h2>\n  <form name=\"form\" (ngSubmit)=\"f.form.valid && login()\" #f=\"ngForm\" novalidate>\n      <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !username.valid }\">\n          <label for=\"username\">User E-Mail</label>\n          <input type=\"text\" class=\"form-control\" name=\"username\" [(ngModel)]=\"model.username\" #username=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" />\n          <div *ngIf=\"f.submitted && !username.valid\" class=\"help-block\">Correct e-mail address is required</div>\n      </div>\n      <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !password.valid }\">\n          <label for=\"password\">Password</label>\n          <input type=\"password\" class=\"form-control\" name=\"password\" [(ngModel)]=\"model.password\" #password=\"ngModel\" required/>\n          <div *ngIf=\"f.submitted && !password.valid\" class=\"help-block\">Password is required</div>\n      </div>\n      <div class=\"form-group\">\n          <button [disabled]=\"loading\" class=\"btn btn-primary\">Login</button>\n          <img *ngIf=\"loading\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n      </div>\n  </form>\n  <div>\n    <button (click)=\"register()\" class=\"btn btn-link\">Register</button>\n    <button (click)=\"pwforgotten()\" class=\"btn btn-link\">Password forgotten</button>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/logouttimer/logouttimer.component.html":
/*!**********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/logouttimer/logouttimer.component.html ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n<div *ngIf=\"logoutTimer\">\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/messages/messages.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/messages/messages.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n<div *ngIf=\"activateMessage\">\n  <h2>Messages</h2>\n  <button class=\"clear\"\n          (click)=\"messageService.clear()\">clear</button>\n  <div *ngFor='let message of messageService.messages'> {{message}} </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/navbar/navbar.component.html":
/*!************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/navbar/navbar.component.html ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<nav class=\"navbar navbar-expand-md navbar-white bg-light sticky-top\">\n  <a class=\"navbar-brand bg-light \" (click)=\"gotoClickedItem('dashboard')\">Visbo</a>\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarMainNavigation\" aria-controls=\"navbarMainNavigation\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <i class=\"fas fa-bars\"></i>\n  </button>\n  <div class=\"collapse navbar-collapse\" id=\"navbarMainNavigation\">\n    <ul class=\"navbar-nav mr-auto\">\n      <!-- <li class=\"nav-item active\">\n        <a class=\"nav-link\" (click)=\"gotoClickedItem('dashboard')\">Home <span class=\"sr-only\">(current)</span></a>\n      </li> -->\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light \" (click)=\"gotoClickedItem('vc')\">Visbo Center</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light \" (click)=\"gotoClickedItem('vp')\">Visbo Projects</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light \"  (click)=\"gotoClickedItem('profile')\">Profile</a>\n      </li>\n      <li *ngIf=\"hasSystemPerm(permSystem.View)\" class=\"nav-item dropdown\">\n        <a class=\"nav-link dropdown-toggle bg-light \" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n          Others\n        </a>\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n          <a class=\"dropdown-item\"  (click)=\"gotoClickedItem('settings')\">Settings</a>\n          <!-- <div class=\"dropdown-divider\"></div> -->\n          <a class=\"dropdown-item\" (click)=\"gotoClickedItem('sysadmins')\">App Admin</a>\n        </div>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light  align-right\"  (click)=\"gotoClickedItem('login')\">Logout</a>\n      </li>\n    </ul>\n  </div>\n</nav>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/pwforgotten/pwforgotten.component.html":
/*!**********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pwforgotten/pwforgotten.component.html ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"col-md-6 col-md-offset-3\">\n    <h2>Password Forgotten</h2>\n    <form name=\"form\" (ngSubmit)=\"f.form.valid && pwforgotten()\" #f=\"ngForm\" novalidate>\n        <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !username.valid }\">\n            <label for=\"username\">e-mail</label>\n            <input type=\"text\" class=\"form-control\" name=\"username\" [(ngModel)]=\"model.username\" #username=\"ngModel\" required />\n            <div *ngIf=\"f.submitted && !username.valid\" class=\"help-block\">Username is required</div>\n        </div>\n\n        <div class=\"form-group\">\n            <button [disabled]=\"loading\" class=\"btn btn-primary\">Reset Password</button>\n            <img *ngIf=\"loading\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n            <a [routerLink]=\"['/login']\" class=\"btn btn-link\">Cancel</a>\n        </div>\n    </form>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/pwreset/pwreset.component.html":
/*!**************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/pwreset/pwreset.component.html ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"col-md-6 col-md-offset-3\">\n    <h2>Password Reset</h2>\n    <form name=\"form\" (ngSubmit)=\"f.form.valid && pwreset()\" #f=\"ngForm\" novalidate>\n        <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !password.valid }\">\n            <label for=\"password\" data-toggle=\"tooltip\" data-placement=\"top\" data-delay='50'\n              title=\"Password Rule: At least one alpha, one capital, one number and one special character and a length of minimum 8.\">\n              New Password (*)\n            </label>\n            <input type=\"password\" class=\"form-control\" name=\"password\" [(ngModel)]=\"model.password\" #password=\"ngModel\" required autocomplete=\"off\" pattern= {{PWPolicy}} >\n            <div *ngIf=\"!password.valid\" class=\"help-block\">New password has to follow the Policy.</div>\n            <div *ngIf=\"!password.valid\" class=\"help-block\">Password Rule: At least one alpha, one capital, one number and one special character and a length of minimum 8.</div>\n        </div>\n\n        <div class=\"form-group\">\n            <button [disabled]=\"loading\" class=\"btn btn-primary\">Reset Password</button>\n            <img *ngIf=\"loading\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n            <a [routerLink]=\"['/login']\" class=\"btn btn-link\">Cancel</a>\n        </div>\n    </form>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/register/register.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/register/register.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"col-md-6 col-md-offset-3\">\n    <h2>Register</h2>\n    <form name=\"form\" (ngSubmit)=\"f.form.valid && register()\" #f=\"ngForm\" novalidate>\n        <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !firstName.valid }\">\n            <label for=\"firstName\">First Name</label>\n            <input type=\"text\" class=\"form-control\" name=\"firstName\" [(ngModel)]=\"model.firstName\" #firstName=\"ngModel\" required autocomplete=\"on\">\n            <div *ngIf=\"f.submitted && !firstName.valid\" class=\"help-block\">First Name is required</div>\n        </div>\n        <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !lastName.valid }\">\n            <label for=\"lastName\">Last Name</label>\n            <input type=\"text\" class=\"form-control\" name=\"lastName\" [(ngModel)]=\"model.lastName\" #lastName=\"ngModel\" required autocomplete=\"on\">\n            <div *ngIf=\"f.submitted && !lastName.valid\" class=\"help-block\">Last Name is required</div>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"company\">Company</label>\n            <input type=\"text\" class=\"form-control\" name=\"company\" [(ngModel)]=\"model.company\" #company=\"ngModel\" required autocomplete=\"on\">\n            <div *ngIf=\"f.submitted && !company.valid\" class=\"help-block\">Company Name is required</div>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"phone\">Phone</label>\n            <input type=\"text\" class=\"form-control\" name=\"phone\" [(ngModel)]=\"model.phone\" #phone=\"ngModel\">\n        </div>\n        <div *ngIf=\"!userRegister\">\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !username.valid }\">\n            <label for=\"username\">e-mail</label>\n            <input type=\"email\" class=\"form-control\" name=\"username\" [(ngModel)]=\"model.username\" #username=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" required autocomplete=\"on\">\n            <div *ngIf=\"f.submitted && !username.valid\" class=\"help-block\">Correct e-mail address is required</div>\n          </div>\n        </div>\n        <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !password.valid }\">\n            <label for=\"password-new\" data-toggle=\"tooltip\" data-placement=\"top\" data-delay='50'\n              title=\"Password Rule: {{PWPolicyDescription}}\">\n              Password (*)\n            </label>\n            <input type=\"password\" class=\"form-control\" name=\"password-new\" [(ngModel)]=\"model.password\" #password=\"ngModel\" required autocomplete=\"off\" pattern= {{PWPolicy}} >\n            <div *ngIf=\"!password.valid\" class=\"help-block\">New password has to follow the Policy.</div>\n            <div *ngIf=\"!password.valid && PWPolicyDescription\" class=\"help-block\">{{PWPolicyDescription}}</div>\n        </div>\n        <form name=\"legal\" #fLegal=\"ngForm\" novalidate>\n          <div>Terms of Use & Data Protection</div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"IDcheckTOU\" name=\"checkTOU\" [(ngModel)]=\"model.checkTOU\" #checkTOU=\"ngModel\" required>\n              <label class=\"custom-control-label\" for=\"IDcheckTOU\">Accept Terms of Use: </label>\n              <a href=\"https://visbo.de/visbo-terms-conditions\" target=\"_blank\">Terms of Use</a>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"IDcheckDP\" name=\"checkDP\" [(ngModel)]=\"model.checkDP\" #checkDP=\"ngModel\" required>\n              <label class=\"custom-control-label\" for=\"IDcheckDP\">Accept Data Protection: </label>\n              <a href=\"https://visbo.de/visbo-data-protection\" target=\"_blank\">Data Protection</a>\n          </div>\n        </form>\n        <div class=\"form-group\">\n          <button [disabled]=!fLegal.form.valid type=\"submit\" class=\"btn btn-primary\">Register</button>\n          <img *ngIf=\"loading\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n          <a [routerLink]=\"['/login']\" class=\"btn btn-link\">Cancel</a>\n        </div>\n    </form>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/registerconfirm/registerconfirm.component.html":
/*!******************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/registerconfirm/registerconfirm.component.html ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div class=\"col-md-6 col-md-offset-3\">\n  <h2>e-mail Confirmation</h2>\n  <form name=\"form\" #f=\"ngForm\" novalidate>\n    <p>\n      This is an inbetween page without specific content, you should get redirected to login.\n      If not please use the button below.\n    </p>\n    <div class=\"form-group\">\n        <a [routerLink]=\"['/login']\" class=\"btn btn-link\">Cancel</a>\n    </div>\n  </form>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/settings/settings.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/settings/settings.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div>\n  <a>Display Debug Messages: {{activateMessage}} </a>\n  <button type=\"button\" class=\"btn btn-sm btn-primary align-self-start\" (click)='toggleMessages()'>\n    Toggle Messages\n  </button>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysaudit/sysaudit.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysaudit/sysaudit.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class=\"container-fluid\">\n    <div class='row'>\n      <div class='col'>\n        <h2 class='panel-heading'>\n          Visbo System Audit\n        </h2>\n      </div>\n    </div>\n  </div>\n  <form name=\"form\" (ngSubmit)=\"getVisboAudits()\" #f=\"ngForm\" novalidate>\n    <div class=\"form-group row\">\n      <label for=\"auditFrom\" class=\"col-1 col-form-label\">From:</label>\n      <input id=\"auditFrom\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditFrom\" [(ngModel)]=\"auditFrom\">\n      <label for=\"auditTo\" class=\"col-1 col-form-label\">To:</label>\n      <input id=\"auditTo\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditTo\" [(ngModel)]=\"auditTo\" >\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"auditText\" class=\"col-1 col-form-label\">Filter:</label>\n      <input id=\"auditText\" type=\"text\" class=\"col-2 col-sm-3 form-control\" name=\"auditText\" [(ngModel)]=\"auditText\" >\n\n      <label for=\"auditCount\" class=\"col-1 col-form-label\">Max:</label>\n      <select class=\"col-1 form-control mx-1\" name=\"auditCount\" [(ngModel)]=\"auditCount\">\n        <option>50</option>\n        <option>100</option>\n        <option>500</option>\n        <option>2000</option>\n      </select>\n\n      <!-- <label for=\"auditArea\" class=\"col-1 col-form-label\">Area:</label> -->\n      <select class=\"col-1 form-control mx-1\" id=\"auditType\" name=\"auditArea\" [(ngModel)]=\"auditArea\">\n        <option *ngFor=\"let actionItem of auditAreaList\">{{actionItem.name}}</option>\n      </select>\n      <!-- <label for=\"auditArea\" class=\"col-form-label\">Action:</label> -->\n      <select class=\"col-1 form-control mx-1\" id=\"auditType\" name=\"actiontype\" [(ngModel)]=\"auditType\">\n        <option *ngFor=\"let actionItem of auditTypeList\">{{actionItem.name}}</option>\n      </select>\n      <div class='btn-group '>\n        <button type=\"button\" class=\"btn btn-sm btn-primary ml-auto mx-1\" (click)=\"getVisboAudits()\">Filter</button>\n        <button type=\"button\" class=\"btn btn-sm btn-secondary ml-auto mx-1\" (click)=\"downloadVisboAudit()\">Download</button>\n        <button type=\"button\" class=\"btn btn-sm btn-secondary ml-auto mx-1\" (click)=\"switchChart()\">{{chartButton}}</button>\n      </div>\n    </div>\n  </form>\n  <div *ngIf=\"chart\" class='container-fluid'>\n    <h3 class='panel-heading'>\n      Visbo Chart\n      <div class=\"col\">\n        <app-pie-chart [graphData]=\"graphData\" [graphLegend]=\"graphLegend\" [graphOptions]=\"graphOptions\" [parentThis]=\"parentThis\"></app-pie-chart>\n      </div>\n      <div class=\"col\">\n        <app-line-chart [graphData]=\"graphDataLineChart\" [graphOptions]=\"graphOptionsLineChart\"></app-line-chart>\n      </div>\n      <div class=\"col\">\n        <app-column-chart [graphData]=\"graphDataColumnChart\" [graphOptions]=\"graphOptionsColumnChart\"></app-column-chart>\n      </div>\n    </h3>\n  </div>\n  <div *ngIf=\"!chart\" class='container-fluid'>\n    <div class='panel-body'>\n      <table class='table table-hover table-sortable'>\n        <!--Table head-->\n        <thead>\n          <tr>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(1)\">Created</th>\n            <th (click)=\"sortTable(2)\">User</th>\n            <th (click)=\"sortTable(3)\"> Action</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(4)\"> Info</th>\n            <th class=\"d-none d-lg-table-cell\" (click)=\"sortTable(5)\"> Result</th>\n            <th class=\"d-none d-lg-table-cell\" (click)=\"sortTable(6)\"> Duration</th>\n            <th class=\"d-none d-lg-table-cell\" (click)=\"sortTable(7)\"> Size</th>\n            <th>Detail</th>\n          </tr>\n        </thead>\n        <!--Table body-->\n        <tbody>\n          <tr *ngFor=\"let auditentry of audit; let auditIndex=index\" (click)='helperAuditIndex(auditIndex)'\n          data-toggle=\"modal\" data-target=\"#AuditDetail\">\n            <td  *ngIf=\"isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'HH:mm:ss'}}</td>\n            <td  *ngIf=\"!isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'dd.MM HH:mm'}}</td>\n            <td *ngIf=\"auditentry.user\" >{{auditentry.user.email }}</td>\n            <td *ngIf=\"!auditentry.user\"> Unknown </td>\n            <td>{{auditentry.actionDescription }}</td>\n            <td class=\"d-none d-md-table-cell\" >{{helperShortenText(auditentry.actionInfo, 30) }}</td>\n            <td class=\"d-none d-lg-table-cell\" >{{helperResponseText(auditentry) }}</td>\n            <td class=\"d-none d-lg-table-cell\" >{{auditentry.result.time}} ms</td>\n            <td class=\"d-none d-lg-table-cell\" >{{ helperFormatBytes(audit[auditIndex].result.size || 0, 2) }}</td>\n            <td>\n              <button class=\"Detail\" title=\"Detail of Visbo Audit\" (click)='helperAuditIndex(auditIndex)'\n              data-toggle=\"modal\" data-target=\"#AuditDetail\">i</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"AuditDetail\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Audit Detail\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"auditIndex >= 0 && auditIndex < audit.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"AuditDetailTitle\">Detail of Audit Entry</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <!-- <div class=\"col-10\">\n            <button type=\"button\" class=\"btn btn-secondary\" title=\"Prev Audit Entry\" (click)='pageAuditIndex(-1)'>Prev</button>\n          </div>\n          <div class=\"col-2\">\n            <button type=\"button\" class=\"btn btn-secondary align-self-end\" title=\"Next Audit Entry\" (click)='pageAuditIndex(1)'>Next</button>\n          </div> -->\n          <div class=\"col-11\">\n            <h3 title=\"Previous Entry\" (click)='pageAuditIndex(-1)'><a class=\"px-3 col-1 fas fa-caret-square-left\"></a></h3>\n          </div>\n          <div class=\"col-1\">\n            <h3 title=\"Next Entry\" (click)='pageAuditIndex(1)'><a class=\"px-3 col-1 fas fa-caret-square-right\"></a></h3>\n          </div>\n        </div>\n        <form>\n          <div class=\"py-0 m-0\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Created:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].createdAt | date :'dd.MM.yyyy HH:mm:ss.SSS' }} </label>\n            <label class=\"py-0 m-0 col-4 form-control-static\">User:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].user.email }} </label>\n            <label class=\"py-0 m-0 col-4 form-control-static\">Action:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ helperFormatActionDescription(audit[auditIndex]) }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].actionInfo\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Info:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].actionInfo }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vc\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Center:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vc.name }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vp\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Project:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vp.name }} ({{ audit[auditIndex].vp.vpid }}) </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vpv\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Project Version:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vpv.name }} ({{ audit[auditIndex].vpv.vpvid }})</label>\n          </div>\n          <div>\n            <label class=\"py-0 m-0 col-4 form-control-static\">Result:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{helperResponseText(audit[auditIndex]) }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">tech. Action:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].action }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">URL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\" style=\"overflow-wrap: break-word;\">{{ audit[auditIndex].url }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Time:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].result.time }} ms </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Size:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ helperFormatBytes(audit[auditIndex].result.size || 0, 2) }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">User Agent:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].userAgent }}</label>\n          </div>\n          <div *ngIf=\"showMore && audit[auditIndex].ip\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">IP:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ip }}</label>\n          </div>\n          <div *ngIf=\"showMore && audit[auditIndex].ttl\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">TTL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ttl | date :'dd.MM HH:mm' }}</label>\n          </div>\n          <div *ngIf=\"showMore && audit[auditIndex].host\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Host:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].host }}</label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button *ngIf=\"!showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">More</button>\n        <button *ngIf=\"showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">Less</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysconfig/sysconfig.component.html":
/*!******************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysconfig/sysconfig.component.html ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class='row'>\n      <h2 class='panel-heading'>\n        Visbo Config System View\n      </h2>\n  </div>\n\n  <div>\n    <div class='container-fluid'>\n      <div class='panel-body'>\n        <table class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortTable(1)\">Name</th>\n              <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(2)\">Info</th>\n              <th (click)=\"sortTable(3)\">Updated</th>\n            </tr>\n          </thead>\n          <!-- Table body -->\n          <tbody>\n            <tr *ngFor=\"let setting of vcsetting; let settingIndex=index\" (click)=\"editConfigName(setting.name)\" data-toggle=\"modal\" data-target=\"#ConfigValue\">\n              <td>{{setting.name}}</td>\n              <td>{{getMainInfo(setting)}}</td>\n              <td>{{setting.updatedAt | date :'dd.MM HH:mm:ss' }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"ConfigValue\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Config Value\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"vcsetting && editIndex >= 0\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <!-- <h5 class=\"modal-title\" id=\"ConfigDetailTitle\">Config Detail Parameter</h5> -->\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'UI URL'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config UI URL</h5>\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'DEBUG'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config Debug Setting</h5>\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'PW Policy'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config Password Policy</h5>\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'SMTP'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config SMTP Setting</h5>\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'REDIS'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config Redis Address</h5>\n        <h5 *ngIf=\"vcsetting[editIndex].name == 'Log Age'\" class=\"modal-title\" id=\"ConfigDetailTitle\">Config Maximum Log File Age</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <!-- Index {{ editIndex }} -->\n      <div class=\"modal-body\">\n        <form *ngIf=\"vcsetting[editIndex].name == 'UI URL'\">\n          <div>\n            <div class=\"form-group\">\n              <label for=\"configUIUrl\" class=\"col-3 col-form-label\">UI Url:</label>\n              <input type=\"text\" name=configUIUrl class=\"col-7 form-control\" [(ngModel)]=\"vcsetting[editIndex].value.UIUrl\" placeholder=\"URL for Web UI\">\n            </div>\n          </div>\n        </form>\n        <form *ngIf=\"vcsetting[editIndex].name == 'PW Policy'\">\n          <div>\n            <div class=\"form-group\">\n              <label for=\"configPWPolicy\" class=\"col-4 col-form-label\">PW Policy Regex:</label>\n              <input type=\"text\" name=configPWPolicy class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.PWPolicy\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configPWPolicyDesc\" class=\"col-4 col-form-label\">PW Policy Description:</label>\n              <textarea name=configPWPolicyDesc class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.Description\"></textarea>\n            </div>\n          </div>\n        </form>\n        <form *ngIf=\"vcsetting[editIndex].name == 'SMTP'\">\n          <div *ngIf=\"editIndex >= 0 && vcsetting[editIndex].name == 'SMTP'\">\n            <div class=\"form-group\">\n              <label for=\"configSMTPHost\" class=\"col-4 col-form-label\">SMTP Host:</label>\n              <input type=\"text\" name=configSMTPHost class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.host\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configSMTPUser\" class=\"col-4 col-form-label\">User:</label>\n              <input type=\"text\" name=configSMTPUser class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.auth.user\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configSMTPUserPW\" class=\"col-4 col-form-label\">Password:</label>\n              <input type=\"password\" name=configSMTPUserPW class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.auth.pass\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configSMTPPort\" class=\"col-4 col-form-label\">Port:</label>\n              <input type=\"number\" name=configSMTPPort class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.port\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configSMTPConTimeout\" class=\"col-4 col-form-label\">Connection Timeout:</label>\n              <input type=\"number\" name=configSMTPConTimeout class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.connectionTimeout\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configSMTPGreetTimeout\" class=\"col-4 col-form-label\">Greeting Timeout:</label>\n              <input type=\"number\" name=configSMTPGreetTimeout class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.greetingTimeout\">\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"check1\" name=\"configSMTPPool\" [(ngModel)]=\"vcsetting[editIndex].value.pool\" #configSMTPPool=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"check1\">Pool Connections</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"check2\" name=\"configSMTPSecure\" [(ngModel)]=\"vcsetting[editIndex].value.secure\" #configSMTPSecure=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"check2\">Secure Connection</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"check3\" name=\"configSMTPTls\" [(ngModel)]=\"vcsetting[editIndex].value.requireTLS\" #configSMTPTls=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"check3\">Require TLS</label>\n            </div>\n          </div>\n        </form>\n        <form *ngIf=\"vcsetting[editIndex].name == 'REDIS'\">\n          <div>\n            <div class=\"form-group\">\n              <label for=\"configREDISHost\" class=\"col-4 col-form-label\">Host:</label>\n              <input type=\"text\" name=configREDISHost class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.host\">\n            </div>\n            <div class=\"form-group\">\n              <label for=\"configREDISPort\" class=\"col-4 col-form-label\">Port:</label>\n              <input type=\"number\" name=configREDISPort class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.port\">\n            </div>\n          </div>\n        </form>\n        <form *ngIf=\"vcsetting[editIndex].name == 'DEBUG'\">\n          <div class=\"form-group row\">\n\n            <label class=\"col-3 col-form-label\">VC:</label>\n            <select class=\"col-8 form-control\"  name=\"VC\" [(ngModel)]=\"vcsetting[editIndex].value.VC\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">VP:</label>\n            <select class=\"col-8 form-control\"  name=\"VP\" [(ngModel)]=\"vcsetting[editIndex].value.VP\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">VPV:</label>\n            <select class=\"col-8 form-control\"  name=\"VPV\" [(ngModel)]=\"vcsetting[editIndex].value.VPV\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">USER:</label>\n            <select class=\"col-8 form-control\"  name=\"USER\" [(ngModel)]=\"vcsetting[editIndex].value.USER\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">MAIL:</label>\n            <select class=\"col-8 form-control\"  name=\"MAIL\" [(ngModel)]=\"vcsetting[editIndex].value.MAIL\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">OTHER:</label>\n            <select class=\"col-8 form-control\"  name=\"OTHER\" [(ngModel)]=\"vcsetting[editIndex].value.OTHER\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">All:</label>\n            <select class=\"col-8 form-control\"  name=\"All\" [(ngModel)]=\"vcsetting[editIndex].value.All\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n        </form>\n        <form *ngIf=\"vcsetting[editIndex].name == 'Log Age'\">\n          <div>\n            <div class=\"form-group\">\n              <label for=\"configLogAge\" class=\"col-4 col-form-label\">Max Age:</label>\n              <input type=\"number\" name=configLogAge class=\"form-control\" [(ngModel)]=\"vcsetting[editIndex].value.duration\" >\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button *ngIf=\"hasSystemPerm(permSystem.Modify)\" type=\"button\" class=\"btn btn-primary\" (click)=\"updateConfig(vcsetting[editIndex])\" data-dismiss=\"modal\">Update</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/syslog/syslog.component.html":
/*!************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/syslog/syslog.component.html ***!
  \************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class=\"container-fluid\">\n    <div class='row'>\n      <div class='col'>\n        <h2 class='panel-heading'>\n          Visbo Log Files\n        </h2>\n      </div>\n      <!-- <div class='col-6 col-md-2 align-self-end'>\n        <button type=\"button\" class=\"mx-1 btn btn-sm btn-primary align-self-end\" (click)=\"getLogLevel()\" data-toggle=\"modal\" data-target=\"#ChangeLogLevel\">Change Log Level</button>\n      </div> -->\n    </div>\n    <div class='col'>\n      <form name=\"form\" (ngSubmit)=\"getVisboLogs()\" #f=\"ngForm\" novalidate>\n        <div class=\"form-group row\">\n          <label for=\"auditCount\" class=\"col-form-label\">Max age in days:</label>\n          <select class=\"col-1 form-control mx-1\" name=\"ageDays\" [(ngModel)]=\"ageDays\">\n            <option>0</option>\n            <option>3</option>\n            <option>7</option>\n            <option>30</option>\n            <option>365</option>\n          </select>\n          <button type=\"button\" class=\"btn btn-primary mx-1\" (click)=\"getVisboLogs()\">Refresh</button>\n          <div class=\"col\">\n            <button type=\"button\" class=\"btn btn-sm btn-primary float-right\" (click)=\"getLogLevel()\" data-toggle=\"modal\" data-target=\"#ChangeLogLevel\">Change Log Level</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n\n  <div>\n    <div class='container-fluid'>\n      <div class='panel-body'>\n        <table class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(1)\">Name</th>\n              <th class=\"d-none d-md-table-cell\">Host</th>\n              <th (click)=\"sortTable(2)\">Modified</th>\n              <th (click)=\"sortTable(3)\"> Size</th>\n              <th>Detail</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let fileentry of files; let fileIndex=index\" (click)='helperFileIndex(fileIndex)'\n              (click)='getVisboLogFile(fileentry)'>\n              <td class=\"d-none d-md-table-cell\">{{fileentry.name }}</td>\n              <td class=\"d-none d-md-table-cell\">{{fileentry.folder }}</td>\n              <td>{{fileentry.updatedAt | date :'dd.MM HH:mm' }}</td>\n              <td>{{formatBytes(fileentry.size, undefined) }}</td>\n              <td>\n                <button class=\"Detail\" title=\"Save As\" (click)=\"getVisboLogFile(fileentry)\">i</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Modal Change Log Level-->\n<div class=\"modal fade\" id=\"ChangeLogLevel\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"ChangeLogLevelTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"ChangeLogLevelTitle\">Change Log Level</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\" *ngIf=\"logLevelSetting\">\n        <form>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">VC:</label>\n            <select class=\"col-8 form-control\"  name=\"VC\" [(ngModel)]=\"logLevelSetting.value.VC\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">VP:</label>\n            <select class=\"col-8 form-control\"  name=\"VP\" [(ngModel)]=\"logLevelSetting.value.VP\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">VPV:</label>\n            <select class=\"col-8 form-control\"  name=\"VPV\" [(ngModel)]=\"logLevelSetting.value.VPV\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">USER:</label>\n            <select class=\"col-8 form-control\"  name=\"USER\" [(ngModel)]=\"logLevelSetting.value.USER\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">MAIL:</label>\n            <select class=\"col-8 form-control\"  name=\"MAIL\" [(ngModel)]=\"logLevelSetting.value.MAIL\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">OTHER:</label>\n            <select class=\"col-8 form-control\"  name=\"OTHER\" [(ngModel)]=\"logLevelSetting.value.OTHER\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n          <div class=\"form-group row\">\n            <label class=\"col-3 col-form-label\">All:</label>\n            <select class=\"col-8 form-control\"  name=\"All\" [(ngModel)]=\"logLevelSetting.value.All\">\n              <option value = fatal>Fatal</option>\n              <option value = warn>Warning</option>\n              <option value = info>Information</option>\n              <option value = debug>Debug</option>\n              <option value = trace>Trace</option>\n            </select>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"setLogLevel()\" data-dismiss=\"modal\">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysnavbar/sysnavbar.component.html":
/*!******************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysnavbar/sysnavbar.component.html ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<nav class=\"navbar navbar-expand-md bg-light sticky-top\">\n  <a class=\"navbar-brand bg-light\" (click)=\"gotoClickedItem('sysdashboard')\">Overviews</a>\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <i class=\"fas fa-bars\"></i>\n  </button>\n\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n    <ul class=\"navbar-nav mr-auto\">\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light\" (click)=\"gotoClickedItem('sysadmins')\">Administrators</a>\n      </li>\n      <li *ngIf=\"hasVCPerm(permVC.View)\" class=\"nav-item\">\n        <a class=\"nav-link bg-light\" (click)=\"gotoClickedItem('sysvc')\">Visbo Centers</a>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light\" (click)=\"gotoClickedItem('sysuser')\">Users</a>\n      </li>\n      <li *ngIf=\"hasSystemPerm(permSystem.ViewAudit)\" class=\"nav-item\">\n        <a class=\"nav-link bg-light\"  (click)=\"gotoClickedItem('sysaudit')\">Audit</a>\n      </li>\n      <li class=\"nav-item dropdown\">\n        <a class=\"nav-link dropdown-toggle bg-light\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n          Others\n        </a>\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n          <div *ngIf=\"hasSystemPerm(permSystem.ViewLog)\">\n            <a class=\"dropdown-item\"  (click)=\"gotoClickedItem('syslog')\">Log Files</a>\n            <!-- <div class=\"dropdown-divider\"></div> -->\n          </div>\n          <div >\n            <a class=\"dropdown-item\"  (click)=\"gotoClickedItem('systasks')\">Tasks</a>\n            <!-- <div class=\"dropdown-divider\"></div> -->\n          </div>\n          <div >\n            <a class=\"dropdown-item\"  (click)=\"gotoClickedItem('sysconfig')\">Configuration</a>\n            <!-- <div class=\"dropdown-divider\"></div> -->\n          </div>\n          <a class=\"dropdown-item\" (click)=\"gotoClickedItem('sysothers')\">Others</a>\n        </div>\n      </li>\n      <li class=\"nav-item\">\n        <a class=\"nav-link bg-light align-right\"  (click)=\"gotoClickedItem('/')\">Back</a>\n      </li>\n    </ul>\n  </div>\n</nav>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/systasks/systasks.component.html":
/*!****************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/systasks/systasks.component.html ***!
  \****************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 class='panel-heading'>\n        Visbo Task System View\n      </h2>\n    </div>\n    <div class=\"col\">\n      <button type=\"button\" class=\"btn btn-primary float-right\" (click)=\"getVisboTasks()\">Refresh</button>\n    </div>\n  </div>\n\n  <div>\n    <div class='container-fluid'>\n      <div class='panel-body'>\n        <table class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortTable(1)\">Name</th>\n              <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(2)\">Last Run</th>\n              <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(3)\">Next Run</th>\n              <th (click)=\"sortTable(4)\">Last Result</th>\n              <th>Detail</th>\n            </tr>\n          </thead>\n          <!-- Table body -->\n          <tbody>\n            <tr *ngFor=\"let entry of vcsetting; let settingIndex=index\" (click)='helperTaskIndex(settingIndex)' data-toggle=\"modal\" data-target=\"#TaskDetail\">\n              <td>{{entry.name }}</td>\n              <td class=\"d-none d-md-table-cell\">{{entry.value.lastRun | date :'dd.MM HH:mm:ss' }}</td>\n              <td class=\"d-none d-md-table-cell\">{{entry.value.nextRun | date :'dd.MM HH:mm:ss' }}</td>\n              <td>{{entry.value.taskSpecific && entry.value.taskSpecific.result }}</td>\n              <td>\n                <button class=\"Detail\" title=\"detail\">i</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"TaskDetail\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Task Detail\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"taskIndex >= 0 && taskIndex < vcsetting.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"TaskDetailTitle\">Detail of Task</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-10\">\n            <button type=\"button\" class=\"btn btn-secondary\" title=\"Prev Task\" (click)='pageTaskIndex(-1)'>Prev</button>\n          </div>\n          <div class=\"col-2\">\n            <button type=\"button\" class=\"btn btn-secondary align-self-end\" title=\"Next Task\" (click)='pageTaskIndex(1)'>Next</button>\n          </div>\n        </div>\n        <form>\n          <div class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Task:</label>\n            <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].name }} </label>\n          </div>\n          <div *ngIf=\"vcsetting[taskIndex].value\">\n            <div class=\"form-group\">\n              <label class=\"col-4 col-form-label\">Last Run:</label>\n              <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].value.lastRun | date :'dd.MM HH:mm:ss' }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-4 col-form-label\">Next Run:</label>\n              <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].value.nextRun | date :'dd.MM HH:mm:ss' }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-4 col-form-label\">Last Duration:</label>\n              <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].value.lastDuration | date :'mm:ss:SSS' }}</label>\n            </div>\n            <div *ngIf=\"vcsetting[taskIndex].value.taskSpecific\">\n              <div class=\"form-group\">\n                <label class=\"col-4 col-form-label\">Result:</label>\n                <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].value.taskSpecific.result }}</label>\n              </div>\n              <div class=\"form-group\">\n                <label class=\"col-4 col-form-label\">Message:</label>\n                <label class=\"col-7 form-control-static\">{{ vcsetting[taskIndex].value.taskSpecific.resultDescription }}</label>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"executeTask()\" data-dismiss=\"modal\">Execute</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysuser/sysuser.component.html":
/*!**************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysuser/sysuser.component.html ***!
  \**************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <h2 class='panel-heading'>\n      Visbo Users\n    </h2>\n  </div>\n  <form name=\"form\" (ngSubmit)=\"getSysUsers()\" #f=\"ngForm\" novalidate>\n    <div class=\"form-group row\">\n      <label for=\"userMatch\" class=\"col-2 col-form-label\">Filter:</label>\n      <input id=\"userMatch\" type=\"text\" class=\"col-2 col-sm-4 form-control mx-1\" name=\"userMatch\" [(ngModel)]=\"userMatch\" >\n      <button type=\"button\" class=\"btn btn-primary mx-1\" (click)=\"getSysUsers()\">Filter</button>\n    </div>\n  </form>\n  <div class='container-fluid'>\n    <div class='panel-body'>\n      <table class='table table-hover table-sortable'>\n        <!--Table head-->\n        <thead>\n          <tr>\n            <th class=\"d-none d-md-table-cell\">Nr.</th>\n            <th (click)=\"sortTable(1)\">User</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(2)\">Updated</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(3)\">Last Login</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(4)\">Failed Login</th>\n            <th>Detail</th>\n          </tr>\n        </thead>\n        <!--Table body-->\n        <tbody>\n          <tr *ngFor=\"let userentry of user; let userIndex=index\" (click)='helperUserIndex(userIndex)'\n          data-toggle=\"modal\" data-target=\"#UserDetail\">\n            <td class=\"d-none d-md-table-cell\">{{userIndex+1}}</td>\n            <td >{{userentry.email }}</td>\n            <td class=\"d-none d-md-table-cell\">{{userentry.updatedAt | date :'dd.MM.yy'}}</td>\n            <td *ngIf=\"userentry.status && userentry.status.lastLoginAt\" class=\"d-none d-md-table-cell\">{{userentry.status.lastLoginAt | date :'dd.MM.yy'}}</td>\n            <td *ngIf=\"!(userentry.status && userentry.status.lastLoginAt)\" class=\"d-none d-md-table-cell\">Never</td>\n            <td *ngIf=\"userentry.status && userentry.status.lastLoginFailedAt\" class=\"d-none d-md-table-cell\">{{userentry.status.lastLoginFailedAt | date :'dd.MM.yy'}}</td>\n            <td *ngIf=\"!(userentry.status && userentry.status.lastLoginFailedAt)\" class=\"d-none d-md-table-cell\">Never</td>\n            <td>\n              <button class=\"Detail\" title=\"Detail of Visbo User\" (click)='helperUserIndex(userIndex)'\n              data-toggle=\"modal\" data-target=\"#UserDetail\">i</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"UserDetail\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"User Detail\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"userIndex >= 0 && userIndex < user.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"UserDetailTitle\">Detail of User</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-10\">\n            <button type=\"button\" class=\"btn btn-secondary\" title=\"Prev User\" (click)='pageUserIndex(-1)'>Prev</button>\n          </div>\n          <div class=\"col-2\">\n            <button type=\"button\" class=\"btn btn-secondary align-self-end\" title=\"Next User\" (click)='pageUserIndex(1)'>Next</button>\n          </div>\n        </div>\n        <form>\n          <div class=\"form-group\">\n            <label class=\"col-4 col-form-label\">User:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].email }} </label>\n          </div>\n          <div *ngIf=\"user[userIndex].profile\"  class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Name:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].profile.firstName}}  {{ user[userIndex].profile.lastName}}</label>\n          </div>\n          <div *ngIf=\"user[userIndex].profile\"  class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Company:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].profile.company}}</label>\n          </div>\n          <div *ngIf=\"user[userIndex].profile\"  class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Phone:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].profile.phone}}</label>\n          </div>\n          <div *ngIf=\"showMore\" class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Created:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].createdAt | date :'dd.MM.yyyy HH:mm:ss' }} </label>\n          </div>\n          <div *ngIf=\"showMore\" class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Updated:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].updatedAt | date :'dd.MM.yyyy HH:mm:ss' }} </label>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Registered:</label>\n            <label *ngIf=\"user[userIndex].status && user[userIndex].status.registeredAt\" class=\"col-7 form-control-static\">{{ user[userIndex].status.registeredAt | date :'dd.MM.yyyy HH:mm:ss' }} </label>\n            <label *ngIf=\"!(user[userIndex].status && user[userIndex].status.registeredAt)\" class=\"col-7 form-control-static\">Not registered yet </label>\n          </div>\n          <div *ngIf=\"user[userIndex].status && user[userIndex].status.lockedUntil\" class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Locked:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].status.lockedUntil | date :'dd.MM.yyyy HH:mm:ss' }} </label>\n          </div>\n          <div *ngIf=\"user[userIndex].status && user[userIndex].status.loginRetries\" class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Retries:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].status.loginRetries }} </label>\n          </div>\n          <div *ngIf=\"user[userIndex].status\" class=\"form-group\">\n            <label class=\"col-4 col-form-label\">Last Login:</label>\n            <label class=\"col-7 form-control-static\">{{ user[userIndex].status.lastLoginAt | date :'dd.MM.yyyy HH:mm:ss' }} </label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button *ngIf=\"!showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">More</button>\n        <button *ngIf=\"showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">Less</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.html":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.html ***!
  \******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div *ngIf=\"visbocenter\">\n  <h3>Visbo Center: <a (click)=\"gotoVPList(visbocenter)\">{{ visbocenter.name | uppercase }}</a></h3>\n  <form>\n    <div class=\"form-group row\">\n      <label for=\"vcName\" class=\"col-4 col-md-3 col-form-label\">Name:</label>\n      <input *ngIf=\"hasVCPerm(permVC.Modify)\" type=\"text\" name=vcName class=\"col-sm-8 form-control\" [(ngModel)]=\"visbocenter.name\" placeholder=\"Name\">\n      <label *ngIf=\"!hasVCPerm(permVC.Modify)\" class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"vcDescription\" class=\"col-4 col-md-3 col-form-label\">Description:</label>\n      <textarea *ngIf=\"hasVCPerm(permVC.Modify)\" name=vcDescription class=\"col-8 form-control\" [(ngModel)]=\"visbocenter.description\" placeholder=\"Type in your description\"></textarea>\n      <label *ngIf=\"!hasVCPerm(permVC.Modify)\" class=\"col-8 form-control-static\">{{ visbocenter.description }} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"Created\" class=\"col-4 col-md-3 col-form-label\">Created / Updated at:</label>\n      <label class=\"col form-control-static col-form-label\">{{ visbocenter.createdAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n      <label class=\"col form-control-static col-form-label\">{{ visbocenter.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n    </div>\n  </form>\n  <div class=\"btn-toolbar\" style=\"\">\n    <button *ngIf=\"hasSystemPerm(permSystem.ViewAudit)\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"gotoVCAudit(visbocenter)\">View Audit</button>\n    <button *ngIf=\"!showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Groups</button>\n    <button *ngIf=\"showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Users</button>\n  </div>\n\n  <div *ngIf=\"!showGroups\" >\n    <div >\n      <div class='row'>\n        <div class='col'>\n          <h5 class='panel-heading'>\n              Visbo Center Users\n          </h5>\n        </div>\n        <div *ngIf=\"hasVCPerm(permVC.ManagePerm)\" class='col'>\n          <!-- Button trigger modal -->\n          <button type=\"button\" class=\"btn btn-primary float-right my-1\" data-toggle=\"modal\" data-target=\"#VcUserModalCreate\">Add User</button>\n        </div>\n      </div>\n      <div class='panel-body'>\n        <table class='table table-hover'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>Nr.</th>\n              <th (click)=\"sortUserTable(1)\">e-mail</th>\n              <th (click)=\"sortUserTable(2)\">Group</th>\n              <th *ngIf=\"!deleted && hasVCPerm(permVC.ManagePerm)\">Delete</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let member of vgUsers; let memberIndex=index\"> <!-- class=\"danger\"> -->\n              <td>{{memberIndex+1}}</td>\n              <td>{{member.email}}</td>\n              <td>{{member.groupName}}</td>\n              <td *ngIf=\"!deleted && hasVCPerm(permVC.ManagePerm)\">\n                <button class=\"Detail\" title=\"Remove User\" (click)='helperRemoveUser(memberIndex)'\n                data-toggle=\"modal\" data-target=\"#VcUserRemove\">&times;</button>\n              </td>\n            </tr>\n          </tbody>\n          <!--Table body-->\n        </table>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"showGroups\" >\n    <div >\n      <div class='row'>\n        <div class='col'>\n          <h5 class='panel-heading'>\n              Visbo Center Groups\n          </h5>\n        </div>\n        <div *ngIf=\"hasVCPerm(permVC.ManagePerm)\" class='col'>\n          <!-- Button trigger modal -->\n          <button type=\"button\" class=\"btn btn-primary float-right my-1\" (click)=\"initGroup(null)\" data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">Add Group</button>\n        </div>\n      </div>\n      <div class='panel-body'>\n        <table class='table table-hover'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>Nr.</th>\n              <th (click)=\"sortGroupTable(1)\">Group</th>\n              <th (click)=\"sortGroupTable(2)\">Members</th>\n              <th >Flag</th>\n              <th *ngIf=\"!deleted && hasVCPerm(permVC.ManagePerm)\">Delete</th>\n              <th>Info</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let member of vgGroups; let memberIndex=index\">\n              <td>{{memberIndex+1}}</td>\n              <td>{{member.name}}</td>\n              <td>{{member.users.length}}</td>\n              <td *ngIf=\"member.global\">Global</td>\n              <td *ngIf=\"!member.global\"></td>\n              <td *ngIf=\"!deleted && hasVCPerm(permVC.ManagePerm)\">\n                <button class=\"Detail\" title=\"Remove Group\" (click)='helperRemoveGroup(memberIndex)'\n                data-toggle=\"modal\" data-target=\"#VcGroupRemove\">&times;</button>\n              </td>\n              <td>\n                <button class=\"Detail\" title=\"Detail of Group\"\n                 (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">i</button>\n              </td>\n            </tr>\n          </tbody>\n          <!--Table body-->\n        </table>\n      </div>\n    </div>\n  </div>\n  <button *ngIf=\"!deleted && hasVCPerm(permVC.Modify)\" (click)=\"save()\" class=\"btn btn-primary mr-1\">save</button>\n  <button *ngIf=\"deleted && hasSystemPerm(permSystem.DeleteVC)\" (click)=\"save()\" class=\"btn btn-primary mr-1\">Restore</button>\n  <button class=\"btn btn-secondary mr-1\" (click)=\"goBack()\">go back</button>\n  <button *ngIf=\"!deleted && hasSystemPerm(permSystem.DeleteVC)\" class=\"btn btn-md mx-1 bg-warning\" style=\"float: right\" title=\"Delete Visbo Center\" data-toggle=\"modal\" data-target=\"#VcDelete\">Delete!</button>\n  <button *ngIf=\"deleted && hasSystemPerm(permSystem.DeleteVC)\" class=\"btn btn-md mx-1 bg-danger text-white\" style=\"float: right\" title=\"Destroy Visbo Center\" data-toggle=\"modal\" data-target=\"#VcDelete\">Destroy!</button>\n\n  <!-- Modal Add System User -->\n  <div class=\"modal fade\" id=\"VcUserModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserModalCenterTitle\">Add a new User to the Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"newUserInvite\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"email\" class=\"col-form-label\">Name:</label>\n              <input type=\"email\" class=\"form-control\" name=\"email\" [(ngModel)]=\"newUserInvite.email\" #email=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" autocomplete=\"email\">\n              <div *ngIf=\"f.submitted && !email.valid\" class=\"help-block\">E-mail address is required</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !group.valid }\">\n              <label for=\"group\" class=\"col-form-label\">Group:</label>\n              <select class=\"form-control\" name=\"group\" [(ngModel)]=\"newUserInvite.groupName\" #group=\"ngModel\" required>\n                <option></option>\n                <option *ngFor=\"let groupItem of vgGroups\">{{groupItem.name}}</option>\n              </select>\n              <div *ngIf=\"f.submitted && !group.valid\" class=\"help-block\">Group must be defined</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !inviteMessage.valid }\">\n              <label for=\"inviteMessage\" class=\"col-form-label\">Message:</label>\n              <textarea class=\"form-control\" name=\"inviteMessage\" [(ngModel)]=\"newUserInvite.inviteMessage\" #inviteMessage=\"ngModel\" > </textarea>\n            </div>\n            <div *ngIf=\"f.submitted && !inviteMessage.valid\" class=\"help-block\">Error in Message</div>\n            <div class=\"form-group\">\n              <button *ngIf=\"!(email.valid && group.valid)\" type=\"submit\" class=\"btn btn-primary\" >Invite</button>\n              <button *ngIf=\"email.valid && group.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addNewVCUser()\" data-dismiss=\"modal\">Invite</button>\n              <!-- <button *ngIf=\"f.form.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addNewVCUser()\" data-dismiss=\"modal\">Invite</button> -->\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete User -->\n  <div class=\"modal fade\" id=\"VcUserRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalRemoveTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"userIndex >= 0 && userIndex < vgUsers.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove User from Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this User from Visbo Center? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">User:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].email }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].groupName }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCUser(vgUsers[userIndex], visbocenter._id)\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Add/Change System Group -->\n  <div class=\"modal fade\" id=\"VcGroupModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" >\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 *ngIf=\"actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Modify a Group in the Visbo Center</h5>\n          <h5 *ngIf=\"!actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Add a new Group to the Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"actGroup\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"groupName\" class=\"col-form-label\">Name:</label>\n              <input type=\"text\" class=\"form-control\" name=\"groupName\" [(ngModel)]=\"actGroup.groupName\" #groupName=\"ngModel\" required>\n              <div *ngIf=\"f.submitted && !groupName.valid\" class=\"help-block\">Group Name is required</div>\n            </div>\n            <!-- VC Permissions -->\n            <div>Define Visbo Center Permission</div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm1\" name=\"checkedView\" [(ngModel)]=\"actGroup.checkedView\" #checkedView=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"perm1\">View Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm2\" name=\"checkedViewAudit\" [(ngModel)]=\"actGroup.checkedViewAudit\" #checkedViewAudit=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm2\">View Audit</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm3\" name=\"checkedModify\" [(ngModel)]=\"actGroup.checkedModify\" #checkedModify=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm3\">Modify Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm4\" name=\"checkedCreateVP\" [(ngModel)]=\"actGroup.checkedCreateVP\" #checkedCreateVP=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm4\">Create Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm5\" name=\"checkedManagePerm\" [(ngModel)]=\"actGroup.checkedManagePerm\" #checkedManagePerm=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm5\">Manage Permissions, Users and Groups</label>\n            </div>\n            <br>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"global\" name=\"checkGlobal\" [(ngModel)]=\"actGroup.checkGlobal\" #checkGlobal=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"global\">Group has Access to all Visbo Projects</label>\n            </div>\n            <div *ngIf=\"actGroup.checkGlobal\" >\n            <!-- VP Permissions -->\n              <div>Define Visbo Project Permission</div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP1\" name=\"checkedVPView\" [(ngModel)]=\"actGroup.checkedVPView\" #checkedVPView=\"ngModel\">\n                  <label class=\"custom-control-label\" for=\"permVP1\">View Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP2\" name=\"checkedVPViewAudit\" [(ngModel)]=\"actGroup.checkedVPViewAudit\" #checkedVPViewAudit=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP2\">View Project Audit</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP3\" name=\"checkedVPModify\" [(ngModel)]=\"actGroup.checkedVPModify\" #checkedVPModify=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP3\">Modify Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP4\" name=\"checkedCreateVariant\" [(ngModel)]=\"actGroup.checkedCreateVariant\" #checkedCreateVariant=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP4\">Create Visbo Project Variant</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP5\" name=\"checkedVPManagePerm\" [(ngModel)]=\"actGroup.checkedVPManagePerm\" #checkedVPManagePerm=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP5\">Manage Permissions, Users and Groups</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP6\" name=\"checkedVPDelete\" [(ngModel)]=\"actGroup.checkedVPDelete\" #checkedVPDelete=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP6\">Delete Visbo Project</label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <button *ngIf=\"!(f.form.valid && !deleted && hasVCPerm(permVC.ManagePerm))\" type=\"submit\" class=\"btn btn-primary disabled\" >{{this.actGroup.confirm}}</button>\n              <button *ngIf=\"(f.form.valid && !deleted && hasVCPerm(permVC.ManagePerm))\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addModifyVCGroup()\" data-dismiss=\"modal\">{{this.actGroup.confirm}}</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete Group -->\n  <div class=\"modal fade\" id=\"VcGroupRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalRemoveTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"groupIndex >= 0 && groupIndex < vgGroups.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove Group from Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this Group from Visbo Center? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].name }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Members:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].users.length }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCGroup(vgGroups[groupIndex])\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete VC -->\n  <div class=\"modal fade\" id=\"VcDelete\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Delete Visbo Center\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcDeleteTitle\">Delete this Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label *ngIf=\"!deleted\" class=\"bg-warning\">Do you really want to delete this Visbo Center? </label>\n            <label *ngIf=\"deleted\" class=\"bg-danger text-white\">Do you really want to destroy this Visbo Center? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Name:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"VcDescription\" class=\"col-form-label\">Description:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.description }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"VcProjects\" class=\"col-form-label\">Projects:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.vpCount }} </label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button *ngIf=\"!deleted\" type=\"button\" class=\"btn btn-warning text-white\" (click)=\"delete(visbocenter)\" data-dismiss=\"modal\">Delete</button>\n          <button *ngIf=\"deleted\" type=\"button\" class=\"btn btn-danger text-white\" (click)=\"delete(visbocenter)\" data-dismiss=\"modal\">Destroy</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenters/sysvisbocenters.component.html":
/*!******************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenters/sysvisbocenters.component.html ***!
  \******************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 class='panel-heading ml-0'>\n        Visbo Centers\n      </h2>\n    </div>\n    <div *ngIf=\"hasSystemPerm(permSystem.DeleteVC)\" class='btn-group'>\n        <button *ngIf=\"!deleted\" type=\"button\" class=\"m-1 btn btn-secondary\" (click)=\"toggleVisboCenters()\">Show Deleted</button>\n        <button *ngIf=\"deleted\" type=\"button\" class=\"m-1 btn btn-secondary\" (click)=\"toggleVisboCenters()\">Show Existing</button>\n        <button *ngIf=\"hasSystemPerm(permSystem.CreateVC)\" type=\"button\" class=\"m-1 btn btn-primary\" data-toggle=\"modal\" data-target=\"#VcModalCreate\">Create New</button>\n    </div>\n  </div>\n\n  <div class='panel-body'>\n    <table class='table table-hover table-sortable'>\n      <!--Table head-->\n      <thead>\n        <tr>\n          <th class=\"d-none d-md-table-cell\">Nr.</th>\n          <th (click)=\"sortVCTable(1)\">Name</th>\n          <th class=\"d-none d-sm-table-cell\" (click)=\"sortVCTable(2)\">Modified</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVCTable(3)\"># Projects</th>\n          <th>Detail</th>\n        </tr>\n      </thead>\n      <!--Table body-->\n      <tbody>\n\n        <tr *ngFor=\"let vc of visbocenters; let vcIndex=index\" (click)=\"gotoClickedRow(vc)\" >\n          <td class=\"d-none d-md-table-cell\">{{vcIndex+1}}</td>\n          <td>{{vc.name}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vc.updatedAt | date :'dd.MM.yyyy HH:mm'}}</td>\n          <td class=\"d-none d-sm-table-cell d-md-none\">{{vc.updatedAt | date :'dd.MM.yy'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vc.vpCount}}</td>\n          <td>\n            <button class=\"Detail\" title=\"Detail of Visbo Center\"\n            (click)=\"gotoDetail(vc)\">i</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<!-- Modal VC Create-->\n<div class=\"modal fade\" id=\"VcModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcModalCreateTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VcModalCenterTitle\">Create a new Visbo Center</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form>\n          <div class=\"form-group\">\n            <label for=\"vcName\" class=\"col-form-label\">Name:</label>\n            <input type=\"text\" class=\"form-control\" #vcName>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"vcDescription\" class=\"col-form-label\">Description:</label>\n            <textarea class=\"form-control\" #vcDescription></textarea>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"add(vcName.value, vcDescription.value); vcName.value=''; vcDescription.value=''\" data-dismiss=\"modal\">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboproject-detail/sysvisboproject-detail.component.html":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboproject-detail/sysvisboproject-detail.component.html ***!
  \********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div *ngIf=\"visboproject\">\n  <div class='container'>\n    <h3>Project: <a (click)=\"gotoVPList(visboproject)\">{{ visboproject.name | uppercase }}</a></h3>\n    <h5>Visbo Center:\n      <a (click)=\"gotoVCDetail(visboproject)\">{{ visboproject.vc.name }}</a>\n    </h5>\n    <form>\n      <div class=\"form-group row\">\n        <label for=\"vpName\" class=\"col-4 col-md-3 col-form-label\">Name:</label>\n        <label class=\"col-8 form-control-static\">{{ visboproject.name }} </label>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"vpDescription\" class=\"col-4 col-md-3 col-form-label\">Description:</label>\n        <label class=\"col-8 form-control-static\">{{ visboproject.description }} </label>\n      </div>\n\n      <div class=\"form-group row\">\n        <label for=\"Created\" class=\"col-4 col-md-3 col-form-label\">Created / Updated at:</label>\n        <label class=\"col form-control-static col-form-label\">{{ visboproject.createdAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n        <label class=\"col form-control-static col-form-label\">{{ visboproject.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n      </div>\n    </form>\n    <div class=\"btn-toolbar\" style=\"\">\n      <button *ngIf=\"hasSystemPerm(permSystem.ViewAudit)\" type=\"button\" class=\"btn btn-md btn-light mr-1\" (click)=\"gotoVPAudit(visboproject)\">View Audit</button>\n      <button *ngIf=\"!showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Groups</button>\n      <button *ngIf=\"showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Users</button>\n    </div>\n\n    <div *ngIf=\"!showGroups\" >\n      <div >\n        <div class='row'>\n          <div class='col'>\n            <h5 class='panel-heading'>\n                Visbo Project Users\n            </h5>\n          </div>\n        </div>\n        <div class='panel-body'>\n          <table class='table table-hover'>\n            <!--Table head-->\n            <thead>\n              <tr>\n                <th>Nr.</th>\n                <th (click)=\"sortUserTable(1)\">e-mail</th>\n                <th (click)=\"sortUserTable(2)\">Group</th>\n              </tr>\n            </thead>\n            <!--Table body-->\n            <tbody>\n              <tr *ngFor=\"let member of vgUsers; let memberIndex=index\"> <!-- class=\"danger\"> -->\n                <td>{{memberIndex+1}}</td>\n                <td>{{member.email}}</td>\n                <td>{{member.groupName}}</td>\n              </tr>\n            </tbody>\n            <!--Table body-->\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"showGroups\" >\n      <div >\n        <div class='row'>\n          <div class='col'>\n            <h5 class='panel-heading'>\n                Visbo Project Groups\n            </h5>\n          </div>\n        </div>\n        <div class='panel-body'>\n          <table class='table table-hover'>\n            <!--Table head-->\n            <thead>\n              <tr>\n                <th>Nr.</th>\n                <th (click)=\"sortGroupTable(1)\">Group</th>\n                <th (click)=\"sortGroupTable(2)\">Members</th>\n                <th >Flag</th>\n                <th>Info</th>\n              </tr>\n            </thead>\n            <!--Table body-->\n            <tbody>\n              <tr *ngFor=\"let member of vgGroups; let memberIndex=index\">\n                <td>{{memberIndex+1}}</td>\n                <td>{{member.name}}</td>\n                <td>{{member.users.length}}</td>\n                <td *ngIf=\"member.global\">Global</td>\n                <td *ngIf=\"!member.global\"></td>\n                <td>\n                  <button class=\"Detail\" title=\"Detail of Group\"\n                   (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VpGroupModalCreate\">i</button>\n                </td>\n              </tr>\n            </tbody>\n            <!--Table body-->\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <!-- Modal Add/Change System Group -->\n  <div class=\"modal fade\" id=\"VpGroupModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpGroupModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" >\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 *ngIf=\"actGroup.gid\" class=\"modal-title\" id=\"VpGroupModalCenterTitle\">Modify a Group in the Visbo Center</h5>\n          <h5 *ngIf=\"!actGroup.gid\" class=\"modal-title\" id=\"VpGroupModalCenterTitle\">Add a new Group to the Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"actGroup\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !groupName.valid }\">\n              <label for=\"groupName\" class=\"col-form-label\">Name:</label>\n              <input type=\"text\" class=\"form-control\" name=\"groupName\" [(ngModel)]=\"actGroup.groupName\" #groupName=\"ngModel\" required>\n              <div *ngIf=\"f.submitted && !groupName.valid\" class=\"help-block\">Group Name is required</div>\n            </div>\n            <!-- VP Permissions -->\n            <div>\n              <div>Define Visbo Project Permission</div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP1\" name=\"checkedVPView\" [(ngModel)]=\"actGroup.checkedVPView\" #checkedVPView=\"ngModel\">\n                  <label class=\"custom-control-label\" for=\"permVP1\">View Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP2\" name=\"checkedVPViewAudit\" [(ngModel)]=\"actGroup.checkedVPViewAudit\" #checkedVPViewAudit=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP2\">View Project Audit</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP3\" name=\"checkedVPModify\" [(ngModel)]=\"actGroup.checkedVPModify\" #checkedVPModify=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP3\">Modify Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP4\" name=\"checkedCreateVariant\" [(ngModel)]=\"actGroup.checkedCreateVariant\" #checkedCreateVariant=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP4\">Create Visbo Project Variant</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP5\" name=\"checkedVPManagePerm\" [(ngModel)]=\"actGroup.checkedVPManagePerm\" #checkedVPManagePerm=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP5\">Manage Permissions, Users and Groups</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP6\" name=\"checkedVPDelete\" [(ngModel)]=\"actGroup.checkedVPDelete\" #checkedVPDelete=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP6\">Delete Visbo Project</label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboprojects/sysvisboprojects.component.html":
/*!********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboprojects/sysvisboprojects.component.html ***!
  \********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 *ngIf=\"!vcActive\">\n        Projects\n      </h2>\n      <h2 *ngIf=\"vcActive\">\n        Projects in: <a (click)=\"gotoVCDetail(vcActive)\">{{vcActive.name}}</a>\n      </h2>\n    </div>\n  </div>\n\n  <div class='panel-body'>\n    <table class='table table-hover table-sortable'>\n      <!--Table head-->\n      <thead>\n        <tr>\n          <th class=\"d-none d-md-table-cell\">Nr.</th>\n          <th (click)=\"sortVPTable(1)\">Name</th>\n          <th class=\"d-none d-sm-table-cell\" (click)=\"sortVPTable(2)\">Modified</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVPTable(4)\"># Versions</th>\n          <th class=\"d-none d-lg-table-cell\" (click)=\"sortVPTable(3)\">Visbo Center</th>\n          <th>Info</th>\n        </tr>\n      </thead>\n      <!--Table body-->\n      <tbody>\n        <tr *ngFor=\"let vp of visboprojects; let vpIndex=index\" (click)=\"gotoClickedRow(vp)\">\n          <td class=\"d-none d-md-table-cell\">{{vpIndex+1}}</td>\n          <td>{{vp.name}}</td>\n          <td class=\"d-none d-lg-table-cell\">{{vp.updatedAt | date :'dd.MM.yyyy HH:mm'}}</td>\n          <td class=\"d-none d-md-table-cell d-lg-none\">{{vp.updatedAt | date :'dd.MM.yy'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vp.vpvCount}}</td>\n          <td class=\"d-none d-lg-table-cell\" *ngIf=\"vp.vc\">{{vp.vc.name}}</td>\n          <td class=\"d-none d-lg-table-cell\" *ngIf=\"!vp.vc\"> </td>\n          <td>\n            <button class=\"Detail\" title=\"Detail of Visbo Project\"\n            (click)=\"gotoDetail(vp)\">i</button>\n          </td>\n        </tr>\n      </tbody>\n      <!--Table body-->\n    </table>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbosystem/sysvisbosystem.component.html":
/*!****************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbosystem/sysvisbosystem.component.html ***!
  \****************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<sysvisbo-navbar></sysvisbo-navbar>\n<div *ngIf=\"visbocenter\">\n  <h3>System: {{ visbocenter.name | uppercase }}</h3>\n  <!-- <form>\n    <div class=\"form-group row\">\n      <label for=\"Updated\" class=\"col-4 col-md-3 col-form-label\">Updated at:</label>\n      <label class=\"col-8 col-form-label\">{{ visbocenter.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n    </div>\n  </form> -->\n  <div class=\"btn-toolbar\" style=\"\">\n    <button *ngIf=\"!showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Groups</button>\n    <button *ngIf=\"showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Users</button>\n  </div>\n  <div *ngIf=\"!showGroups\" >\n    <div >\n      <div class='row'>\n        <div class='col'>\n          <h5 class='panel-heading'>\n              Visbo System Users\n          </h5>\n        </div>\n        <div *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\" class='col'>\n          <button type=\"button\" class=\"btn btn-primary float-right my-1\" data-toggle=\"modal\" data-target=\"#VcUserModalCreate\">Add User</button>\n        </div>\n      </div>\n      <div class='panel-body'>\n        <table class='table table-hover'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>Nr.</th>\n              <th (click)=\"sortUserTable(1)\">e-mail</th>\n              <th (click)=\"sortUserTable(2)\">Group</th>\n              <th *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\">Delete</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let member of vcUsers; let memberIndex=index\"> <!-- class=\"danger\"> -->\n              <td>{{memberIndex+1}}</td>\n              <td>{{member.email}}</td>\n              <td>{{member.groupName}}</td>\n              <td *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\">\n                <button class=\"Detail\" title=\"Remove User\" (click)='helperRemoveUser(memberIndex)'\n                data-toggle=\"modal\" data-target=\"#VcUserRemove\">&times;</button>\n              </td>\n            </tr>\n          </tbody>\n          <!--Table body-->\n        </table>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"showGroups\" >\n    <div >\n      <div class='row'>\n        <div class='col'>\n          <h5 class='panel-heading'>\n              Visbo System Groups\n          </h5>\n        </div>\n        <div *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\" class='col'>\n          <!-- Button trigger modal -->\n          <button type=\"button\" class=\"btn btn-primary float-right my-1\" (click)=\"initGroup(null)\" data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">Add Group</button>\n        </div>\n      </div>\n      <div class='panel-body'>\n        <table class='table table-hover'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>Nr.</th>\n              <th (click)=\"sortGroupTable(1)\">Group</th>\n              <th (click)=\"sortGroupTable(2)\">Members</th>\n              <th >Flag</th>\n              <th *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\">Delete</th>\n              <th>Info</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let member of vcGroups; let memberIndex=index\">\n              <td>{{memberIndex+1}}</td>\n              <td>{{member.name}}</td>\n              <td>{{member.users.length}}</td>\n              <td *ngIf=\"member.global\">Global</td>\n              <td *ngIf=\"!member.global\"></td>\n              <td *ngIf=\"hasSystemPerm(permSystem.ManagePerm)\">\n                <button class=\"Detail\" title=\"Remove Group\" (click)='helperRemoveGroup(memberIndex)'\n                data-toggle=\"modal\" data-target=\"#VcGroupRemove\">&times;</button>\n              </td>\n              <td>\n                <button class=\"Detail\" title=\"Detail of Group\"\n                 (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">i</button>\n              </td>\n            </tr>\n          </tbody>\n          <!--Table body-->\n        </table>\n      </div>\n    </div>\n  </div>\n\n<!-- Modal Add VC User -->\n<div class=\"modal fade\" id=\"VcUserModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalCreateTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VcUserModalCenterTitle\">Add a new User to the Visbo System</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form name=\"newUserInvite\" #f=\"ngForm\" novalidate>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n            <label for=\"email\" class=\"col-form-label\">Name:</label>\n            <input type=\"email\" class=\"form-control\" name=\"email\" [(ngModel)]=\"newUserInvite.email\" #email=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" autocomplete=\"email\">\n            <div *ngIf=\"f.submitted && !email.valid\" class=\"help-block\">E-mail address is required</div>\n          </div>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !group.valid }\">\n            <label for=\"group\" class=\"col-form-label\">Group:</label>\n            <select class=\"form-control\" name=\"group\" [(ngModel)]=\"newUserInvite.groupName\" #group=\"ngModel\" required>\n              <option></option>\n              <option *ngFor=\"let groupItem of vcGroups\">{{groupItem.name}}</option>\n            </select>\n            <div *ngIf=\"f.submitted && !group.valid\" class=\"help-block\">Group must be defined</div>\n          </div>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !inviteMessage.valid }\">\n            <label for=\"inviteMessage\" class=\"col-form-label\">Message:</label>\n            <textarea class=\"form-control\" name=\"inviteMessage\" [(ngModel)]=\"newUserInvite.inviteMessage\" #inviteMessage=\"ngModel\" > </textarea>\n          </div>\n          <div *ngIf=\"f.submitted && !inviteMessage.valid\" class=\"help-block\">Error in Message</div>\n          <div class=\"modal-footer align-items-end\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            <button *ngIf=\"!(email.valid && group.valid)\" type=\"button\" class=\"btn btn-primary\">Invite</button>\n            <button *ngIf=\"email.valid && group.valid\" type=\"button\" class=\"btn btn-primary\" (click)=\"addNewVCUser()\" data-dismiss=\"modal\">Invite</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Modal Delete User -->\n<div class=\"modal fade\" id=\"VcUserRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalRemoveTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"userIndex >= 0 && userIndex < vcUsers.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove User from Visbo System</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div>\n          <label class=\"bg-warning\">Do you really want to remove this User from Visbo System? </label>\n        </div>\n        <form>\n          <div class=\"form-group\">\n            <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n            <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-form-label\">User:</label>\n            <label class=\"col-8 form-control-static\">{{ vcUsers[userIndex].email }}</label>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-form-label\">Group:</label>\n            <label class=\"col-8 form-control-static\">{{ vcUsers[userIndex].groupName }}</label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCUser(vcUsers[userIndex], visbocenter._id)\" data-dismiss=\"modal\">Remove</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Modal Add/Change VC Group -->\n<div class=\"modal fade\" id=\"VcGroupModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalCreateTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" >\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 *ngIf=\"actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Modify a Group in the Visbo System</h5>\n        <h5 *ngIf=\"!actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Add a new Group to the Visbo System</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form name=\"actGroup\" #f=\"ngForm\" novalidate>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n            <label for=\"groupName\" class=\"col-form-label\">Name:</label>\n            <input type=\"text\" class=\"form-control\" name=\"groupName\" [(ngModel)]=\"actGroup.groupName\" #groupName=\"ngModel\" required>\n            <div *ngIf=\"f.submitted && !groupName.valid\" class=\"help-block\">Group Name is required</div>\n          </div>\n          <!-- System Permissions -->\n          <div>Define System Permission</div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm1\" name=\"checkedSystemView\" [(ngModel)]=\"actGroup.checkedSystemView\" #checkedSystemView=\"ngModel\">\n              <label class=\"custom-control-label\" for=\"sysperm1\">View Visbo Center</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm2\" name=\"checkedSystemViewAudit\" [(ngModel)]=\"actGroup.checkedSystemViewAudit\" #checkedSystemViewAudit=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm2\">View Audit</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm3\" name=\"checkedSystemViewLog\" [(ngModel)]=\"actGroup.checkedSystemViewLog\" #checkedSystemViewLog=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm3\">View Log Files</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm3a\" name=\"checkedSystemModify\" [(ngModel)]=\"actGroup.checkedSystemModify\" #checkedSystemModify=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm3a\">Modify System</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm4\" name=\"checkedSystemCreateVC\" [(ngModel)]=\"actGroup.checkedSystemCreateVC\" #checkedSystemCreateVC=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm4\">Create Visbo Center</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm5\" name=\"checkedSystemDeleteVC\" [(ngModel)]=\"actGroup.checkedSystemDeleteVC\" #checkedSystemDeleteVC=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm5\">Delete Visbo Center</label>\n          </div>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"sysperm6\" name=\"checkedSystemManagePerm\" [(ngModel)]=\"actGroup.checkedSystemManagePerm\" #checkedSystemManagePerm=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"sysperm6\">Manage Permissions, Users and Groups</label>\n          </div>\n          <br>\n          <div class=\"custom-control custom-checkbox\">\n              <input type=\"checkbox\" class=\"custom-control-input\" id=\"global\" name=\"checkGlobal\" [(ngModel)]=\"actGroup.checkGlobal\" #checkGlobal=\"ngModel\" >\n              <label class=\"custom-control-label\" for=\"global\">Group has Access to all Visbo Centers / Projects</label>\n          </div>\n          <div *ngIf=\"actGroup.checkGlobal\" >\n            <!-- VC Permissions -->\n            <div>Define Visbo Center Permission</div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm1\" name=\"checkedView\" [(ngModel)]=\"actGroup.checkedView\" #checkedView=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"perm1\">View Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm2\" name=\"checkedViewAudit\" [(ngModel)]=\"actGroup.checkedViewAudit\" #checkedViewAudit=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm2\">View Audit</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm3\" name=\"checkedModify\" [(ngModel)]=\"actGroup.checkedModify\" #checkedModify=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm3\">Modify Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm4\" name=\"checkedCreateVP\" [(ngModel)]=\"actGroup.checkedCreateVP\" #checkedCreateVP=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm4\">Create Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm5\" name=\"checkedManagePerm\" [(ngModel)]=\"actGroup.checkedManagePerm\" #checkedManagePerm=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm5\">Manage Permissions, Users and Groups</label>\n            </div>\n            <!-- VP Permissions -->\n            <div>Define Visbo Project Permission</div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP1\" name=\"checkedVPView\" [(ngModel)]=\"actGroup.checkedVPView\" #checkedVPView=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"permVP1\">View Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP2\" name=\"checkedVPViewAudit\" [(ngModel)]=\"actGroup.checkedVPViewAudit\" #checkedVPViewAudit=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP2\">View Project Audit</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP3\" name=\"checkedVPModify\" [(ngModel)]=\"actGroup.checkedVPModify\" #checkedVPModify=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP3\">Modify Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP4\" name=\"checkedCreateVariant\" [(ngModel)]=\"actGroup.checkedCreateVariant\" #checkedCreateVariant=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP4\">Create Visbo Project Variant</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP5\" name=\"checkedVPManagePerm\" [(ngModel)]=\"actGroup.checkedVPManagePerm\" #checkedVPManagePerm=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP5\">Manage Permissions, Users and Groups</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP6\" name=\"checkedVPDelete\" [(ngModel)]=\"actGroup.checkedVPDelete\" #checkedVPDelete=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP6\">Delete Visbo Project</label>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <button *ngIf=\"!(f.form.valid && hasSystemPerm(permSystem.ManagePerm))\" type=\"submit\" class=\"btn btn-primary disabled\" >{{this.actGroup.confirm}}</button>\n            <button *ngIf=\"(f.form.valid && hasSystemPerm(permSystem.ManagePerm))\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addModifyVCGroup()\" data-dismiss=\"modal\">{{this.actGroup.confirm}}</button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Modal Delete Group -->\n<div class=\"modal fade\" id=\"VcGroupRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalRemoveTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"groupIndex >= 0 && groupIndex < vcGroups.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove Group from Visbo System</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div>\n          <label class=\"bg-warning\">Do you really want to remove this Group from Visbo System? </label>\n        </div>\n        <form>\n          <div class=\"form-group\">\n            <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n            <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-form-label\">Group:</label>\n            <label class=\"col-8 form-control-static\">{{ vcGroups[groupIndex].name }}</label>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-form-label\">Members:</label>\n            <label class=\"col-8 form-control-static\">{{ vcGroups[groupIndex].users.length }}</label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCGroup(vcGroups[groupIndex])\" data-dismiss=\"modal\">Remove</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/userprofile/userprofile.component.html":
/*!**********************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/userprofile/userprofile.component.html ***!
  \**********************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class=\"col-md-8 col-md-offset-2\">\n  <h3>Profile Information for {{model.email}}</h3>\n  <div>\n    <!-- <form name=\"form\" (ngSubmit)=\"f.form.valid && saveUserProfile()\" #f=\"ngForm\" novalidate> -->\n    <form name=\"form\" (ngSubmit)=\"f.form.valid && saveUserProfile()\" #f=\"ngForm\" novalidate>\n      <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !firstName.valid }\">\n        <label for=\"firstName\">First Name</label>\n        <input type=\"text\" class=\"form-control\" name=\"firstName\" [(ngModel)]=\"model.firstName\" #firstName=\"ngModel\" required />\n        <div *ngIf=\"f.submitted && !firstName.valid\" class=\"help-block\">First Name is required</div>\n      </div>\n      <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !lastName.valid }\">\n        <label for=\"lastName\">Last Name</label>\n        <input type=\"text\" class=\"form-control\" name=\"lastName\" [(ngModel)]=\"model.lastName\" #lastName=\"ngModel\" required />\n        <div *ngIf=\"f.submitted && !lastName.valid\" class=\"help-block\">Last Name is required</div>\n      </div>\n      <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !company.valid }\">\n        <label for=\"company\">Company</label>\n        <input type=\"text\" class=\"form-control\" name=\"company\" [(ngModel)]=\"model.company\" #company=\"ngModel\" required />\n        <div *ngIf=\"f.submitted && !company.valid\" class=\"help-block\">Company is required</div>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"phone\">Phone</label>\n        <input type=\"text\" class=\"form-control\" name=\"phone\" [(ngModel)]=\"model.phone\" #phone=\"ngModel\" />\n      </div>\n      <div class=\"form-group\">\n        <button class=\"btn btn-primary\">Save</button>\n        <img *ngIf=\"loading\" src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n        <a [routerLink]=\"['/']\" class=\"btn btn-link\">Cancel</a>\n        <button type=\"button\" class=\"btn btn-secondary\" style=\"float: right\" (click)=\"passwordInit()\" title=\"Change Password\" data-toggle=\"modal\" data-target=\"#UserModalChangePassword\">\n          Change Password\n        </button>\n      </div>\n    </form>\n    <div>\n      Your last Login was at {{model.lastLoginAt | date :'dd.MM.yyyy HH:mm:ss'}}\n      <br>\n      Your last failed login was at {{model.lastLoginFailedAt | date :'dd.MM.yyyy HH:mm:ss'}}\n      <br>\n      You registered at {{model.registeredAt | date :'dd.MM.yyyy HH:mm'}}\n    </div>\n  </div>\n</div>\n\n<!-- Modal Chaneg Password -->\n<div class=\"modal fade\" id=\"UserModalChangePassword\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"UserPasswordChangeModalTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"UserPasswordChangeModalTitle\">Change Password</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form name=\"passwordChange\" #fpw=\"ngForm\" novalidate>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': fpw.submitted && !oldpassword.valid }\">\n            <label for=\"oldpassword\" class=\"col-form-label\">Old Password:</label>\n            <input type=\"password\" class=\"form-control\" name=\"oldpassword\" [(ngModel)]=\"modelPw.oldpassword\" #oldpassword=\"ngModel\" required autocomplete=\"password\">\n            <div *ngIf=\"fpw.submitted && !oldpassword.valid\" class=\"help-block\">Old password is required</div>\n          </div>\n          <div class=\"form-group\" [ngClass]=\"{ 'has-error': fpw.submitted && !newpassword.valid }\">\n            <label for=\"newpassword\" class=\"col-form-label\" data-toggle=\"tooltip\" data-placement=\"top\" data-delay='50'\n              title=\"Password Rule: {{PWPolicyDescription}}\">\n              New Password(*):\n            </label>\n            <input type=\"password\" class=\"form-control\" name=\"newpassword\" [(ngModel)]=\"modelPw.newpassword\" #newpassword=\"ngModel\" required autocomplete=\"off\" pattern= {{PWPolicy}} >\n            <div *ngIf=\"!newpassword.valid\" class=\"help-block\">New password has to follow the Policy.</div>\n            <div *ngIf=\"!newpassword.valid\" class=\"help-block\">{{PWPolicyDescription}}</div>\n          </div>\n          <div class=\"form-group\">\n            <button *ngIf=\"!fpw.form.valid\" type=\"submit\" class=\"btn btn-primary\" >Change</button>\n            <button *ngIf=\"fpw.form.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"passwordChange()\" data-dismiss=\"modal\">Change</button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-audit/visbocenter-audit.component.html":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-audit/visbocenter-audit.component.html ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div *ngIf=\"!sysadmin\">\n  <visbo-navbar></visbo-navbar>\n</div>\n<div *ngIf=\"sysadmin\">\n  <sysvisbo-navbar></sysvisbo-navbar>\n</div>\n<div class='well'>\n  <div class='row'>\n    <h2 *ngIf=\"!visbocenter\" class='panel-heading ml-0'>\n      Visbo Center Audit\n    </h2>\n    <h2 *ngIf=\"visbocenter\" class='panel-heading ml-0'>\n      Visbo Center Audit for: <a (click)=\"goBack()\">{{visbocenter.name}}</a>\n    </h2>\n  </div>\n  <form name=\"form\" (ngSubmit)=\"getVisboCenterAudits()\" #f=\"ngForm\" novalidate>\n    <div *ngIf=\"sysadmin\" class=\"form-group row\">\n      <label for=\"auditFrom\" class=\"col-1 col-form-label\">From:</label>\n      <input id=\"auditFrom\" type=\"datetime-local\" class=\"col-2 col-sm-4 form-control\" name=\"auditFrom\" [(ngModel)]=\"auditFrom\">\n      <label for=\"auditTo\" class=\"col-1 col-form-label\">To:</label>\n      <input id=\"auditTo\" type=\"datetime-local\" class=\"col-2 col-sm-4 form-control\" name=\"auditTo\" [(ngModel)]=\"auditTo\" >\n    </div>\n    <div *ngIf=\"!sysadmin\" class=\"form-group row\">\n      <label for=\"auditFrom\" class=\"col-1 col-form-label\">From:</label>\n      <input id=\"auditFrom\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditFrom\" [(ngModel)]=\"auditFrom\">\n      <label for=\"auditTo\" class=\"col-1 col-form-label\">To:</label>\n      <input id=\"auditTo\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditTo\" [(ngModel)]=\"auditTo\" >\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"auditText\" class=\"col-1 col-form-label\">Filter:</label>\n      <input id=\"auditText\" type=\"text\" class=\"col-2 col-sm-3 form-control\" name=\"auditText\" [(ngModel)]=\"auditText\" >\n\n      <label for=\"auditCount\" class=\"col-1 col-form-label\">Max:</label>\n      <select class=\"col-1 form-control mx-1\" name=\"auditCount\" [(ngModel)]=\"auditCount\">\n        <option>50</option>\n        <option>100</option>\n        <option>500</option>\n        <option>2000</option>\n      </select>\n\n      <select class=\"col-1 form-control mx-1\" id=\"auditType\" name=\"auditArea\" [(ngModel)]=\"auditArea\">\n        <option *ngFor=\"let actionItem of auditAreaList\">{{actionItem.name}}</option>\n      </select>\n      <select class=\"col-1 form-control mx-1\" id=\"auditType\" name=\"auditType\" [(ngModel)]=\"auditType\">\n        <option *ngFor=\"let actionItem of auditTypeList\">{{actionItem.name}}</option>\n      </select>\n      <div class='btn-group '>\n        <button type=\"button\" class=\"btn btn-sm btn-primary ml-auto mx-1\" (click)=\"getVisboCenterAudits()\">Filter</button>\n        <button type=\"button\" class=\"btn btn-sm btn-secondary ml-auto mx-1\" (click)=\"downloadVisboAudit()\">Download</button>\n      </div>\n    </div>\n  </form>\n\n  <div class='container-fluid'>\n    <div class='panel-body'>\n      <table class='table table-hover table-sortable'>\n        <!--Table head-->\n        <thead>\n          <tr>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(1)\">Created</th>\n            <th (click)=\"sortTable(2)\">User</th>\n            <th (click)=\"sortTable(3)\"> Action</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(4)\"> Info</th>\n            <th class=\"d-none d-lg-table-cell\" (click)=\"sortTable(5)\"> Result</th>\n            <th>Detail</th>\n          </tr>\n        </thead>\n        <!--Table body-->\n        <tbody>\n          <tr *ngFor=\"let auditentry of audit; let auditIndex=index\" (click)='helperAuditIndex(auditIndex)'\n          data-toggle=\"modal\" data-target=\"#AuditDetail\">\n            <td  *ngIf=\"isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'HH:mm:ss'}}</td>\n            <td  *ngIf=\"!isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'dd.MM HH:mm'}}</td>\n            <td *ngIf=\"auditentry.user\" >{{auditentry.user.email }}</td>\n            <td *ngIf=\"!auditentry.user\"> Unknown </td>\n            <td>{{auditentry.actionDescription }}</td>\n            <td class=\"d-none d-md-table-cell\" >{{helperShortenText(auditentry.actionInfo, 30) }}</td>\n            <td class=\"d-none d-lg-table-cell\" >{{helperResponseText(auditentry) }}</td>\n            <td>\n              <button class=\"Detail\" title=\"Detail of Visbo Audit\" (click)='helperAuditIndex(auditIndex)'\n              data-toggle=\"modal\" data-target=\"#AuditDetail\">i</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"AuditDetail\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Audit Detail\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"auditIndex >= 0 && auditIndex < audit.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"AuditDetailTitle\">Detail of Audit Entry</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-11\">\n            <h3 title=\"Previous Entry\" (click)='pageAuditIndex(-1)'><a class=\"px-3 col-1 fas fa-caret-square-left\"></a></h3>\n          </div>\n          <div class=\"col-1\">\n            <h3 title=\"Next Entry\" (click)='pageAuditIndex(1)'><a class=\"px-3 col-1 fas fa-caret-square-right\"></a></h3>\n          </div>\n        </div>\n        <form>\n          <label class=\"py-0 m-0 col-4 form-control-static\">Created:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].createdAt | date :'dd.MM.yyyy HH:mm:ss.SSS' }} </label>\n          <label class=\"py-0 m-0 col-4 form-control-static\">User:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].user.email }} </label>\n          <label class=\"py-0 m-0 col-4 form-control-static\">Action:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].actionDescription }} </label>\n          <div *ngIf=\"audit[auditIndex].actionInfo\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Info:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].actionInfo }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vc\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Center:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vc.name }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vp\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Project:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vp.name }} ({{ audit[auditIndex].vp.vpid }}) </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vpv\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Project Version:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vpv.name }} ({{ audit[auditIndex].vpv.vpvid }})</label>\n          </div>\n          <label class=\"py-0 m-0 col-4 form-control-static\">Result:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ helperResponseText(audit[auditIndex]) }} </label>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">tech. Action:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].action }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">URL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\" style=\"overflow-wrap: break-word;\">{{ audit[auditIndex].url }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Time:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].result.time }} ms </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Size:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ helperFormatBytes(audit[auditIndex].result.size || 0, 2) }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">User Agent:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].userAgent }}</label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">IP:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ip }}</label>\n          </div>\n          <div *ngIf=\"showMore && audit[auditIndex].ttl\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">TTL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ttl | date :'dd.MM HH:mm' }}</label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button *ngIf=\"!showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">More</button>\n        <button *ngIf=\"showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">Less</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-detail/visbocenter-detail.component.html":
/*!************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-detail/visbocenter-detail.component.html ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div *ngIf=\"visbocenter\">\n  <!-- <div class='container'> -->\n    <h3>Visbo Center: <a (click)=\"gotoVPList(visbocenter)\">{{ visbocenter.name | uppercase }}</a></h3>\n    <form>\n      <div class=\"form-group row\">\n        <label for=\"vcName\" class=\"col-3 col-md-2 col-form-label\">Name:</label>\n        <input *ngIf=\"hasVCPerm(permVC.Modify)\" type=\"text\" name=vcName class=\"col-8 form-control\" [(ngModel)]=\"visbocenter.name\" placeholder=\"Name\">\n        <label *ngIf=\"!hasVCPerm(permVC.Modify)\" class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n      </div>\n      <div class=\"form-group row\">\n        <label for=\"vcDescription\" class=\"col-3 col-md-2 col-form-label\">Description:</label>\n        <textarea *ngIf=\"hasVCPerm(permVC.Modify)\" name=vcDescription class=\"col-8 form-control\" [(ngModel)]=\"visbocenter.description\" placeholder=\"Type in your description\"></textarea>\n        <label *ngIf=\"!hasVCPerm(permVC.Modify)\" class=\"col-8 form-control-static\">{{ visbocenter.description }} </label>\n      </div>\n      <div class=\"form-group row d-none d-md-block\">\n        <label for=\"Created\" class=\"col-3 col-md-2 col-form-label\">Created / Updated at:</label>\n        <label class=\"col-4 form-control-static col-form-label\">{{ visbocenter.createdAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n        <label class=\"col-4 form-control-static col-form-label\">{{ visbocenter.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n      </div>\n    </form>\n    <div *ngIf=\"getVCPerm() != permVC.View\">\n      <div class=\"btn-toolbar\" style=\"\">\n        <button *ngIf=\"hasVCPerm(permVC.ViewAudit)\" type=\"button\" class=\"btn btn-md btn-light mr-1\" (click)=\"gotoVCAudit(visbocenter)\">View Audit</button>\n        <button *ngIf=\"!showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Groups</button>\n        <button *ngIf=\"showGroups\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"toggleUserGroup()\">Show Users</button>\n        <button *ngIf=\"vgVPUsers && vgVPUsers.length > 0\" type=\"button\" class=\"btn btn-md btn-light mx-1\" (click)=\"showProjectUser()\">Show Project Users</button>\n      </div>\n\n      <div *ngIf=\"!showGroups && !showProjectUsers\" >\n        <div >\n          <div class='row'>\n            <div class='col'>\n              <h4 class='panel-heading'>\n                  Visbo Center Users\n              </h4>\n            </div>\n            <div *ngIf=\"hasVCPerm(permVC.ManagePerm)\" class='col'>\n              <!-- Button trigger modal -->\n              <button type=\"button\" class=\"my-1 btn btn-primary float-right\" data-toggle=\"modal\" data-target=\"#VcUserModalCreate\">Add User</button>\n            </div>\n          </div>\n          <div class='panel-body'>\n            <table class='table table-hover'>\n              <!--Table head-->\n              <thead>\n                <tr>\n                  <th>Nr.</th>\n                  <th (click)=\"sortUserTable(1)\">e-mail</th>\n                  <th (click)=\"sortUserTable(2)\">Group</th>\n                  <th *ngIf=\"hasVCPerm(permVC.ManagePerm)\">Delete</th>\n                </tr>\n              </thead>\n              <!--Table body-->\n              <tbody>\n                <tr *ngFor=\"let member of vgUsers; let memberIndex=index\"> <!-- class=\"danger\"> -->\n                  <td>{{memberIndex+1}}</td>\n                  <td>{{member.email}}</td>\n                  <td>{{member.groupName}}</td>\n                  <td *ngIf=\"hasVCPerm(permVC.ManagePerm)\">\n                    <button class=\"Detail\" title=\"Remove User\" (click)='helperRemoveUser(memberIndex)'\n                    data-toggle=\"modal\" data-target=\"#VcUserRemove\">&times;</button>\n                  </td>\n                </tr>\n              </tbody>\n              <!--Table body-->\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div *ngIf=\"showGroups && !showProjectUsers\" >\n        <div >\n          <div class='row'>\n            <div class='col'>\n              <h5 class='panel-heading'>\n                  Visbo Center Groups\n              </h5>\n            </div>\n            <div *ngIf=\"hasVCPerm(permVC.ManagePerm)\" class='col'>\n              <!-- Button trigger modal -->\n              <button type=\"button\" class=\"btn btn-primary float-right\" (click)=\"initGroup(null)\" data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">\n                Add Group\n              </button>\n            </div>\n          </div>\n          <div class='panel-body'>\n            <table class='table table-hover'>\n              <!--Table head-->\n              <thead>\n                <tr>\n                  <th>Nr.</th>\n                  <th (click)=\"sortGroupTable(1)\">Group</th>\n                  <th (click)=\"sortGroupTable(2)\">Members</th>\n                  <th >Flag</th>\n                  <th *ngIf=\"hasVCPerm(permVC.ManagePerm)\">Delete</th>\n                  <th>Info</th>\n                </tr>\n              </thead>\n              <!--Table body-->\n              <tbody>\n                <tr *ngFor=\"let member of vgGroups; let memberIndex=index\">\n                  <td>{{memberIndex+1}}</td>\n                  <td>{{member.name}}</td>\n                  <td>{{member.users.length}}</td>\n                  <td *ngIf=\"member.global\">Global</td>\n                  <td *ngIf=\"!member.global\"></td>\n                  <td *ngIf=\"hasVCPerm(permVC.ManagePerm)\">\n                    <button class=\"Detail\" title=\"Remove Group\" (click)='helperRemoveGroup(memberIndex)'\n                    data-toggle=\"modal\" data-target=\"#VcGroupRemove\">&times;</button>\n                  </td>\n                  <td>\n                    <button class=\"Detail\" title=\"Detail of Group\"\n                     (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VcGroupModalCreate\">i</button>\n                  </td>\n                </tr>\n              </tbody>\n              <!--Table body-->\n            </table>\n          </div>\n        </div>\n      </div>\n\n      <div *ngIf=\"showProjectUsers\" >\n        <div >\n          <div class='row'>\n            <div class='col'>\n              <h5 class='panel-heading'>\n                  Visbo Project Users\n              </h5>\n            </div>\n          </div>\n          <div class='panel-body'>\n            <table class='table table-hover'>\n              <!--Table head-->\n              <thead>\n                <tr>\n                  <th>Nr.</th>\n                  <th (click)=\"sortVPUserTable(1)\">e-mail</th>\n                  <th (click)=\"sortVPUserTable(2)\">Project</th>\n                  <th>Group</th>\n                </tr>\n              </thead>\n              <!--Table body-->\n              <tbody>\n                <tr *ngFor=\"let member of vgVPUsers; let memberIndex=index\" (click)=\"gotoVPDetail(member.vpid)\"> <!-- class=\"danger\"> -->\n                  <td>{{memberIndex+1}}</td>\n                  <td>{{member.users.email}}</td>\n                  <td>{{member.vp.name}}</td>\n                  <td>{{member.groupName}}</td>\n                </tr>\n              </tbody>\n              <!--Table body-->\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button *ngIf=\"hasVCPerm(permVC.Modify)\" (click)=\"save()\" class=\"btn btn-primary mr-1\">save</button>\n    <button class=\"btn btn-secondary mx-1\" (click)=\"goBack()\">go back</button>\n  <!-- </div> -->\n\n  <!-- Modal Add VC User -->\n  <div class=\"modal fade\" id=\"VcUserModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserModalCenterTitle\">Add a new User to the Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"newUserInvite\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"email\" class=\"col-form-label\">Name:</label>\n              <input type=\"email\" class=\"form-control\" name=\"email\" [(ngModel)]=\"newUserInvite.email\" #email=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" autocomplete=\"email\">\n              <div *ngIf=\"f.submitted && !email.valid\" class=\"help-block\">E-mail address is required</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !group.valid }\">\n              <label for=\"group\" class=\"col-form-label\">Group:</label>\n              <select class=\"form-control\" name=\"group\" [(ngModel)]=\"newUserInvite.groupName\" #group=\"ngModel\" required>\n                <option></option>\n                <option *ngFor=\"let groupItem of vgGroups\">{{groupItem.name}}</option>\n              </select>\n              <div *ngIf=\"f.submitted && !group.valid\" class=\"help-block\">Group must be defined</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !inviteMessage.valid }\">\n              <label for=\"inviteMessage\" class=\"col-form-label\">Message:</label>\n              <textarea class=\"form-control\" name=\"inviteMessage\" [(ngModel)]=\"newUserInvite.inviteMessage\" #inviteMessage=\"ngModel\" > </textarea>\n            </div>\n            <div *ngIf=\"f.submitted && !inviteMessage.valid\" class=\"help-block\">Error in Message</div>\n            <div class=\"form-group\">\n              <button *ngIf=\"!(email.valid && group.valid)\" type=\"submit\" class=\"btn btn-primary\" >Invite(insensitive)</button>\n              <button *ngIf=\"email.valid && group.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addNewVCUser()\" data-dismiss=\"modal\">Invite</button>\n              <!-- <button *ngIf=\"f.form.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addNewVCUser()\" data-dismiss=\"modal\">Invite</button> -->\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete User -->\n  <div class=\"modal fade\" id=\"VcUserRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcUserModalRemoveTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"userIndex >= 0 && userIndex < vgUsers.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove User from Visbo Center Group</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this User from the Visbo Center Group? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">User:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].email }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].groupName }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCUser(vgUsers[userIndex], visbocenter._id)\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Add/Change VC Group -->\n  <div class=\"modal fade\" id=\"VcGroupModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" >\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 *ngIf=\"actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Modify a Group in the Visbo Center</h5>\n          <h5 *ngIf=\"!actGroup.gid\" class=\"modal-title\" id=\"VcGroupModalCenterTitle\">Add a new Group to the Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"actGroup\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"groupName\" class=\"col-form-label\">Name:</label>\n              <input *ngIf=\"!actGroup.internal\" type=\"text\" class=\"form-control\" name=\"groupName\" [(ngModel)]=\"actGroup.groupName\" #groupName=\"ngModel\" required>\n              <label *ngIf=\"actGroup.internal\" class=\"col-form-label\">{{actGroup.groupName}}</label>\n              <div *ngIf=\"f.submitted && !actGroup.groupName.valid\" class=\"help-block\">Group Name is required</div>\n            </div>\n            <!-- VC Permissions -->\n            <div>Define Visbo Center Permission</div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm1\" name=\"checkedView\" [(ngModel)]=\"actGroup.checkedView\" #checkedView=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"perm1\">View Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm2\" name=\"checkedViewAudit\" [(ngModel)]=\"actGroup.checkedViewAudit\" #checkedViewAudit=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm2\">View Audit</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm3\" name=\"checkedModify\" [(ngModel)]=\"actGroup.checkedModify\" #checkedModify=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm3\">Modify Visbo Center</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm4\" name=\"checkedCreateVP\" [(ngModel)]=\"actGroup.checkedCreateVP\" #checkedCreateVP=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm4\">Create Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"perm5\" name=\"checkedManagePerm\" [(ngModel)]=\"actGroup.checkedManagePerm\" #checkedManagePerm=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"perm5\">Manage Permissions, Users and Groups</label>\n            </div>\n            <br>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"global\" name=\"checkGlobal\" [(ngModel)]=\"actGroup.checkGlobal\" #checkGlobal=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"global\">Group has Access to all Visbo Projects</label>\n            </div>\n            <div *ngIf=\"actGroup.checkGlobal\" >\n            <!-- VP Permissions -->\n              <div>Define Visbo Project Permission</div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP1\" name=\"checkedVPView\" [(ngModel)]=\"actGroup.checkedVPView\" #checkedVPView=\"ngModel\">\n                  <label class=\"custom-control-label\" for=\"permVP1\">View Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP2\" name=\"checkedVPViewAudit\" [(ngModel)]=\"actGroup.checkedVPViewAudit\" #checkedVPViewAudit=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP2\">View Project Audit</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP3\" name=\"checkedVPModify\" [(ngModel)]=\"actGroup.checkedVPModify\" #checkedVPModify=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP3\">Modify Visbo Project</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP4\" name=\"checkedCreateVariant\" [(ngModel)]=\"actGroup.checkedCreateVariant\" #checkedCreateVariant=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP4\">Create Visbo Project Variant</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP5\" name=\"checkedVPManagePerm\" [(ngModel)]=\"actGroup.checkedVPManagePerm\" #checkedVPManagePerm=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP5\">Manage Permissions, Users and Groups</label>\n              </div>\n              <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP6\" name=\"checkedVPDelete\" [(ngModel)]=\"actGroup.checkedVPDelete\" #checkedVPDelete=\"ngModel\" >\n                  <label class=\"custom-control-label\" for=\"permVP6\">Delete Visbo Project</label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <button *ngIf=\"!(f.form.valid && hasVCPerm(permVC.ManagePerm))\" type=\"submit\" class=\"btn btn-primary disabled\" >{{this.actGroup.confirm}}</button>\n              <button *ngIf=\"(f.form.valid && hasVCPerm(permVC.ManagePerm))\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addModifyVCGroup()\" data-dismiss=\"modal\">{{this.actGroup.confirm}}</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete Group -->\n  <div class=\"modal fade\" id=\"VcGroupRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VcGroupModalRemoveTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"groupIndex >= 0 && groupIndex < vgGroups.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VcUserRemoveTitle\">Remove Group from Visbo Center</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this Group from Visbo Center? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Visbo Center:</label>\n              <label class=\"col-8 form-control-static\">{{ visbocenter.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].name }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Members:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].users.length }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVCGroup(vgGroups[groupIndex])\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenters/visbocenters.component.html":
/*!************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenters/visbocenters.component.html ***!
  \************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <h2 class='panel-heading'>\n    Visbo Centers\n  </h2>\n\n  <div class='panel-body'>\n    <table class='table table-hover table-sortable'>\n      <!--Table head-->\n      <thead>\n        <tr>\n          <th class=\"d-none d-md-table-cell\">Nr.</th>\n          <th (click)=\"sortVCTable(1)\">Name</th>\n          <th class=\"d-none d-sm-table-cell\" (click)=\"sortVCTable(2)\">Modified</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVCTable(3)\"># Projects</th>\n          <th>Detail</th>\n        </tr>\n      </thead>\n      <!--Table body-->\n      <tbody>\n        <tr *ngFor=\"let vc of visbocenters; let vcIndex=index\" (click)=\"gotoClickedRow(vc)\" > <!-- class=\"danger\"> -->\n          <td class=\"d-none d-md-table-cell\">{{vcIndex+1}}</td>\n          <td>{{vc.name}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vc.updatedAt | date :'dd.MM.yyyy HH:mm'}}</td>\n          <td class=\"d-none d-sm-table-cell d-md-none\">{{vc.updatedAt | date :'dd.MM.yy'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vc.vpCount}}</td>\n          <td>\n            <button class=\"Detail\" title=\"Detail of Visbo Center\"\n            (click)=\"gotoDetail(vc)\">i</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboportfolio-versions/visboportfolio-versions.component.html":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboportfolio-versions/visboportfolio-versions.component.html ***!
  \**********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 *ngIf=\"!vpActive\">\n        Portfolio Project List\n      </h2>\n      <h2 *ngIf=\"vpActive\">\n        Portfolio Project List for: <a (click)=\"gotoVPDetail(vpActive)\">{{vpActive.name}}</a>\n      </h2>\n      <h5 *ngIf=\"vpActive\">Visbo Center:\n        <a (click)=\"gotoVC(vpActive)\">{{ vpActive.vc.name }}</a>\n      </h5>\n    </div>\n  </div>\n  <div  *ngIf=\"vpfActiveIndex\" class='row'>\n    <label class=\"col-2 my-2\">Portfolio Version:</label>\n    <select class=\"col-4 form-control\" id=\"dropDownSelected\" name=\"dropDownSelected\" [(ngModel)]=\"dropDownSelected\" (change)=\"changePFVersion();\">\n      <option *ngFor=\"let item of dropDown\">{{item.name}}</option>\n    </select>\n    <div  *ngIf=\"vpfActive.variantName\" class='row'>\n      <label class=\"col-3\">Variant:</label>\n      <label class=\"col-3\">{{vpfActive.variantName}}</label>\n    </div>\n  </div>\n  <hr>\n\n  <div class='container-fluid'>\n    <div class=\"row\">\n      <h3 class=\"col-6 px-0\">\n        <div class=\"d-none d-lg-block\">Project Key Metrics from {{vpvRefDate | date: 'dd.MM.yyyy'}}</div>\n        <div class=\"d-block d-lg-none\">Metrics: {{vpvRefDate | date: 'dd.MM'}}</div>\n      </h3>\n      <div class=\"col-4\">\n        <div class=\"row\">\n          <span style=\"font-size: 2em\" class=\"mx-1 fas fa-caret-square-left\" title=\"Previous Period\" (click)='getRefDateVersions(-1)'></span>\n          <select class=\"col-4 form-control d-none d-md-block\" name=\"refDateInterval\" [(ngModel)]=\"refDateInterval\">\n            <option>day</option>\n            <option>week</option>\n            <option>month</option>\n            <option>quarter</option>\n          </select>\n          <span style=\"font-size: 2em\" class=\"mx-1 fas fa-caret-square-right\" title=\"Next Period\" (click)='getRefDateVersions(1)'></span>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <form name=\"form\" (ngSubmit)=\"showTempList(false)\">\n        <div class=\"form-group row\">\n          <label for=\"Filter\" class=\"col-6 col-form-label\">Filter Projects:</label>\n          <div class=\"col-6\">\n            <input class=\"form-control\"  (keyup)=\"showTempList(true); visboKeyMetricsCalc()\" id=\"Filter\" name=\"vpFilter\" [(ngModel)]=\"vpFilter\">\n          </div>\n        </div>\n      </form>\n    </div>\n    <div class=\"row\">\n      <div class=\"my-1\">\n        <span class=\"font-weight-bold\"><a data-toggle=\"modal\" (click)= \"drawChart(false)\" data-target=\"#VpfMetricSelector\">{{typeMetricX}}</a></span>\n        <span> against </span>\n        <span class=\"font-weight-bold\"><a data-toggle=\"modal\" (click)= \"drawChart(false)\" data-target=\"#VpfMetricSelector\">{{typeMetricY}}</a></span>\n      </div>\n      <div class=\"mx-2\">\n        <button *ngIf= \"showChart\" type=\"button\" class=\"btn btn-sm btn-primary ml-2\" data-toggle=\"modal\" (click)= \"drawChart(false)\" data-target=\"#VpfMetricSelector\">Change</button>\n        <button *ngIf= \"!showChart\" type=\"button\" class=\"btn btn-sm btn-primary ml-2\" (click)= \"drawChart(true)\">Show Chart</button>\n      </div>\n      <div *ngIf=\"hasVPPerm(permVP.ViewAudit)\">\n          <button type=\"button\" class=\"btn btn-sm btn-secondary ml-auto\" (click)=\"showChartOption(undefined)\">{{chartButton}}</button>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"visbokeymetrics.length > 0\">\n    <div *ngIf=\"hasVPPerm(permVP.ViewAudit) && chart && showChart\" class='container-fluid'>\n      <div *ngIf=\"graphBubbleData && graphBubbleData.length\">\n        <app-bubble-chart [graphData]=\"graphBubbleData\" [graphOptions]=\"graphBubbleOptions\" [parentThis]=\"parentThis\"></app-bubble-chart>\n      </div>\n    </div>\n\n    <div *ngIf=\"chart==false\" class='container-fluid'>\n      <div class='panel-body'>\n        <table *ngIf=\"hasVPPerm(permVP.ViewAudit)\" class='table table-hover table-sortable'>\n          <thead>\n            <tr>\n              <th (click)=\"sortKeyMetricsTable(1)\">Project</th>\n              <th *ngIf=\"selectedMetric('Costs')\" class=\"text-right\" (click)=\"sortKeyMetricsTable(2)\">Change Total Cost</th>\n              <th *ngIf=\"selectedMetric('Costs')\" class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(3)\">Total Cost (Base Line)</th>\n              <th *ngIf=\"selectedMetric('EndDate')\" class=\"text-right\" (click)=\"sortKeyMetricsTable(4)\">Change End Date</th>\n              <th *ngIf=\"selectedMetric('EndDate')\" class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(5)\">End Date (Base Line)</th>\n              <th *ngIf=\"selectedMetric('Deadlines')\" class=\"text-right\" (click)=\"sortKeyMetricsTable(6)\">Achieved Deadlines</th>\n              <th *ngIf=\"selectedMetric('Deadlines')\" class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(7)\">Deadlines (Base Line)</th>\n              <th *ngIf=\"selectedMetric('Deliveries')\" class=\"text-right\" (click)=\"sortKeyMetricsTable(8)\">Achieved Deliveries</th>\n              <th *ngIf=\"selectedMetric('Deliveries')\" class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(9)\">Deliveries (Base Line)</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='gotoClickedRow(vp)'\n            data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n              <td>{{vp.name }}</td>\n              <td *ngIf=\"selectedMetric('Costs')\" class=\"text-right\">{{vp.savingCostTotal*100 | number:'1.0-0'}} %</td>\n              <td *ngIf=\"selectedMetric('Costs')\" class=\"text-right\">{{vp.keyMetrics.costBaseLastTotal | number:'1.0-0'}} kâ¬</td>\n              <td *ngIf=\"selectedMetric('EndDate')\" class=\"text-right\">{{vp.savingEndDate | number:'1.0-0' }} weeks</td>\n              <td *ngIf=\"selectedMetric('EndDate')\" class=\"text-right\">{{vp.keyMetrics.endDateBaseLast | date :'dd.MM.yyyy'}}</td>\n              <td *ngIf=\"selectedMetric('Deadlines')\" class=\"text-right\">{{vp.timeCompletionActual*100 | number:'1.0-0'}} %</td>\n              <td *ngIf=\"selectedMetric('Deadlines')\" class=\"text-right\">{{vp.keyMetrics.timeCompletionBaseLastActual | number:'1.0-0'}}</td>\n              <td *ngIf=\"selectedMetric('Deliveries')\" class=\"text-right\">{{vp.deliveryCompletionActual*100 | number:'1.0-0'}} %</td>\n              <td *ngIf=\"selectedMetric('Deliveries')\" class=\"text-right\">{{vp.keyMetrics.deliverableCompletionBaseLastActual | number:'1.0-0'}}</td>\n            </tr>\n          </tbody>\n        </table>\n        <table *ngIf=\"!hasVPPerm(permVP.ViewAudit)\" class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortKeyMetricsTable(1)\">Project</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(7)\">Timestamp</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='gotoClickedRow(vp)'\n            data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n              <td>{{vp.name }}</td>\n              <td class=\"text-right\">{{vp.timestamp  | date :'dd.MM.yyyy'}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"visbokeymetrics.length == 0\">\n    <h3 class=\"d-flex justify-content-center\">\n      No Project Versions related to this Date\n    </h3>\n  </div>\n</div>\n\n<!-- Modal Change Key metrics -->\n<div class=\"modal fade\" id=\"VpfMetricSelector\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpfMetricSelectorTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VpfMetricSelectorTitle\">Change Key Metrics</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form #f=\"ngForm\" novalidate>\n          <div class=\"form-group\">\n            <label for=\"typeMetricX\" class=\"col-form-label\">X-Axis:</label>\n            <select class=\"form-control\" id=\"typeMetricX\" name=\"typeMetricX\" [(ngModel)]=\"typeMetricX\">\n              <option *ngFor=\"let metricItem of typeMetricList\">{{metricItem.name}}</option>\n            </select>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"typeMetricY\" class=\"col-form-label\">Y-Axis:</label>\n            <select class=\"form-control\" id=\"typeMetricY\" name=\"typeMetricY\" [(ngModel)]=\"typeMetricY\">\n              <option *ngFor=\"let metricItem of typeMetricList\">{{metricItem.name}}</option>\n            </select>\n          </div>\n          <div class=\"form-group\">\n            <button type=\"submit\" class=\"btn btn-primary\" (click)=\"changeChart()\" data-dismiss=\"modal\">Change</button>\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"changeChart()\" data-dismiss=\"modal\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-audit/visboproject-audit.component.html":
/*!************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-audit/visboproject-audit.component.html ***!
  \************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<div *ngIf=\"!sysadmin\">\n  <visbo-navbar></visbo-navbar>\n</div>\n<div *ngIf=\"sysadmin\">\n  <sysvisbo-navbar></sysvisbo-navbar>\n</div>\n<div class='well'>\n  <div class='row'>\n    <h2 *ngIf=\"!visboproject\" class='panel-heading ml-0'>\n      Visbo Project Audit\n    </h2>\n    <h2 *ngIf=\"visboproject\" class='panel-heading ml-0'>\n      Visbo Project Audit for: <a (click)=\"goBack()\">{{visboproject.name}}</a>\n    </h2>\n  </div>\n  <form name=\"form\" (ngSubmit)=\"getVisboProjectAudits()\" #f=\"ngForm\" novalidate>\n    <div *ngIf=\"sysadmin\" class=\"form-group row\">\n      <label for=\"auditFrom\" class=\"col-1 col-form-label\">From:</label>\n      <input id=\"auditFrom\" type=\"datetime-local\" class=\"col-2 col-sm-4 form-control\" name=\"auditFrom\" [(ngModel)]=\"auditFrom\">\n      <label for=\"auditTo\" class=\"col-1 col-form-label\">To:</label>\n      <input id=\"auditTo\" type=\"datetime-local\" class=\"col-2 col-sm-4 form-control\" name=\"auditTo\" [(ngModel)]=\"auditTo\" >\n    </div>\n    <div *ngIf=\"!sysadmin\" class=\"form-group row\">\n      <label for=\"auditFrom\" class=\"col-1 col-form-label\">From:</label>\n      <input id=\"auditFrom\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditFrom\" [(ngModel)]=\"auditFrom\">\n      <label for=\"auditTo\" class=\"col-1 col-form-label\">To:</label>\n      <input id=\"auditTo\" type=\"date\" class=\"col-2 col-sm-4 form-control\" name=\"auditTo\" [(ngModel)]=\"auditTo\" >\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"auditText\" class=\"col-1 col-form-label\">Filter:</label>\n      <input id=\"auditText\" type=\"text\" class=\"col-2 col-sm-3 form-control\" name=\"auditText\" [(ngModel)]=\"auditText\" >\n\n      <label for=\"auditCount\" class=\"col-1 col-form-label\">Max:</label>\n      <select class=\"col-1 form-control mx-1\" name=\"auditCount\" [(ngModel)]=\"auditCount\">\n        <option>50</option>\n        <option>100</option>\n        <option>500</option>\n        <option>2000</option>\n      </select>\n      <select class=\"col-1 form-control mx-1\" id=\"auditType\" name=\"auditType\" [(ngModel)]=\"auditType\">\n        <option *ngFor=\"let actionItem of auditTypeList\">{{actionItem.name}}</option>\n      </select>\n      <div class='btn-group '>\n        <button type=\"button\" class=\"btn btn-sm btn-primary ml-auto mx-1\" (click)=\"getVisboProjectAudits()\">Filter</button>\n        <button type=\"button\" class=\"btn btn-sm btn-secondary ml-auto mx-1\" (click)=\"downloadVisboAudit()\">Download</button>\n      </div>\n    </div>\n  </form>\n  <div class='container-fluid'>\n    <div class='panel-body'>\n      <table class='table table-hover table-sortable'>\n        <!--Table head-->\n        <thead>\n          <tr>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(1)\">Created</th>\n            <th (click)=\"sortTable(2)\">User</th>\n            <th (click)=\"sortTable(3)\"> Action</th>\n            <th class=\"d-none d-md-table-cell\" (click)=\"sortTable(4)\"> Info</th>\n            <th class=\"d-none d-lg-table-cell\" (click)=\"sortTable(5)\"> Result</th>\n            <th>Detail</th>\n          </tr>\n        </thead>\n        <!--Table body-->\n        <tbody>\n          <tr *ngFor=\"let auditentry of audit; let auditIndex=index\" (click)='helperAuditIndex(auditIndex)'\n          data-toggle=\"modal\" data-target=\"#AuditDetail\">\n          <td  *ngIf=\"isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'HH:mm:ss'}}</td>\n          <td  *ngIf=\"!isToday(auditentry.createdAt)\" class=\"d-none d-md-table-cell\">{{auditentry.createdAt | date :'dd.MM HH:mm'}}</td>\n            <td *ngIf=\"auditentry.user\" >{{auditentry.user.email }}</td>\n            <td *ngIf=\"!auditentry.user\"> Unknown </td>\n            <td>{{auditentry.actionDescription }}</td>\n            <td class=\"d-none d-md-table-cell\" >{{helperShortenText(auditentry.actionInfo, 30) }}</td>\n            <td class=\"d-none d-lg-table-cell\" >{{helperResponseText(auditentry) }}</td>\n            <td>\n              <button class=\"Detail\" title=\"Detail of Visbo Audit\" (click)='helperAuditIndex(auditIndex)'\n              data-toggle=\"modal\" data-target=\"#AuditDetail\">i</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"AuditDetail\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Audit Detail\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\" *ngIf=\"auditIndex >= 0 && auditIndex < audit.length\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"AuditDetailTitle\">Detail of Audit Entry</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-11\">\n            <h3 title=\"Previous Entry\" (click)='pageAuditIndex(-1)'><a class=\"px-3 col-1 fas fa-caret-square-left\"></a></h3>\n          </div>\n          <div class=\"col-1\">\n            <h3 title=\"Next Entry\" (click)='pageAuditIndex(1)'><a class=\"px-3 col-1 fas fa-caret-square-right\"></a></h3>\n          </div>\n        </div>\n        <form>\n          <label class=\"py-0 m-0 col-4 form-control-static\">Created:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].createdAt | date :'dd.MM.yyyy HH:mm:ss.SSS' }} </label>\n          <label class=\"py-0 m-0 col-4 form-control-static\">User:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].user.email }} </label>\n          <label class=\"py-0 m-0 col-4 form-control-static\">Action:</label>\n          <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].actionDescription }} </label>\n          <div *ngIf=\"audit[auditIndex].actionInfo\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Info:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].actionInfo }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vc\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Center:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vc.name }} </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vp\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Visbo Project:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vp.name }} ({{ audit[auditIndex].vp.vpid }}) </label>\n          </div>\n          <div *ngIf=\"audit[auditIndex].vpv\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Project Version:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].vpv.name }} ({{ audit[auditIndex].vpv.vpvid }})</label>\n          </div>\n          <div>\n            <label class=\"py-0 m-0 col-4 form-control-static\">Result:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{helperResponseText(audit[auditIndex]) }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">tech. Action:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].action }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">URL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\" style=\"overflow-wrap: break-word;\">{{ audit[auditIndex].url }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Time:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].result.time }} ms </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">Response Size:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ helperFormatBytes(audit[auditIndex].result.size || 0, 2) }} </label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">User Agent:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].userAgent }}</label>\n          </div>\n          <div *ngIf=\"showMore\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">IP:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ip }}</label>\n          </div>\n          <div *ngIf=\"showMore && audit[auditIndex].ttl\">\n            <label class=\"py-0 m-0 col-4 form-control-static\">TTL:</label>\n            <label class=\"py-0 m-0 col-7 form-control-static\">{{ audit[auditIndex].ttl | date :'dd.MM HH:mm' }}</label>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button *ngIf=\"!showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">More</button>\n        <button *ngIf=\"showMore\" type=\"button\" class=\"btn btn-secondary\" (click)=\"toggleDetail()\">Less</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-detail/visboproject-detail.component.html":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-detail/visboproject-detail.component.html ***!
  \**************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div *ngIf=\"visboproject\">\n  <h3>Project: <a (click)=\"gotoVPList(visboproject)\">{{ visboproject.name | uppercase }}</a></h3>\n  <h5>Visbo Center:\n    <a (click)=\"gotoVCDetail(visboproject)\">{{ visboproject.vc.name }}</a>\n  </h5>\n  <form>\n    <div class=\"form-group row\">\n      <label for=\"vpName\" class=\"col-3 col-md-2 col-form-label\">Name:</label>\n      <input *ngIf=\"hasVPPerm(permVP.Modify)\" type=\"text\" name=vpName class=\"col-sm-8 form-control\" [(ngModel)]=\"visboproject.name\" placeholder=\"Name\">\n      <label *ngIf=\"!hasVPPerm(permVP.Modify)\" class=\"col-8 form-control-static\">{{ visboproject.name }} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"vpDescription\" class=\"col-3 col-md-2 col-form-label\">Description:</label>\n      <textarea *ngIf=\"hasVPPerm(permVP.Modify)\" name=vpDescription class=\"col-8 form-control\" [(ngModel)]=\"visboproject.description\" placeholder=\"Type in your description\"></textarea>\n      <label *ngIf=\"!hasVPPerm(permVP.Modify)\" class=\"col-8 form-control-static\">{{ visboproject.description }} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"vpType\" class=\"col-3 col-md-2 col-form-label\">Type:</label>\n      <label name=vpType class=\"col form-control-static col-form-label\">{{ getVPType(visboproject.vpType) }} </label>\n    </div>\n    <div class=\"form-group row d-none d-md-block\">\n      <label for=\"Created\" class=\"col-3 col-md-2 col-form-label\">Created / Updated at:</label>\n      <label class=\"col-4 form-control-static col-form-label\">{{ visboproject.createdAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n      <label class=\"col-4 form-control-static col-form-label\">{{ visboproject.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n    </div>\n  </form>\n  <div *ngIf=\"getVPPerm() != permVP.View\">\n    <div class=\"btn-toolbar\" style=\"\">\n      <button *ngIf=\"hasVPPerm(permVP.ViewAudit)\" type=\"button\" class=\"btn btn-md btn-light mr-1\" (click)=\"gotoVPAudit(visboproject)\">View Audit</button>\n      <button *ngIf=\"!showGroups\" type=\"button\" class=\"btn btn-md btn-light mr-1\" (click)=\"toggleUserGroup()\">Show Groups</button>\n      <button *ngIf=\"showGroups\" type=\"button\" class=\"btn btn-md btn-light mr-1\" (click)=\"toggleUserGroup()\">Show Users</button>\n    </div>\n\n    <div *ngIf=\"!showGroups\" >\n      <div >\n        <div class='row'>\n          <div class='col'>\n            <h5 class='panel-heading'>\n                Visbo Project Users\n            </h5>\n          </div>\n          <div *ngIf=\"hasVPPerm(permVP.ManagePerm)\" class='col'>\n            <!-- Button trigger modal -->\n            <button type=\"button\" class=\"my-1 btn btn-primary float-right\" data-toggle=\"modal\" data-target=\"#VpUserModalCreate\">Add User</button>\n          </div>\n        </div>\n        <div class='panel-body'>\n          <table class='table table-hover'>\n            <!--Table head-->\n            <thead>\n              <tr>\n                <th>Nr.</th>\n                <th (click)=\"sortUserTable(1)\">e-mail</th>\n                <th (click)=\"sortUserTable(2)\">Group</th>\n                <th class=\"d-none d-md-table-cell\">Type</th>\n                <th *ngIf=\"!deleted && hasVPPerm(permVP.ManagePerm)\">Delete</th>\n              </tr>\n            </thead>\n            <!--Table body-->\n            <tbody>\n              <tr *ngFor=\"let member of vgUsers; let memberIndex=index\"> <!-- class=\"danger\"> -->\n                <td>{{memberIndex+1}}</td>\n                <td>{{member.email}}</td>\n                <td>{{member.groupName}}</td>\n                <td class=\"d-none d-md-table-cell\">{{member.groupType == 'VP' ? '' : 'Global'}}</td>\n                <td *ngIf=\"!deleted && hasVPPerm(permVP.ManagePerm) && member.groupType == 'VP'\">\n                  <button class=\"btn btn-sm\" title=\"Remove User\" (click)='helperRemoveUser(memberIndex)'\n                  data-toggle=\"modal\" data-target=\"#VpUserRemove\">&times;</button>\n                </td>\n                <td *ngIf=\"!(!deleted && hasVPPerm(permVP.ManagePerm) && member.groupType == 'VP')\">\n                </td>\n              </tr>\n            </tbody>\n            <!--Table body-->\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <div *ngIf=\"showGroups\" >\n      <div>\n        <div class='row'>\n          <div class='col'>\n            <h5 class='panel-heading'>\n                Visbo Project Groups\n            </h5>\n          </div>\n          <div *ngIf=\"hasVPPerm(permVP.ManagePerm)\" class='col'>\n            <!-- Button trigger modal -->\n            <button type=\"button\" class=\"btn btn-primary float-right\" (click)=\"initGroup(null)\" data-toggle=\"modal\" data-target=\"#VpGroupModalCreate\">\n              Add Group\n            </button>\n          </div>\n        </div>\n        <div class='panel-body'>\n          <table class='table table-hover'>\n            <!--Table head-->\n            <thead>\n              <tr>\n                <th>Nr.</th>\n                <th (click)=\"sortGroupTable(1)\">Group</th>\n                <th (click)=\"sortGroupTable(2)\">Members</th>\n                <th class=\"d-none d-md-table-cell\">Flag</th>\n                <th *ngIf=\"!deleted && hasVPPerm(permVP.ManagePerm)\">Delete</th>\n                <th>Info</th>\n              </tr>\n            </thead>\n            <!--Table body-->\n            <tbody>\n              <tr *ngFor=\"let member of vgGroups; let memberIndex=index\">\n                <td>{{memberIndex+1}}</td>\n                <td (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VpGroupModalCreate\">{{member.name}}</td>\n                <td>{{member.users.length}}</td>\n                <td *ngIf=\"member.global\" class=\"d-none d-md-table-cell\">Global</td>\n                <td *ngIf=\"!member.global\" class=\"d-none d-md-table-cell\"></td>\n                <td *ngIf=\"!deleted && hasVPPerm(permVP.ManagePerm) && member.groupType == 'VP' && member.internal == false\">\n                  <button class=\"btn btn-sm\" title=\"Remove Group\" (click)='helperRemoveGroup(memberIndex)'\n                  data-toggle=\"modal\" data-target=\"#VpGroupRemove\">&times;</button>\n                </td>\n                <td *ngIf=\"!(!deleted && hasVPPerm(permVP.ManagePerm) && member.groupType == 'VP' && member.internal == false)\">\n                </td>\n                <td>\n                  <button class=\"Detail\" title=\"Detail of Group\"\n                   (click)='initGroup(member)' data-toggle=\"modal\" data-target=\"#VpGroupModalCreate\">i</button>\n                </td>\n              </tr>\n            </tbody>\n            <!--Table body-->\n          </table>\n        </div>\n      </div>\n    </div>\n\n    <!-- Show Locks -->\n    <div *ngIf=\"visboproject.lock.length >0\">\n      <div class='row'>\n        <div class='col'>\n          <h5 class='panel-heading'>\n              Visbo Project Locks\n          </h5>\n        </div>\n      </div>\n      <div class='panel-body'>\n        <table class='table table-hover'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>User</th>\n              <th>Expires</th>\n              <th>Variant</th>\n              <th>Delete</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let lock of visboproject.lock; let lockIndex=index\">\n              <td>{{visboproject.lock[lockIndex].email}}</td>\n              <td>{{visboproject.lock[lockIndex].expiresAt | date :'dd.MM HH:mm'}}</td>\n              <td>{{visboproject.lock[lockIndex].variantName}}</td>\n              <td *ngIf=\"!deleted && hasVPPerm(permVP.Modify)\">\n                <button class=\"btn btn-sm\" title=\"Unlock\" (click)='unlockVP(lockIndex)'\n                data-toggle=\"modal\" data-target=\"#VpUnlock\">&times;</button>\n              </td>\n            </tr>\n          </tbody>\n          <!--Table body-->\n        </table>\n      </div>\n    </div>\n  </div>\n  <div>\n    <button *ngIf=\"!deleted && hasVPPerm(permVP.Modify)\" (click)=\"save()\" class=\"btn btn-primary mr-1\">save</button>\n    <button *ngIf=\"deleted && hasVPPerm(permVP.DeleteVP)\" (click)=\"save()\" class=\"btn btn-primary mx-1\">Restore</button>\n    <button (click)=\"goBack()\">go back</button>\n    <button *ngIf=\"!deleted && hasVPPerm(permVP.DeleteVP)\" class=\"btn bg-warning mx-1\" style=\"float: right\" title=\"Delete Visbo Project\" data-toggle=\"modal\" data-target=\"#VpDelete\">Delete!</button>\n    <button *ngIf=\"deleted && hasVPPerm(permVP.DeleteVP)\" class=\"btn bg-danger text-white mx-1\" style=\"float: right\" title=\"Destroy Visbo Project\" data-toggle=\"modal\" data-target=\"#VpDelete\">Destroy!</button>\n  </div>\n\n  <!-- Modal Add VP User -->\n  <div class=\"modal fade\" id=\"VpUserModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpUserModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VpUserModalCenterTitle\">Add a new User to the Project</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"newUserInvite\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"email\" class=\"col-form-label\">Name:</label>\n              <input type=\"email\" class=\"form-control\" name=\"email\" [(ngModel)]=\"newUserInvite.email\" #email=\"ngModel\" required pattern=\"[^@\\s]+@[^@\\s]+\\.[^@\\s]+\" autocomplete=\"email\">\n              <div *ngIf=\"f.submitted && !email.valid\" class=\"help-block\">E-Mail address is required</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !group.valid }\">\n              <label for=\"group\" class=\"col-form-label\">Group:</label>\n              <select class=\"form-control\" name=\"group\" [(ngModel)]=\"newUserInvite.groupName\" #group=\"ngModel\" required>\n                <option></option>\n                <option *ngFor=\"let groupItem of vgGroupsInvite\">{{groupItem.name}}</option>\n              </select>\n              <div *ngIf=\"f.submitted && !group.valid\" class=\"help-block\">Group must be defined</div>\n            </div>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !inviteMessage.valid }\">\n              <label for=\"inviteMessage\" class=\"col-form-label\">Message:</label>\n              <textarea class=\"form-control\" name=\"inviteMessage\" [(ngModel)]=\"newUserInvite.inviteMessage\" #inviteMessage=\"ngModel\" > </textarea>\n            </div>\n            <div *ngIf=\"f.submitted && !inviteMessage.valid\" class=\"help-block\">Error in Message</div>\n            <div class=\"form-group\">\n              <button *ngIf=\"!(email.valid && group.valid)\" type=\"submit\" class=\"btn btn-primary\" >Invite</button>\n              <button *ngIf=\"email.valid && group.valid\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addNewVPUser()\" data-dismiss=\"modal\">Invite</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete User -->\n  <div class=\"modal fade\" id=\"VpUserRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Remove User\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"userIndex >= 0 && userIndex < vgUsers.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VpUserRemoveTitle\">Remove User from Project Group</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this User from the Project Group? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VpName\" class=\"col-form-label\">Project:</label>\n              <label class=\"col-8 form-control-static\">{{ visboproject.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">User:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].email }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgUsers[userIndex].groupName }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVPUser(vgUsers[userIndex], visboproject._id)\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Add/Change VP Group -->\n  <div class=\"modal fade\" id=\"VpGroupModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpGroupModalCreateTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" >\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 *ngIf=\"actGroup.confirm == 'Modify'\" class=\"modal-title\" id=\"VpGroupModalCenterTitle\">Modify a Group in the Visbo Project</h5>\n          <h5 *ngIf=\"actGroup.confirm == 'View'\" class=\"modal-title\" id=\"VpGroupModalCenterTitle\">View a Group in the Visbo Project</h5>\n          <h5 *ngIf=\"!actGroup.gid\" class=\"modal-title\" id=\"VpGroupModalCenterTitle\">Add a new Group to the Visbo Project</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <form name=\"actGroup\" #f=\"ngForm\" novalidate>\n            <div class=\"form-group\" [ngClass]=\"{ 'has-error': f.submitted && !email.valid }\">\n              <label for=\"groupName\" class=\"col-form-label\">Name:</label>\n              <input *ngIf=\"!actGroup.internal\" type=\"text\" class=\"form-control\" name=\"groupName\" [(ngModel)]=\"actGroup.groupName\" #groupName=\"ngModel\" required>\n              <label *ngIf=\"actGroup.internal\" class=\"col-form-label\">{{actGroup.groupName}}</label>\n              <div *ngIf=\"f.submitted && !actGroup.groupName.valid\" class=\"help-block\">Group Name is required</div>\n            </div>\n            <!-- VP Permissions -->\n            <div>Define Visbo Project Permission</div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP1\" name=\"checkedVPView\" [(ngModel)]=\"actGroup.checkedVPView\" #checkedVPView=\"ngModel\">\n                <label class=\"custom-control-label\" for=\"permVP1\">View Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP2\" name=\"checkedVPViewAudit\" [(ngModel)]=\"actGroup.checkedVPViewAudit\" #checkedVPViewAudit=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP2\">View Project Audit</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP3\" name=\"checkedVPModify\" [(ngModel)]=\"actGroup.checkedVPModify\" #checkedVPModify=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP3\">Modify Visbo Project</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP4\" name=\"checkedCreateVariant\" [(ngModel)]=\"actGroup.checkedCreateVariant\" #checkedCreateVariant=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP4\">Create Visbo Project Variant</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP5\" name=\"checkedVPManagePerm\" [(ngModel)]=\"actGroup.checkedVPManagePerm\" #checkedVPManagePerm=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP5\">Manage Permissions, Users and Groups</label>\n            </div>\n            <div class=\"custom-control custom-checkbox\">\n                <input type=\"checkbox\" class=\"custom-control-input\" id=\"permVP6\" name=\"checkedVPDelete\" [(ngModel)]=\"actGroup.checkedVPDelete\" #checkedVPDelete=\"ngModel\" >\n                <label class=\"custom-control-label\" for=\"permVP6\">Delete Visbo Project</label>\n            </div>\n\n            <div class=\"form-group\">\n              <button *ngIf=\"!(f.form.valid && !deleted && hasVPPerm(permVP.ManagePerm))\" type=\"submit\" class=\"btn btn-primary disabled\" >{{this.actGroup.confirm}}</button>\n              <button *ngIf=\"(f.form.valid && !deleted && hasVPPerm(permVP.ManagePerm))\" type=\"submit\" class=\"btn btn-primary\" (click)=\"addModifyVPGroup()\" data-dismiss=\"modal\">{{this.actGroup.confirm}}</button>\n              <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancel</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <!-- Modal Delete Group -->\n  <div class=\"modal fade\" id=\"VpGroupRemove\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpGroupModalRemoveTitle\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\" *ngIf=\"groupIndex >= 0 && groupIndex < vgGroups.length\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VpUserRemoveTitle\">Remove Group from Visbo Project</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label class=\"bg-warning\">Do you really want to remove this Group from Visbo Project? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VcName\" class=\"col-form-label\">Visbo Project:</label>\n              <label class=\"col-8 form-control-static\">{{ visboproject.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Group:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].name }}</label>\n            </div>\n            <div class=\"form-group\">\n              <label class=\"col-form-label\">Members:</label>\n              <label class=\"col-8 form-control-static\">{{ vgGroups[groupIndex].users.length }}</label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-warning\" (click)=\"removeVPGroup(vgGroups[groupIndex], visboproject._id)\" data-dismiss=\"modal\">Remove</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Modal Delete VP -->\n  <div class=\"modal fade\" id=\"VpDelete\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Delete Project\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VpDeleteTitle\">Delete this Project</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label *ngIf=\"!deleted\" class=\"bg-warning\">Do you really want to delete this Project? </label>\n            <label *ngIf=\"deleted\" class=\"bg-danger text-white\">Do you really want to destroy this Project? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VpName\" class=\"col-form-label\">Name:</label>\n              <label class=\"col-8 form-control-static\">{{ visboproject.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"VpDescription\" class=\"col-form-label\">Description:</label>\n              <label class=\"col-8 form-control-static\">{{ visboproject.description }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"VpVersions\" class=\"col-form-label\">Versions:</label>\n              <label class=\"col-8 form-control-static\">{{ visboproject.vpvCount }} </label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button *ngIf=\"!deleted\" type=\"button\" class=\"btn btn-warning text-white\" (click)=\"delete(visboproject)\" data-dismiss=\"modal\">Delete</button>\n          <button *ngIf=\"deleted\" type=\"button\" class=\"btn btn-danger text-white\" (click)=\"delete(visboproject)\" data-dismiss=\"modal\">Destroy</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-keymetrics/visboproject-keymetrics.component.html":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-keymetrics/visboproject-keymetrics.component.html ***!
  \**********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 *ngIf=\"!vpActive\">\n        Project Key Metrics\n      </h2>\n      <h2 *ngIf=\"vpActive\">\n        Key Metrics for: <a (click)=\"gotoVPDetail(vpActive)\">{{vpActive.name}}</a>\n      </h2>\n      <h5 *ngIf=\"vpActive\">Visbo Center:\n        <a (click)=\"gotoVC(vpActive)\">{{ vpActive.vc.name }}</a>\n      </h5>\n    </div>\n  </div>\n  <div *ngIf=\"hasVPPerm(permVP.ViewAudit) && vpvKeyMetricActive\">\n    <form>\n      <div class=\"container\">\n        <div class=\"row\">\n          <label for=\"vpName\" class=\"col-3 col-md-2\">Status of:</label>\n          <dt class=\"col-8\">{{ vpvKeyMetricActive.timestamp | date :'dd.MM.yyyy hh:mm'}} </dt>\n        </div>\n        <table *ngIf=\"hasVPPerm(permVP.ViewAudit) && vpvKeyMetricActive\" class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th>Key Metric</th>\n              <th>Actual</th>\n              <th>Total</th>\n              <th class=\"d-none d-md-table-cell\">Ahead/Delay</th>\n              <th>Detail</th>\n              <th class=\"d-none d-md-table-cell\">Trend</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr>\n              <td (click)=\"switchTo('Costs')\">Cost Achievement</td>\n              <td title=\"Actual Cost Achievement\" (click)=\"switchTo('Costs')\">\n                <span *ngIf=\"qualityCost == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"qualityCost == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"qualityCost == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> {{100 - vpvKeyMetricActive.savingCostActual | number:'1.0-0'}} % </span>\n              </td>\n              <td title=\"Total Cost Achievement\" (click)=\"switchTo('Costs')\">\n                <span *ngIf=\"qualityTotalCost == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"qualityTotalCost == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"qualityTotalCost == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> {{100 - vpvKeyMetricActive.savingCostTotal | number:'1.0-0'}} % </span>\n              </td>\n              <td class=\"d-none d-md-table-cell\"></td>\n              <td>\n                <button class=\"Detail\" title=\"View Monthly Cost\"\n                (click)=\"gotoViewCost()\">View</button>\n              </td>\n              <td>\n                <button class=\"Detail\" title=\"Trend of Cost Metrics\"\n                (click)=\"switchTo('Costs')\">i</button>\n              </td>\n            </tr>\n            <tr (click)=\"switchTo('Deliveries')\">\n              <td>Delivery Achievement</td>\n              <td title=\"Actual Delivery Achievement\">\n                <span *ngIf=\"qualityDelivery == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"qualityDelivery == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"qualityDelivery == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> {{vpvKeyMetricActive.deliveryCompletionActual | number:'1.0-0'}} % </span>\n              </td>\n              <td>\n                <span>{{vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal | number:'1.0-0'}} </span>\n                <span *ngIf=\"vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal < vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastTotal\" class=\"text-danger\">({{vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastTotal - vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal}} Missing)</span>\n                <span *ngIf=\"vpvKeyMetricActive.keyMetrics.deliverableCompletionCurrentTotal == vpvKeyMetricActive.keyMetrics.deliverableCompletionBaseLastTotal\" >(in Plan)</span>\n              </td>\n              <td class=\"d-none d-md-table-cell\" title=\"Status Actual Deliveries in Time\">\n                <span *ngIf=\"delayActualDelivery == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"delayActualDelivery == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"delayActualDelivery == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> / </span>\n                <span *ngIf=\"delayTotalDelivery == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"delayTotalDelivery == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"delayTotalDelivery == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> Delay</span>\n              </td>\n              <td>\n              </td>\n              <td>\n                <button class=\"Detail\" title=\"Trend of Cost Metrics\"\n                (click)=\"switchTo('Deliveries')\">i</button>\n              </td>\n            </tr>\n            <tr>\n              <td (click)=\"switchTo('Deadlines')\">Deadline Achievement</td>\n              <td (click)=\"switchTo('Deadlines')\" title=\"Actual Deadline Achievement\">\n                <span *ngIf=\"qualityDeadlines == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"qualityDeadlines == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"qualityDeadlines == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> {{vpvKeyMetricActive.timeCompletionActual | number:'1.0-0'}} % </span>\n              </td>\n              <td (click)=\"switchTo('Deadlines')\">\n                <span>{{vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal | number:'1.0-0'}} </span>\n                <span *ngIf=\"vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal < vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastTotal\" class=\"text-danger\">({{vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastTotal - vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal}} Missing)</span>\n                <span *ngIf=\"vpvKeyMetricActive.keyMetrics.timeCompletionCurrentTotal == vpvKeyMetricActive.keyMetrics.timeCompletionBaseLastTotal\" >(in Plan)</span>\n              </td>\n              <td (click)=\"switchTo('Deadlines')\" class=\"d-none d-md-table-cell\" title=\"Status Actual Deliveries in Time\">\n                <span *ngIf=\"delayActualDeadlines == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"delayActualDeadlines == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"delayActualDeadlines == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span> / </span>\n                <span *ngIf=\"delayTotalDeadlines == 1\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span *ngIf=\"delayTotalDeadlines == 2\" class=\"fas fa-exclamation-triangle\" style=\"color:orange\"></span>\n                <span *ngIf=\"delayTotalDeadlines == 3\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <!-- <span *ngIf=\"delayActualDelivery > 1 || delayTotalDelivery > 1\"> Delay</span> -->\n                <span> Delay</span>\n              </td>\n              <td>\n              </td>\n              <td>\n                <button class=\"Detail\" title=\"Trend of Cost Metrics\"\n                (click)=\"switchTo('Deadlines')\">i</button>\n              </td>\n            </tr>\n            <tr>\n              <td>Project End Date</td>\n              <td>\n                <span *ngIf=\"delayEndDate > 0\" class=\"fas fa-exclamation-circle\" style=\"color:red\"></span>\n                <span *ngIf=\"delayEndDate <= 0\" class=\"fas fa-check-circle\" style=\"color:green\"></span>\n                <span> {{ vpvKeyMetricActive.keyMetrics.endDateCurrent | date :'dd.MM.yyyy'}}</span>\n              </td>\n              <td></td>\n              <td class=\"d-none d-md-table-cell\">\n                <span *ngIf=\"delayEndDate > 0\" class=\"text-danger\"> {{delayEndDate | number:'1.1-1'}} Weeks Delay</span>\n                <span *ngIf=\"delayEndDate < 0\" class=\"text-success\"> {{-delayEndDate | number:'1.1-1'}} Weeks Ahead</span>\n                <span *ngIf=\"delayEndDate == 0\"> in Time</span>\n              </td>\n              <td></td>\n              <td></td>\n            </tr>\n            <tr>\n              <td>Traffic Light</td>\n              <td title=\"{{ vpvKeyMetricActive.ampelErlaeuterung }}\">\n                <span *ngIf=\"vpvKeyMetricActive.ampelStatus == 1\" class=\"fas fa-lightbulb text-success\"></span>\n                <span *ngIf=\"vpvKeyMetricActive.ampelStatus == 2\" class=\"fas fa-lightbulb text-warning\"></span>\n                <span *ngIf=\"vpvKeyMetricActive.ampelStatus == 3\" class=\"fas fa-lightbulb text-danger\"></span>\n              </td>\n              <td></td>\n              <td class=\"d-none d-md-table-cell\" title=\"{{ vpvKeyMetricActive.ampelErlaeuterung }}\">\n                {{ getShortText(vpvKeyMetricActive.ampelErlaeuterung, 40) }}\n              </td>\n              <td></td>\n              <td></td>\n            </tr>\n            <tr *ngIf=\"vpvKeyMetricActive.leadPerson\">\n              <td>Lead Person</td>\n              <td title=\"{{ vpvKeyMetricActive.leadPerson }}\">\n                {{ getShortText(vpvKeyMetricActive.leadPerson, 20) }}\n              </td>\n              <td></td>\n              <td></td>\n              <td></td>\n              <td></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </form>\n    <div *ngIf=\"history\">\n      <hr>\n      <div class=\"btn-group\">\n        <button *ngIf=\"hasVPPerm(permVP.ViewAudit)\" class=\"btn mx-1\" (click)=\"switchChart()\">{{chartButton}}</button>\n        <button *ngIf=\"!this.chart\" type=\"button\" class=\"btn mx-1\" (click)=\"gotoVisboProjectVersions()\">Show All Versions</button>\n      </div>\n      <div *ngIf=\"chart && graphDataLineChart.length > 0\" >\n        <div *ngIf=\"typeMetricChart == 'Costs'\">\n          <app-line-chart [graphData]=\"graphDataLineChart\" [graphOptions]=\"graphOptionsLineChart\" [parentThis]=\"parentThis\"></app-line-chart>\n        </div>\n        <div *ngIf=\"typeMetricChart == 'Deadlines'\">\n          <app-line-chart [graphData]=\"graphDataLineChart\" [graphOptions]=\"graphOptionsLineChart\" [parentThis]=\"parentThis\"></app-line-chart>\n        </div>\n        <div *ngIf=\"typeMetricChart == 'Deliveries'\">\n          <app-line-chart [graphData]=\"graphDataLineChart\" [graphOptions]=\"graphOptionsLineChart\" [parentThis]=\"parentThis\"></app-line-chart>\n        </div>\n      </div>\n      <div *ngIf=\"!chart && graphDataLineChart.length > 0\" >\n        <table *ngIf=\"typeMetricChart == 'Costs'\" class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortKeyMetricsTable(1)\">Time Stamp</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(2)\">Actual Saving Cost</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(3)\">Total Saving Cost</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(4)\">Actual Cost (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(5)\">Total Cost (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(6)\">Traffic Light</th>\n              <th class=\"text-right d-none d-lg-table-cell\">Info</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='listSelectRow(vp)'\n            data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n              <td *ngIf=\"vp.timestamp == vpvKeyMetricActive.timestamp\" class=\"font-weight-bold\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td *ngIf=\"vp.timestamp != vpvKeyMetricActive.timestamp\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td class=\"text-right\">{{vp.savingCostActual | number:'1.0-0'}} %</td>\n              <td class=\"text-right\">{{vp.savingCostTotal | number:'1.0-0'}} %</td>\n              <td class=\"text-right\">{{vp.keyMetrics.costBaseLastActual | number:'1.0-0'}} kâ¬</td>\n              <td class=\"text-right\">{{vp.keyMetrics.costBaseLastTotal | number:'1.0-0'}} kâ¬</td>\n              <td class=\"text-right\">\n                <span *ngIf=\"vp.ampelStatus == 1\" class=\"fas fa-lightbulb text-success\"></span>\n                <span *ngIf=\"vp.ampelStatus == 2\" class=\"fas fa-lightbulb text-warning\"></span>\n                <span *ngIf=\"vp.ampelStatus == 3\" class=\"fas fa-lightbulb text-danger\"></span>\n              </td>\n              <td><button class=\"Detail\" title=\"Version Detail\" (click)=\"gotoClickedRow(vp)\">i</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        <table *ngIf=\"typeMetricChart == 'Deadlines'\" class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortKeyMetricsTable(1)\">Time Stamp</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(10)\">Actual Completion</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(11)\">Actual Deadlines (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(12)\">Total Deadlines (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(13)\">Actual Delay</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(14)\">Total Delay</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(6)\">Traffic Light</th>\n          <th class=\"text-right d-none d-lg-table-cell\">Info</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='listSelectRow(vp)'\n            data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n              <td *ngIf=\"vp.timestamp == vpvKeyMetricActive.timestamp\" class=\"font-weight-bold\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td *ngIf=\"vp.timestamp != vpvKeyMetricActive.timestamp\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td class=\"text-right\">{{vp.timeCompletionActual | number:'1.0-0'}} %</td>\n              <td class=\"text-right\">{{vp.keyMetrics.timeCompletionBaseLastActual | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.timeCompletionBaseLastTotal | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.timeDelayCurrentActual | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.timeDelayCurrentTotal | number:'1.0-0'}}</td>\n              <td class=\"text-right\">\n                <span *ngIf=\"vp.ampelStatus == 1\" class=\"fas fa-lightbulb text-success\"></span>\n                <span *ngIf=\"vp.ampelStatus == 2\" class=\"fas fa-lightbulb text-warning\"></span>\n                <span *ngIf=\"vp.ampelStatus == 3\" class=\"fas fa-lightbulb text-danger\"></span>\n              </td>\n              <td><button class=\"Detail\" title=\"Version Detail\" (click)=\"gotoClickedRow(vp)\">i</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n        <table *ngIf=\"typeMetricChart == 'Deliveries'\" class='table table-hover table-sortable'>\n          <!--Table head-->\n          <thead>\n            <tr>\n              <th (click)=\"sortKeyMetricsTable(1)\">Time Stamp</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(20)\">Actual Completion</th>\n              <th class=\"text-right\" (click)=\"sortKeyMetricsTable(21)\">Actual Deliveries (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(22)\">Total Deliveries (Base Line)</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(23)\">Actual Delay</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(24)\">Total Delay</th>\n              <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(6)\">Traffic Light</th>\n          <th class=\"text-right d-none d-lg-table-cell\">Info</th>\n            </tr>\n          </thead>\n          <!--Table body-->\n          <tbody>\n            <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='listSelectRow(vp)'\n            data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n              <td *ngIf=\"vp.timestamp == vpvKeyMetricActive.timestamp\" class=\"font-weight-bold\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td *ngIf=\"vp.timestamp != vpvKeyMetricActive.timestamp\">{{vp.timestamp | date :'dd.MM.yyyy hh:mm' }}</td>\n              <td class=\"text-right\">{{vp.deliveryCompletionActual | number:'1.0-0'}} %</td>\n              <td class=\"text-right\">{{vp.keyMetrics.deliverableCompletionCurrentActual | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.deliverableCompletionCurrentTotal | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.deliverableDelayCurrentActual | number:'1.0-0'}}</td>\n              <td class=\"text-right\">{{vp.keyMetrics.deliverableDelayCurrentTotal | number:'1.0-0'}}</td>\n              <td class=\"text-right\">\n                <span *ngIf=\"vp.ampelStatus == 1\" class=\"fas fa-lightbulb text-success\"></span>\n                <span *ngIf=\"vp.ampelStatus == 2\" class=\"fas fa-lightbulb text-warning\"></span>\n                <span *ngIf=\"vp.ampelStatus == 3\" class=\"fas fa-lightbulb text-danger\"></span>\n              </td>\n              <td><button class=\"Detail\" title=\"Version Detail\" (click)=\"gotoClickedRow(vp)\">i</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"!hasVPPerm(permVP.ViewAudit)\" class='container-fluid'>\n    <div class='panel-body'>\n      <table class='table table-hover table-sortable'>\n        <!--Table head-->\n        <thead>\n          <tr>\n            <th (click)=\"sortKeyMetricsTable(1)\">Project</th>\n            <th class=\"text-right d-none d-md-table-cell\" (click)=\"sortKeyMetricsTable(7)\">Timestamp</th>\n          </tr>\n        </thead>\n        <!--Table body-->\n        <tbody>\n          <tr *ngFor=\"let vp of visbokeymetrics; let vpIndex=index\" (click)='gotoClickedRow(vp)'\n          data-toggle=\"modal\" data-target=\"#ProjectDetail\">\n            <td>{{vp.name }}</td>\n            <td class=\"text-right\">{{vp.timestamp  | date :'dd.MM.yyyy'}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-viewcost/visboproject-viewcost.component.html":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-viewcost/visboproject-viewcost.component.html ***!
  \******************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 *ngIf=\"!vpActive\">\n        Project Key Metrics\n      </h2>\n      <h2 *ngIf=\"vpActive\">\n        Monthly Costs for: <a (click)=\"gotoVP(vpActive)\">{{vpActive.name}}</a>\n      </h2>\n      <h5 *ngIf=\"vpActive\">Visbo Center:\n        <a (click)=\"gotoVC(vpActive)\">{{ vpActive.vc.name }}</a>\n      </h5>\n    </div>\n  </div>\n  <div *ngIf=\"hasVPPerm(permVP.ViewAudit) && vpvActive && vpvCost\">\n    <div class='container-fluid'>\n      <div class=\"d-flex flex-row justify-content-center\">\n        <h3 class=\"col-4\">\n          <div class=\"d-none d-lg-block\">Version of: {{ vpvActive.timestamp | date :'dd.MM.yyyy'}}</div>\n          <div class=\"d-block d-lg-none\">Version of: {{ vpvActive.timestamp | date :'dd.MM'}}</div>\n        </h3>\n        <div class=\"col-4\">\n          <div class=\"row\">\n            <span style=\"font-size: 2em\" class=\"mx-1 fas fa-caret-square-left\" title=\"Previous Period\" (click)='getRefDateVersions(-1)'></span>\n            <select class=\"col-4 form-control d-none d-md-block\" name=\"refDateInterval\" [(ngModel)]=\"refDateInterval\">\n              <option>day</option>\n              <option>week</option>\n              <option>month</option>\n              <option>quarter</option>\n            </select>\n            <span style=\"font-size: 2em\" class=\"mx-1 fas fa-caret-square-right\" title=\"Next Period\" (click)='getRefDateVersions(1)'></span>\n          </div>\n        </div>\n      </div>\n      <div class=\"d-flex flex-row justify-content-center\">\n        Total Cost {{vpvTotalCostBaseLine | number : '1.0-0'}} kâ¬ Base Line vs {{vpvTotalCostCurrent | number : '1.0-0'}} kâ¬ Plan\n      </div>\n    </div>\n\n    <hr>\n    <div *ngIf=\"chart && graphDataLineChart.length > 0\" >\n      <app-line-chart [graphData]=\"graphDataLineChart\" [graphOptions]=\"graphOptionsLineChart\" [parentThis]=\"parentThis\"></app-line-chart>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojects/visboprojects.component.html":
/*!**************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojects/visboprojects.component.html ***!
  \**************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <div class='row'>\n    <div class='col'>\n      <h2 *ngIf=\"!vcActive\" class='panel-heading ml-0'>\n        Projects\n      </h2>\n      <h2 *ngIf=\"vcActive\" class='panel-heading ml-0'>\n        Projects in: <a (click)=\"gotoVCDetail(vcActive)\">{{vcActive.name}}</a>\n      </h2>\n    </div>\n    <div class='btn-group'>\n      <div *ngIf=\"hasVPPerm(permVP.DeleteVP)\">\n          <button *ngIf=\"!deleted\" type=\"button\" class=\"m-2 btn btn-secondary\" (click)=\"toggleVisboProjects()\">Show Deleted</button>\n          <button *ngIf=\"deleted\" type=\"button\" class=\"m-2 btn btn-secondary\" (click)=\"toggleVisboProjects()\">Show Existing</button>\n      </div>\n      <div *ngIf=\"vcActive && hasVCPerm(permVC.CreateVP)\">\n        <button type=\"button\" class=\"m-2 btn btn-primary\" data-toggle=\"modal\" data-target=\"#VpModalCreate\">New Project</button>\n      </div>\n    </div>\n  </div>\n\n  <div class='panel-body'>\n    <table class='table table-hover table-sortable'>\n      <!--Table head-->\n      <thead>\n        <tr>\n          <th class=\"d-none d-md-table-cell\">Nr.</th>\n          <th (click)=\"sortVPTable(1)\">Name</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVPTable(5)\">Type</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVPTable(2)\">Modified</th>\n          <th class=\"d-none d-md-table-cell\" (click)=\"sortVPTable(4)\"># Versions</th>\n          <th class=\"d-none d-lg-table-cell\" (click)=\"sortVPTable(3)\">Visbo Center</th>\n          <th>Info</th>\n        </tr>\n      </thead>\n      <!--Table body-->\n      <tbody>\n        <tr *ngFor=\"let vp of visboprojects; let vpIndex=index\" (click)=\"gotoClickedRow(vp)\">\n          <td class=\"d-none d-md-table-cell\">{{vpIndex+1}}</td>\n          <td>{{vp.name}}</td>\n          <td class=\"d-none d-md-table-cell\">{{getVPType(vp.vpType)}}</td>\n          <td class=\"d-none d-lg-table-cell\">{{vp.updatedAt | date :'dd.MM.yyyy HH:mm'}}</td>\n          <td class=\"d-none d-md-table-cell d-lg-none\">{{vp.updatedAt | date :'dd.MM.yy'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vp.vpvCount}}</td>\n          <td class=\"d-none d-lg-table-cell\" *ngIf=\"vp.vc\">{{vp.vc.name}}</td>\n          <td class=\"d-none d-lg-table-cell\" *ngIf=\"!vp.vc\"> </td>\n          <td>\n            <button class=\"Detail\" title=\"Detail of Visbo Project\"\n            (click)=\"gotoDetail(vp)\">i</button>\n          </td>\n        </tr>\n      </tbody>\n      <!--Table body-->\n    </table>\n  </div>\n</div>\n\n<!-- Modal VP Create-->\n<div class=\"modal fade\" id=\"VpModalCreate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"VpModalCreateTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"VpModalCenterTitle\">Create a new Visbo Project</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form>\n          <div class=\"form-group\">\n            <label for=\"vpName\" class=\"col-form-label\">Name:</label>\n            <input type=\"text\" class=\"form-control\" #vpName>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"col-form-label\">Description:</label>\n            <textarea class=\"form-control\" #vpDescription></textarea>\n          </div>\n        </form>\n      </div>\n      <div class=\"modal-footer align-items-end\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"addproject(vpName.value, vcActive._id, vpDescription.value); vpName.value=''; vpDescription.value='';\" data-dismiss=\"modal\">Save</button>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversion-detail/visboprojectversion-detail.component.html":
/*!****************************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversion-detail/visboprojectversion-detail.component.html ***!
  \****************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div *ngIf=\"visboprojectversion\">\n  <h4>Version Details: <a (click)=\"gotoVPVList(visboprojectversion)\">{{ visboprojectversion.name | uppercase }}</a></h4>\n  <form>\n    <div class=\"form-group row\">\n      <label for=\"vpName\" class=\"col-4 col-md-3 col-form-label\">Name:</label>\n      <label class=\"col-8 form-control-static\">{{ visboprojectversion.name }} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"vpvDescription\" class=\"col-4 col-md-3 col-form-label\">Description:</label>\n      <label class=\"col-8 form-control-static\">{{ visboprojectversion.description }} </label>\n    </div>\n\n    <div class=\"form-group row\">\n      <label for=\"Created\" class=\"col-4 col-md-3 col-form-label\">Created / Updated at:</label>\n      <label class=\"col form-control-static col-form-label\">{{ visboprojectversion.createdAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n      <label class=\"col form-control-static col-form-label\">{{ visboprojectversion.updatedAt | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n    </div>\n    <div class=\"form-group row\">\n      <label for=\"Timestamp\" class=\"col-4 col-md-3 col-form-label\">Timestamp at:</label>\n      <label class=\"col form-control-static col-form-label\">{{ visboprojectversion.timestamp | date :'dd.MM.yyyy HH:mm:ss'}} </label>\n    </div>\n    <div *ngIf=\"visboprojectversion.variantName\" class=\"form-group row\">\n      <label for=\"Variant\" class=\"col-4 col-md-3 col-form-label\">Variant:</label>\n      <label class=\"col form-control-static col-form-label\">{{ visboprojectversion.variantName}} </label>\n    </div>\n  </form>\n\n  <div>\n    <button *ngIf=\"deleted && hasVPPerm(permVP.DeleteVP)\" (click)=\"save()\" class=\"btn btn-primary\">Restore</button>\n    <button (click)=\"goBack()\">go back</button>\n    <button *ngIf=\"!deleted && hasVPPerm(permVP.DeleteVP)\" class=\"bg-warning\" style=\"float: right\" title=\"Delete Visbo Project Version\" data-toggle=\"modal\" data-target=\"#VpvDelete\">\n      Delete!\n    </button>\n    <button *ngIf=\"deleted && hasVPPerm(permVP.DeleteVP)\" class=\"bg-danger text-white\" style=\"float: right\" title=\"Destroy Visbo Project Version\" data-toggle=\"modal\" data-target=\"#VpvDelete\">\n      Destroy!\n    </button>\n  </div>\n\n  <!-- Modal Delete VPV  -->\n  <div class=\"modal fade\" id=\"VpvDelete\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"Delete Project Version\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"VpvDeleteTitle\">Delete this Project Version</h5>\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        </div>\n        <div class=\"modal-body\">\n          <div>\n            <label *ngIf=\"!deleted\" class=\"bg-warning\">Do you really want to delete this Project Version? </label>\n            <label *ngIf=\"deleted\" class=\"bg-danger text-white\">Do you really want to destroy this Project Version? </label>\n          </div>\n          <form>\n            <div class=\"form-group\">\n              <label for=\"VpvName\" class=\"col-form-label\">Name:</label>\n              <label class=\"col-8 form-control-static\">{{ visboprojectversion.name }} </label>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"VpvVersions\" class=\"col-form-label\">Timestamp:</label>\n              <label class=\"col-8 form-control-static\">{{ visboprojectversion.timestamp }} </label>\n            </div>\n          </form>\n        </div>\n        <div class=\"modal-footer align-items-end\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n          <button *ngIf=\"!deleted\" type=\"button\" class=\"btn btn-warning text-white\" (click)=\"delete(visboprojectversion)\" data-dismiss=\"modal\">Delete</button>\n          <button *ngIf=\"deleted\" type=\"button\" class=\"btn btn-danger text-white\" (click)=\"delete(visboprojectversion)\" data-dismiss=\"modal\">Destroy</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversions/visboprojectversions.component.html":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversions/visboprojectversions.component.html ***!
  \****************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("<visbo-navbar></visbo-navbar>\n<div class='well'>\n  <div class=\"container\">\n    <div class='row'>\n      <div class='col'>\n        <h2 *ngIf=\"!vpActive\">\n          Project Versions\n        </h2>\n        <h2 *ngIf=\"vpActive\">\n          Project Versions in:\n          <button class='panel-heading bg-white btn-white' (click)=\"gotoVPDetail(vpActive)\">\n            {{vpActive.name}}\n          </button>\n        </h2>\n      </div>\n      <div class='btn-group '>\n        <button *ngIf=\"!deleted\" class=\"btn btn-sm btn-secondary m-2\" (click)=\"toggleVisboProjectVersions()\">Show Deleted</button>\n        <button *ngIf=\"deleted\" class=\"btn btn-sm btn-secondary m-2\" (click)=\"toggleVisboProjectVersions()\">Show Existing</button>\n      </div>\n    </div>\n  </div>\n\n  <div class='panel-body'>\n    <table class='table table-hover table-sortable'>\n      <!--Table head-->\n      <thead>\n        <tr>\n          <th class=\"d-none d-md-table-cell\">Nr.</th>\n          <!-- <th>Name</th> -->\n          <th (click)=\"sortVPVTable(1)\">Timestamp</th>\n          <th class=\"d-none d-md-table-cell\">Status</th>\n          <th (click)=\"sortVPVTable(2)\" class=\"d-none d-md-table-cell\">End Date</th>\n          <th (click)=\"sortVPVTable(3)\">Ampel</th>\n          <th (click)=\"sortVPVTable(4)\">Budget</th>\n          <th (click)=\"sortVPVTable(5)\" class=\"d-none d-md-table-cell\">Variant Name</th>\n          <!-- <th>Info</th> -->\n        </tr>\n      </thead>\n      <!--Table body-->\n      <tbody>\n        <tr *ngFor=\"let vpv of visboprojectversions; let vpvIndex=index\" (click)=\"gotoClickedRow(vpv)\">\n          <td class=\"d-none d-md-table-cell\">{{vpvIndex+1}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vpv.timestamp | date :'dd.MM.yyyy HH:mm'}}</td>\n          <td class=\"d-none d-sm-table-cell d-md-none\">{{vpv.timestamp | date :'dd.MM.yy'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vpv.status}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vpv.endDate | date :'dd.MM.yy'}}</td>\n          <td>{{vpv.ampelStatus}}</td>\n          <td>{{vpv.Erloes | number : '1.2-2'}}</td>\n          <td class=\"d-none d-md-table-cell\">{{vpv.variantName}}</td>\n          <!-- <td>\n            <button class=\"Detail\" title=\"Detail of Visbo Project Version\"\n            (click)=\"gotoDetail(vpv)\">i</button>\n          </td> -->\n        </tr>\n      </tbody>\n      <!--Table body-->\n    </table>\n  </div>\n</div>\n");

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}


/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/_directives/alert.component.ts":
/*!************************************************!*\
  !*** ./src/app/_directives/alert.component.ts ***!
  \************************************************/
/*! exports provided: AlertComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertComponent", function() { return AlertComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");



let AlertComponent = class AlertComponent {
    constructor(alertService) {
        this.alertService = alertService;
        // subscribe to alert messages
        this.subscription = alertService.getMessage().subscribe(message => { this.message = message; });
    }
    ngOnDestroy() {
        // unsubscribe on destroy to prevent memory leaks
        this.subscription.unsubscribe();
    }
};
AlertComponent.ctorParameters = () => [
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_2__["AlertService"] }
];
AlertComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'alert',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./alert.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/_directives/alert.component.html")).default
    })
], AlertComponent);



/***/ }),

/***/ "./src/app/_guards/auth.guard.ts":
/*!***************************************!*\
  !*** ./src/app/_guards/auth.guard.ts ***!
  \***************************************/
/*! exports provided: AuthGuard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthGuard", function() { return AuthGuard; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");



let AuthGuard = class AuthGuard {
    constructor(router) {
        this.router = router;
    }
    canActivate(route, state) {
        if (sessionStorage.getItem('currentUser')) {
            // logged in so return true
            return true;
        }
        // not logged in so redirect to login page with the return url
        this.router.navigate(['login'], { queryParams: { returnUrl: state.url } });
        return false;
    }
};
AuthGuard.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
AuthGuard = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], AuthGuard);



/***/ }),

/***/ "./src/app/_helpers/env.service.provider.ts":
/*!**************************************************!*\
  !*** ./src/app/_helpers/env.service.provider.ts ***!
  \**************************************************/
/*! exports provided: EnvServiceFactory, EnvServiceProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnvServiceFactory", function() { return EnvServiceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnvServiceProvider", function() { return EnvServiceProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _services_env_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../_services/env.service */ "./src/app/_services/env.service.ts");


const EnvServiceFactory = () => {
    // Create env
    const env = new _services_env_service__WEBPACK_IMPORTED_MODULE_1__["EnvService"]();
    // Read environment variables from browser window
    const browserWindow = window || {};
    const browserWindowEnv = browserWindow['__env'] || {};
    // Assign environment variables from browser window to env
    // In the current implementation, properties from env.js overwrite defaults from the EnvService.
    // If needed, a deep merge can be performed here to merge properties instead of overwriting them.
    for (const key in browserWindowEnv) {
        if (browserWindowEnv.hasOwnProperty(key)) {
            env[key] = window['__env'][key];
        }
    }
    return env;
};
const EnvServiceProvider = {
    provide: _services_env_service__WEBPACK_IMPORTED_MODULE_1__["EnvService"],
    useFactory: EnvServiceFactory,
    deps: [],
};


/***/ }),

/***/ "./src/app/_helpers/jwt.interceptor.ts":
/*!*********************************************!*\
  !*** ./src/app/_helpers/jwt.interceptor.ts ***!
  \*********************************************/
/*! exports provided: JwtInterceptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JwtInterceptor", function() { return JwtInterceptor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");





let JwtInterceptor = class JwtInterceptor {
    constructor(authenticationService) {
        this.authenticationService = authenticationService;
    }
    intercept(request, next) {
        // add authorization header with jwt token if available
        let currentToken = JSON.parse(sessionStorage.getItem('currentToken'));
        if (currentToken) {
            request = request.clone({
                setHeaders: {
                    'access-key': `${currentToken}`
                }
            });
        }
        return next.handle(request)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__["catchError"])((error) => {
            //401 UNAUTHORIZED - SECTION 2
            if (error && error.status === 401) {
                console.log("Interceptor: Session Expired, redirect to login");
                this.authenticationService.logout();
                location.reload(true);
            }
            const err = error.error.message || error.statusText;
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__["throwError"])(error);
        }));
    }
};
JwtInterceptor.ctorParameters = () => [
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__["AuthenticationService"] }
];
JwtInterceptor = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], JwtInterceptor);



/***/ }),

/***/ "./src/app/_models/login.ts":
/*!**********************************!*\
  !*** ./src/app/_models/login.ts ***!
  \**********************************/
/*! exports provided: Login, VisboUserAddress, VisboUserProfile, VisboUserStatus, VisboUser, LoginResponse, VisboUserResponse, VisboUsersResponse, VisboStatusResponse, VisboStatusPWPolicyResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Login", function() { return Login; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUserAddress", function() { return VisboUserAddress; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUserProfile", function() { return VisboUserProfile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUserStatus", function() { return VisboUserStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUser", function() { return VisboUser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginResponse", function() { return LoginResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUserResponse", function() { return VisboUserResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboUsersResponse", function() { return VisboUsersResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboStatusResponse", function() { return VisboStatusResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboStatusPWPolicyResponse", function() { return VisboStatusPWPolicyResponse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

class Login {
    constructor() {
        this.email = "";
        this.password = "";
    }
}
;
class VisboUserAddress {
}
;
class VisboUserProfile {
}
;
class VisboUserStatus {
}
;
class VisboUser {
}
;
class LoginResponse {
}
class VisboUserResponse {
}
class VisboUsersResponse {
}
class VisboStatusResponse {
}
class VisboStatusPWPolicyResponse {
}


/***/ }),

/***/ "./src/app/_models/visboaudit.ts":
/*!***************************************!*\
  !*** ./src/app/_models/visboaudit.ts ***!
  \***************************************/
/*! exports provided: VisboAudit, VisboAuditResponse, VisboAuditActionType, QueryAuditType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboAudit", function() { return VisboAudit; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboAuditResponse", function() { return VisboAuditResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboAuditActionType", function() { return VisboAuditActionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueryAuditType", function() { return QueryAuditType; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

class VisboAudit {
}
class VisboAuditResponse {
}
class VisboAuditActionType {
}
class QueryAuditType {
}


/***/ }),

/***/ "./src/app/_models/visbogroup.ts":
/*!***************************************!*\
  !*** ./src/app/_models/visbogroup.ts ***!
  \***************************************/
/*! exports provided: VGUser, VGPermission, VGPSystem, VGPVC, VGPVP, VGGroup, VGUserGroup, VGProjectUserGroup, VGUserGroupMix, VGResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGUser", function() { return VGUser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGPermission", function() { return VGPermission; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGPSystem", function() { return VGPSystem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGPVC", function() { return VGPVC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGPVP", function() { return VGPVP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGGroup", function() { return VGGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGUserGroup", function() { return VGUserGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGProjectUserGroup", function() { return VGProjectUserGroup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGUserGroupMix", function() { return VGUserGroupMix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VGResponse", function() { return VGResponse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

class VGUser {
}
class VGPermission {
}
var VGPSystem;
(function (VGPSystem) {
    VGPSystem[VGPSystem["View"] = 1] = "View";
    VGPSystem[VGPSystem["ViewAudit"] = 2] = "ViewAudit";
    VGPSystem[VGPSystem["ViewLog"] = 4] = "ViewLog";
    VGPSystem[VGPSystem["Modify"] = 16] = "Modify";
    VGPSystem[VGPSystem["ManagePerm"] = 32] = "ManagePerm";
    VGPSystem[VGPSystem["CreateVC"] = 256] = "CreateVC";
    VGPSystem[VGPSystem["DeleteVC"] = 1024] = "DeleteVC";
})(VGPSystem || (VGPSystem = {}));
;
var VGPVC;
(function (VGPVC) {
    VGPVC[VGPVC["View"] = 1] = "View";
    VGPVC[VGPVC["ViewAudit"] = 2] = "ViewAudit";
    VGPVC[VGPVC["Modify"] = 16] = "Modify";
    VGPVC[VGPVC["ManagePerm"] = 32] = "ManagePerm";
    VGPVC[VGPVC["CreateVP"] = 256] = "CreateVP";
})(VGPVC || (VGPVC = {}));
;
var VGPVP;
(function (VGPVP) {
    VGPVP[VGPVP["View"] = 1] = "View";
    VGPVP[VGPVP["ViewAudit"] = 2] = "ViewAudit";
    VGPVP[VGPVP["Modify"] = 16] = "Modify";
    VGPVP[VGPVP["ManagePerm"] = 32] = "ManagePerm";
    VGPVP[VGPVP["CreateVariant"] = 256] = "CreateVariant";
    VGPVP[VGPVP["DeleteVP"] = 1024] = "DeleteVP";
})(VGPVP || (VGPVP = {}));
;
class VGGroup {
}
class VGUserGroup {
}
class VGProjectUserGroup {
}
class VGUserGroupMix {
}
class VGResponse {
}


/***/ }),

/***/ "./src/app/_models/visboproject.ts":
/*!*****************************************!*\
  !*** ./src/app/_models/visboproject.ts ***!
  \*****************************************/
/*! exports provided: VPTYPE, VPVariant, VPLock, VisboProject, VisboProjectResponse, VisboProjectLockResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPTYPE", function() { return VPTYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPVariant", function() { return VPVariant; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPLock", function() { return VPLock; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProject", function() { return VisboProject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectResponse", function() { return VisboProjectResponse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectLockResponse", function() { return VisboProjectLockResponse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var VPTYPE;
(function (VPTYPE) {
    VPTYPE[VPTYPE["Project"] = 0] = "Project";
    VPTYPE[VPTYPE["Portfolio"] = 1] = "Portfolio";
    VPTYPE[VPTYPE["Template"] = 2] = "Template";
})(VPTYPE || (VPTYPE = {}));
;
class VPVariant {
}
class VPLock {
}
class VisboProject {
}
class VisboProjectResponse {
}
class VisboProjectLockResponse {
}


/***/ }),

/***/ "./src/app/_models/visboprojectversion.ts":
/*!************************************************!*\
  !*** ./src/app/_models/visboprojectversion.ts ***!
  \************************************************/
/*! exports provided: VPVCost, VPVKeyMetrics, VPVKeyMetricsCalc, VisboProjectVersion, VisboProjectVersionResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPVCost", function() { return VPVCost; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPVKeyMetrics", function() { return VPVKeyMetrics; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VPVKeyMetricsCalc", function() { return VPVKeyMetricsCalc; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectVersion", function() { return VisboProjectVersion; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectVersionResponse", function() { return VisboProjectVersionResponse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

class VPVCost {
}
;
class VPVKeyMetrics {
}
;
class VPVKeyMetricsCalc {
}
;
class VisboProjectVersion {
}
class VisboProjectVersionResponse {
}


/***/ }),

/***/ "./src/app/_services/alert.service.ts":
/*!********************************************!*\
  !*** ./src/app/_services/alert.service.ts ***!
  \********************************************/
/*! exports provided: AlertService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlertService", function() { return AlertService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var rxjs_Subject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/Subject */ "./node_modules/rxjs-compat/_esm2015/Subject.js");




let AlertService = class AlertService {
    constructor(router) {
        this.router = router;
        this.subject = new rxjs_Subject__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
        this.keepAfterNavigationChange = false;
        // clear alert message on route change
        router.events.subscribe(event => {
            if (event instanceof _angular_router__WEBPACK_IMPORTED_MODULE_2__["NavigationStart"]) {
                if (this.keepAfterNavigationChange) {
                    // only keep for a single location change
                    this.keepAfterNavigationChange = false;
                }
                else {
                    // clear alert
                    this.subject.next();
                }
            }
        });
    }
    clear() {
        this.subject.next();
    }
    success(message, keepAfterNavigationChange = false) {
        this.keepAfterNavigationChange = keepAfterNavigationChange;
        this.subject.next({ type: 'success', text: message });
    }
    error(message, keepAfterNavigationChange = false) {
        if (!message)
            message = "Unknown Error reaching the Server";
        this.keepAfterNavigationChange = keepAfterNavigationChange;
        this.subject.next({ type: 'error', text: message });
    }
    getMessage() {
        return this.subject.asObservable();
    }
};
AlertService.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
AlertService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], AlertService);



/***/ }),

/***/ "./src/app/_services/authentication.service.ts":
/*!*****************************************************!*\
  !*** ./src/app/_services/authentication.service.ts ***!
  \*****************************************************/
/*! exports provided: AuthenticationService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthenticationService", function() { return AuthenticationService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _models_login__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/login */ "./src/app/_models/login.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jwt-decode */ "./node_modules/jwt-decode/lib/index.js");
/* harmony import */ var jwt_decode__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jwt_decode__WEBPACK_IMPORTED_MODULE_8__);



 // only need to import from rxjs





const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let AuthenticationService = class AuthenticationService {
    constructor(http, 
    // private store: Store<AuthState>,
    messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        this.isLoggedIn = false;
        this.logoutTime = undefined;
        this.pwPolicy = undefined;
        this.authUrl = this.env.restUrl.concat('/token/user'); // URL to web api
    }
    logoutCheck() {
        if (!this.isLoggedIn)
            return undefined;
        // this.log(`Logout Check ${this.logoutTime}`);
        return this.logoutTime;
    }
    login(username, password) {
        const url = `${this.authUrl}/login`;
        this.log(`Calling HTTP Request: ${url} for: ${username}`);
        var newLogin = new _models_login__WEBPACK_IMPORTED_MODULE_6__["Login"];
        newLogin.email = username;
        newLogin.password = password;
        return this.http.post(url, newLogin) /* MS Last Option HTTP Headers */
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(result => {
            // login successful if there's a jwt token in the response
            if (result && result.token) {
                this.log(`Login Request Successful:  ${result.user.email}`);
                // store user details and jwt token in local storage to keep user logged in between page refreshes
                sessionStorage.setItem('currentUser', JSON.stringify(result.user));
                sessionStorage.setItem('currentToken', JSON.stringify(result.token));
                this.isLoggedIn = true;
                var decoded;
                decoded = jwt_decode__WEBPACK_IMPORTED_MODULE_8__(result.token);
                // this.log(`Login token expiration:  ${decoded.exp}`);
                this.logoutTime = new Date(decoded.exp * 1000);
                this.log(`Login Request logoutTime:  ${this.logoutTime}`);
                return result.user;
            }
            ;
            return null;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('LoginError')));
    }
    logout() {
        // remove user from local storage to log user out
        this.isLoggedIn = false;
        sessionStorage.removeItem('currentUser');
        sessionStorage.removeItem('currentToken');
    }
    getActiveUser() {
        var currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
        return currentUser;
    }
    pwforgotten(model) {
        const url = `${this.authUrl}/pwforgotten`;
        var newUser = new _models_login__WEBPACK_IMPORTED_MODULE_6__["VisboUser"];
        newUser.email = model.username;
        this.log(`Calling HTTP Request: ${url} for: ${model.username} `);
        return this.http.post(url, newUser) /* MS Last Option HTTP Headers */
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(result => {
            // registration successful if there's a user in the response
            this.log(`PW Forgotten Request executed`);
            if (result) {
                this.log(`PW Forgotten Request Successful:  ${JSON.stringify(result)}`);
            }
            return result;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('pwforgotten')));
    }
    pwreset(model) {
        const url = `${this.authUrl}/pwreset`;
        this.log(`Calling HTTP Request: ${url} with: ${model.token} `);
        return this.http.post(url, model)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(result => {
            // registration successful if there's a user in the response
            this.log(`PW Reset Request executed`);
            if (result) {
                this.log(`PW Reset Request Successful:  ${JSON.stringify(result)}`);
            }
            else {
                this.log(`PW Reset Request Unsuccessful:  ${JSON.stringify(result)}`);
            }
            return result;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('pwreset')));
    }
    registerconfirm(model) {
        const url = `${this.authUrl}/confirm`;
        this.log(`Calling HTTP Request: ${url} for: ${model._id} `);
        return this.http.post(url, model) /* MS Last Option HTTP Headers */
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(result => {
            // registration successful if there's a user in the response
            this.log(`e-mail confirm Request executed`);
            if (result) {
                this.log(`e-mail confirm Request Successful:  ${JSON.stringify(result)}`);
            }
            return result;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('pwreset')));
    }
    createUser(model, hash) {
        var url = `${this.authUrl}/signup`;
        var newUser = new _models_login__WEBPACK_IMPORTED_MODULE_6__["VisboUser"];
        var newUserProfile = new _models_login__WEBPACK_IMPORTED_MODULE_6__["VisboUserProfile"];
        if (model.username)
            newUser.email = model.username;
        if (model._id)
            newUser._id = model._id;
        // do not set password before the log statement
        newUserProfile.firstName = model.firstName;
        newUserProfile.lastName = model.lastName;
        newUserProfile.phone = model.phone;
        newUserProfile.company = model.company;
        newUser.profile = newUserProfile;
        if (hash)
            url = url.concat('?hash=', hash);
        this.log(`Calling HTTP Request: ${url} for: ${newUser.email || newUser._id} hash ${hash} Profile: ${JSON.stringify(newUser)}`);
        newUser.password = model.password;
        return this.http.post(url, newUser) /* MS Last Option HTTP Headers */
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(result => {
            // registration successful if there's a user in the response
            this.log(`Registration Request executed:  ${JSON.stringify(result)}`);
            if (result.user) {
                this.log(`Registration Request Successful:  ${result.user.email}`);
                return result.user;
            }
            return {};
        }), 
        // tap(result => this.log(`registered ${result.user.email} `)),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('registerUser')));
    }
    restVersion() {
        const url = this.env.restUrl.concat('/status');
        this.log(`Calling HTTP Request: ${url}`);
        return this.http.get(url, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.status), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(status => this.log(`fetched Status  `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getStatus', [])));
    }
    initPWPolicy() {
        const url = this.env.restUrl.concat('/status/pwpolicy');
        this.log(`Calling HTTP Request: ${url}`);
        return this.http.get(url, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            this.pwPolicy = response.value;
            return response.value;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(value => this.log(`fetched PW Policy ${JSON.stringify(value)}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('initPWPolicy', [])));
    }
    getPWPolicy() {
        return this.pwPolicy;
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            // OPTIONAL send the error to remote logging infrastructure
            this.log(`${operation} failed: ${JSON.stringify(error)} Status: ${error.status}, StatusText: ${error.statusText}, Message: ${error.message}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
            //return of(result as T);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('AuthenticationService: ' + message);
    }
};
AuthenticationService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_7__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
AuthenticationService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], AuthenticationService);



/***/ }),

/***/ "./src/app/_services/env.service.ts":
/*!******************************************!*\
  !*** ./src/app/_services/env.service.ts ***!
  \******************************************/
/*! exports provided: EnvService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnvService", function() { return EnvService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

class EnvService {
    // Whether or not to enable debug mode
    // public enableDebug = true;
    constructor() {
        // The values that are defined here are the default values that can
        // be overridden by env.js
        // API url
        this.restUrl = 'https://dev.visbo.net/api';
    }
}


/***/ }),

/***/ "./src/app/_services/message.service.ts":
/*!**********************************************!*\
  !*** ./src/app/_services/message.service.ts ***!
  \**********************************************/
/*! exports provided: MessageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageService", function() { return MessageService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");


let MessageService = class MessageService {
    constructor() {
        this.messages = [];
        this.activateMessages = undefined;
        this.activateMessageToggle = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"](true);
    }
    initstatus() {
        if (this.activateMessages == undefined) {
            this.activateMessages = sessionStorage.getItem('activateMessages') == 'On';
        }
    }
    toggle() {
        this.initstatus();
        this.activateMessages = !this.activateMessages;
        sessionStorage.setItem('activateMessages', this.activateMessages ? 'On' : 'Off');
        this.activateMessageToggle.emit(this.activateMessages);
        console.log('Messages Toggle to %s', this.activateMessages);
        return this.activateMessages;
    }
    getstatus() {
        this.initstatus();
        return this.activateMessages;
    }
    add(message) {
        this.messages.push(message);
        if (this.messages.length > 20)
            this.messages.shift();
    }
    clear() {
        this.messages = [];
    }
};
MessageService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], MessageService);



/***/ }),

/***/ "./src/app/_services/syslog.service.ts":
/*!*********************************************!*\
  !*** ./src/app/_services/syslog.service.ts ***!
  \*********************************************/
/*! exports provided: SysLogService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysLogService", function() { return SysLogService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs



const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let SysLogService = class SysLogService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        this.serviceUrl = this.env.restUrl.concat('/syslog'); // URL to ReST api
    }
    /** GET List of Logs from the server */
    getSysLogs(ageDays) {
        var url = this.serviceUrl;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        params = params.append('ageDays', ageDays.toString());
        this.log(`Calling HTTP Request: ${url}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.files), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(files => this.log(`fetched ${files.length} Log Files `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getSysLog', [])));
    }
    // /** GET Log File by name. Return 403 when name not found */
    getSysLog(folder, name) {
        var url = `${this.serviceUrl}/file/${folder}/${name}`;
        this.log(`Calling HTTP Request for a specific log file: ${url}`);
        var options = {};
        options.observe = 'body';
        options.responseType = 'text';
        // options.headers = 'XXX'
        return this.http.get(url, options)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(data => this.log(`fetched Log File Response `)), 
        // map(data => this.log(`fetched Log File Response ${JSON.stringify(data)}`)),
        // tap(stream => this.log(`fetched Log File`)),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getSysLog name:${name} `)));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboLogsService: ' + message);
    }
};
SysLogService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
SysLogService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], SysLogService);



/***/ }),

/***/ "./src/app/_services/sysuser.service.ts":
/*!**********************************************!*\
  !*** ./src/app/_services/sysuser.service.ts ***!
  \**********************************************/
/*! exports provided: SysUserService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysUserService", function() { return SysUserService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs



const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let SysUserService = class SysUserService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        //   private serviceUrl = 'vc';  // URL to api on same server
        this.serviceUrl = this.env.restUrl.concat('/sysuser'); // URL to web api
    }
    /** GET Users from the server */
    getSysUsers(userMatch) {
        var url = this.serviceUrl;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (userMatch)
            params = params.append('email', userMatch);
        params = params.append('maxcount', '100');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.user), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(user => this.log(`fetched ${user.length} Users `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getSysUsers', [])));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('SysUserService: ' + message);
    }
};
SysUserService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
SysUserService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], SysUserService);



/***/ }),

/***/ "./src/app/_services/user.service.ts":
/*!*******************************************!*\
  !*** ./src/app/_services/user.service.ts ***!
  \*******************************************/
/*! exports provided: UserService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserService", function() { return UserService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs



const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let UserService = class UserService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        this.profileUrl = this.env.restUrl.concat('/user/profile'); // URL to api
        this.pwchangeUrl = this.env.restUrl.concat('/user/passwordchange'); // URL to api
    }
    // MS TODO Check correct Observable Type VisboUser instead of any
    getUserProfile() {
        this.log(`Calling HTTP Get Request: ${this.profileUrl}`);
        return this.http.get(this.profileUrl, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.user), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(user => this.log(`fetched ${user.email} User Profile `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getUserProfile', [])));
    }
    updateUserProfile(user) {
        this.log(`Calling HTTP Put Request: ${this.profileUrl}`);
        return this.http.put(this.profileUrl, user, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.user), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(user => this.log(`updated User Profile ${user.email} `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('updateUserProfile')));
    }
    passwordChange(model) {
        this.log(`Calling HTTP Put Request: ${this.pwchangeUrl} Body: ${JSON.stringify(model)}`);
        return this.http.put(this.pwchangeUrl, model, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.user), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(user => this.log(`Changed User Password ${user.email} `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('ChangedPassword')));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboUserService: ' + message);
    }
};
UserService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
UserService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], UserService);



/***/ }),

/***/ "./src/app/_services/visboaudit.service.ts":
/*!*************************************************!*\
  !*** ./src/app/_services/visboaudit.service.ts ***!
  \*************************************************/
/*! exports provided: VisboAuditService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboAuditService", function() { return VisboAuditService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs



const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let VisboAuditService = class VisboAuditService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        this.serviceBaseUrl = this.env.restUrl; // URL to api on same server
    }
    /** GET Audits from the server */
    getVisboAudits(sysadmin = false, queryAudit = undefined) {
        var url = this.serviceBaseUrl.concat('/audit');
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (queryAudit) {
            if (queryAudit.from)
                params = params.append('from', queryAudit.from.toISOString());
            if (queryAudit.to)
                params = params.append('to', queryAudit.to.toISOString());
            if (queryAudit.text)
                params = params.append('text', queryAudit.text);
            if (queryAudit.maxcount)
                params = params.append('maxcount', queryAudit.maxcount.toString());
            if (queryAudit.actionType)
                params = params.append('action', queryAudit.actionType);
            if (queryAudit.area)
                params = params.append('area', queryAudit.area);
        }
        this.log(`Calling HTTP Request: ${url} ${sysadmin ? "as sysadmin" : ""}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.audit), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(audit => this.log(`fetched ${audit.length} Audits `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboAudit', [])));
    }
    /** GET VC Audits from the server */
    getVisboCenterAudits(vcid, sysadmin = false, deleted = false, queryAudit = undefined) {
        var url = this.serviceBaseUrl.concat('/vc/', vcid, '/audit');
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        if (queryAudit) {
            if (queryAudit.from)
                params = params.append('from', queryAudit.from.toISOString());
            if (queryAudit.to)
                params = params.append('to', queryAudit.to.toISOString());
            if (queryAudit.text)
                params = params.append('text', queryAudit.text);
            if (queryAudit.maxcount)
                params = params.append('maxcount', queryAudit.maxcount.toString());
            if (queryAudit.actionType)
                params = params.append('action', queryAudit.actionType);
            if (queryAudit.area)
                params = params.append('area', queryAudit.area);
        }
        this.log(`Calling HTTP Request: ${url} for VC ${vcid}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.audit), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(audit => this.log(`fetched ${audit.length} Audits `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboAudit', [])));
    }
    /** GET VP Audits from the server */
    getVisboProjectAudits(vpid, sysadmin = false, deleted = false, queryAudit = undefined) {
        var url = this.serviceBaseUrl.concat('/vp/', vpid, '/audit');
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        if (queryAudit) {
            if (queryAudit.from)
                params = params.append('from', queryAudit.from.toISOString());
            if (queryAudit.to)
                params = params.append('to', queryAudit.to.toISOString());
            if (queryAudit.text)
                params = params.append('text', queryAudit.text);
            if (queryAudit.maxcount)
                params = params.append('maxcount', queryAudit.maxcount.toString());
            if (queryAudit.actionType)
                params = params.append('action', queryAudit.actionType);
            if (queryAudit.area)
                params = params.append('area', queryAudit.area);
        }
        this.log(`Calling HTTP Request: ${url} for VP ${vpid}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.audit), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(audit => this.log(`fetched ${audit.length} Audits `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboAudit', [])));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboAuditService: ' + message);
    }
};
VisboAuditService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
VisboAuditService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], VisboAuditService);



/***/ }),

/***/ "./src/app/_services/visbocenter.service.ts":
/*!**************************************************!*\
  !*** ./src/app/_services/visbocenter.service.ts ***!
  \**************************************************/
/*! exports provided: VisboCenterService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboCenterService", function() { return VisboCenterService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs




const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let VisboCenterService = class VisboCenterService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        //   private vcUrl = 'vc';  // URL to api on same server
        this.vcUrl = this.env.restUrl.concat('/vc'); // URL to web api
        this.combinedPerm = undefined;
        this.systemVC = undefined;
    }
    /** GET VisboCenters from the server */
    getVisboCenters(sysadmin = false, deleted = false) {
        var url = this.vcUrl;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vc), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbocenters => this.log(`fetched ${visbocenters.length} VisboCenters `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboCenters', [])));
    }
    /** GET VisboCenters from the server */
    getSysVisboCenter() {
        var url = this.vcUrl + '?systemvc=true&sysadmin=1';
        var sysVCRole = undefined;
        var currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
        this.log(`Calling HTTP Request for SysVC: ${url} for user ${currentUser.email}`);
        return this.http.get(url, httpOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            this.log(`fetched System VisboCenter ${JSON.stringify(response)}`);
            if (response.vc && response.vc.length > 0) {
                response.vc[0].perm = response.perm;
                this.combinedPerm = response.perm;
                sessionStorage.setItem('combinedPerm', JSON.stringify(response.perm));
                sessionStorage.setItem('systemVC', response.vc[0]._id);
            }
            return response.vc;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbocenters => {
            this.log(`fetched System VisboCenter user Role is ${visbocenters[0].perm.system || 'None'}`);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getSysVisboCenters', [])));
    }
    /* Role of User in sysAdmin */
    getSysAdminRole() {
        var result;
        if (this.combinedPerm == undefined)
            result = JSON.parse(sessionStorage.getItem('combinedPerm'));
        else
            result = this.combinedPerm;
        this.log(`SysAdmin Role: ${JSON.stringify(result)}`);
        return result;
    }
    /* VCID of System */
    getSysVCId() {
        var result;
        if (this.systemVC == undefined)
            result = sessionStorage.getItem('systemVC');
        else
            result = this.systemVC;
        this.log(`Sysem VC ID: ${result}`);
        return result;
    }
    /** GET VisboCenter by id. Return `undefined` when id not found */
    /** Check that 404 is called correctly, currently rest server delivers 500 instead of 404 */
    // getVisboCenterNo404<Data>(id: string): Observable<VisboCenter> {
    //   const url = `${this.vcUrl}/?id=${id}`;
    //   this.log(`Calling HTTP Request: ${this.vcUrl}`);
    //   return this.http.get<VisboCenter[]>(url)
    //     .pipe(
    //       map(visbocenters => visbocenters[0]), // returns a {0|1} element array
    //       tap(h => {
    //         var outcome = h ? `fetched` : `did not find`;
    //         this.log(`${outcome} VisboCenter ${id}`);
    //       }),
    //       catchError(this.handleError<VisboCenter>(`getVisboCenter id: ${id}`))
    //     );
    // }
    /** GET VisboCenter by id. Will 404 if id not found */
    getVisboCenter(id, sysadmin = false, deleted = false) {
        var url = `${this.vcUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url}`);
        return this.http.get(url, { headers, params }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            // TODO: is there a better way to transfer the perm?
            response.vc[0].perm = response.perm;
            return response.vc[0];
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbocenter => this.log(`fetched VC ${visbocenter.name} id:${id} perm:${JSON.stringify(visbocenter.perm)}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVisboCenter id:${id}`)));
    }
    /* GET VisboCenters whose name contains search term */
    // searchVisboCenters(term: string): Observable<VisboCenter[]> {
    //   if (!term.trim()) {
    //     // if not search term, return empty visbocenter array.
    //     return of([]);
    //   }
    //   return this.http.get<VisboCenter[]>(`api/visbocenters?name=${term}`).pipe(
    //     tap(_ => this.log(`found VisboCenters matching "${term}"`)),
    //     catchError(this.handleError<VisboCenter[]>('searchVisboCenters', []))
    //   );
    // }
    //////// Save methods //////////
    /** POST: a new Visbo Center to the server */
    addVisboCenter(visbocenter) {
        var url = this.vcUrl + '?sysadmin=1';
        this.log(`Calling HTTP Request: ${url} ${JSON.stringify(visbocenter)}`);
        return this.http.post(url, visbocenter, httpOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vc[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vc => this.log(`added VisboCenter ${vc.name} with id=${vc._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVisboCenter')));
    }
    /** DELETE: delete the Visbo Center from the server */
    deleteVisboCenter(visbocenter, sysadmin = false, deleted = false) {
        const id = visbocenter._id;
        var url = `${this.vcUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.delete(url, { headers, params }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(response => this.log(`deleted VisboCenter id=${id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboCenter')));
    }
    /** PUT: update the Visbo Center on the server */
    updateVisboCenter(visbocenter, sysadmin = false, deleted = false) {
        var url = `${this.vcUrl}/${visbocenter._id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request PUT: ${url} `);
        return this.http.put(url, visbocenter, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vc[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vc => this.log(`updated VisboCenter ${vc.name} with id=${vc._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('updateVisboCenter')));
    }
    // GET VisboCenter Users for a specified VC from the server
    getVCUsers(vcid, sysadmin = false, deleted = false) {
        var url = `${this.vcUrl}/${vcid}/group?userlist=1`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request GET Users: ${url} `);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            var userGroupMix = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_6__["VGUserGroupMix"]();
            userGroupMix.users = response.users;
            userGroupMix.groups = response.groups;
            userGroupMix.vpusers = response.vpusers;
            return userGroupMix;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(users => this.log(`fetched Users & Groups Users `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboCenterUsers', [])));
    }
    /** POST: add a new User to the Visbo Center */
    addVCUser(email, groupId, message, vcid, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/group/${groupId}/user`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        var reqBody = {};
        reqBody.email = email;
        reqBody.message = message || '';
        this.log(`Calling HTTP Request: ${url} for ${email} `);
        return this.http.post(url, reqBody, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`added Visbo User to Group with id=${group._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVCUser')));
    }
    /** DELETE: remove a User from the Visbo Center */
    deleteVCUser(user, vcid, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/group/${user.groupId}/user/${user.userId}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${user.email} as ${user.groupName} `);
        return this.http.delete(url, httpOptions)
            .pipe(
        // map(response => response.vc[0].users),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(users => this.log(`deleted Visbo Center User ${user.email}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboCenterUser')));
    }
    /** POST: add a new Group to the Visbo Center */
    addVCGroup(newGroup, sysadmin = false) {
        var url = `${this.vcUrl}/${newGroup.vcid}/group`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${newGroup.name} `);
        return this.http.post(url, newGroup, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`added Visbo Group with id=${group._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVCGroup')));
    }
    /** PUT: modify a VC Group in the Visbo Center (Change: Name, Global, Permission)*/
    modifyVCGroup(actGroup, sysadmin = false) {
        var url = `${this.vcUrl}/${actGroup.vcid}/group/${actGroup._id}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${actGroup.name} Perm: ${JSON.stringify(actGroup.permission)} `);
        return this.http.put(url, actGroup, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`modified Visbo Group with id=${JSON.stringify(group)}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVCGroup')));
    }
    /** DELETE: remove a Group from the Visbo Center */
    deleteVCGroup(group, sysadmin = false) {
        var url = `${this.vcUrl}/${group.vcid}/group/${group._id}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for Group ${group.name} `);
        return this.http.delete(url, httpOptions)
            .pipe(
        // map(response => response.vc[0].users),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(groups => this.log(`deleted Visbo Center Group ${group.name}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboCenterGroup')));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        this.log(`HTTP Request ${operation} failed. Result ${JSON.stringify(result)}`);
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboCenterService: ' + message);
    }
};
VisboCenterService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_7__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
VisboCenterService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], VisboCenterService);



/***/ }),

/***/ "./src/app/_services/visboproject.service.ts":
/*!***************************************************!*\
  !*** ./src/app/_services/visboproject.service.ts ***!
  \***************************************************/
/*! exports provided: VisboProjectService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectService", function() { return VisboProjectService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs




const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let VisboProjectService = class VisboProjectService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        //   private vpUrl = 'projects';  // URL to web api on same server
        this.vpUrl = this.env.restUrl.concat('/vp'); // URL to web api
    }
    /** GET VisboProjects from the server if id is specified get only projects of this vcid*/
    getVisboProjects(id, sysAdmin = false, deleted = false) {
        const url = `${this.vpUrl}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (id)
            params = params.append('vcid', id);
        if (sysAdmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`VP getVisboProjects Sysadmin ${sysAdmin} Deleted ${deleted}`);
        // this.log(`Calling HTTP Request: ${url} Options: ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vp), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboprojects => this.log(`fetched ${visboprojects.length} VisboProjects `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboProjects', [])));
    }
    /** GET VisboProject by id. Return `undefined` when id not found */
    /** Check that 404 is called correctly, currently rest server delivers 500 instead of 404 */
    getVisboProjectNo404(id) {
        const url = `${this.vpUrl}`;
        this.log(`Calling HTTP Request: ${this.vpUrl}`);
        return this.http.get(url)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(visboprojects => visboprojects[0]), // returns a {0|1} element array
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(h => {
            const outcome = h ? `fetched` : `did not find`;
            this.log(`getVisboProject404 ${outcome} VisboProject id=${id}`);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVisboProject id=${id}`)));
    }
    /** GET VisboProject by id. Will 404 if id not found */
    getVisboProject(id, sysAdmin = false, deleted = false) {
        const url = `${this.vpUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysAdmin)
            params = params.append('sysadmin', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url} params ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            // TODO: is there a better way to transfer the perm?
            response.vp[0].perm = response.perm;
            return response.vp[0];
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboproject => this.log(`fetched vp id=${visboproject._id} ${visboproject.name}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVisboProject id=${id}`)));
    }
    /* GET VisboProjects whose name contains search term */
    // searchVisboProjects(term: string): Observable<VisboProject[]> {
    //   if (!term.trim()) {
    //     // if not search term, return empty visboproject array.
    //     return of([]);
    //   }
    //   return this.http.get<VisboProject[]>(`api/visboprojects?name=${term}`).pipe(
    //     tap(_ => this.log(`found VisboProjects matching "${term}"`)),
    //     catchError(this.handleError<VisboProject[]>('searchVisboProjects', []))
    //   );
    // }
    //////// Save methods //////////
    /** POST: add a new Visbo Project to the server */
    addVisboProject(visboproject) {
        return this.http.post(this.vpUrl, visboproject, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vp[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vp => this.log(`added VisboProject with id=${vp._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVisboProject')));
    }
    /** DELETE: delete the Visbo Project from the server */
    deleteVisboProject(visboproject, deleted = false) {
        //const id = typeof visboproject === 'number' ? visboproject : visboproject._id;
        const id = visboproject._id;
        const url = `${this.vpUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.delete(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(_ => this.log(`deleted VisboProject id=${id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboProject')));
    }
    /** PUT: update the Visbo Project on the server */
    updateVisboProject(visboproject, deleted = false) {
        const url = `${this.vpUrl}/${visboproject._id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request PUT: ${url} `);
        return this.http.put(url, visboproject, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vp[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(_ => this.log(`updated VisboProject id=${visboproject._id} url=${this.vpUrl}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('updateVisboProject')));
    }
    // GET VisboProject Users for a specified VP from the server
    getVPUsers(vpid, sysadmin = false, deleted = false) {
        var url = `${this.vpUrl}/${vpid}/group?userlist=1`;
        if (sysadmin) {
            url = url.concat('&sysadmin=1');
        }
        if (deleted) {
            url = url.concat('&deleted=1');
        }
        this.log(`Calling HTTP Request GET: ${url} `);
        return this.http.get(url, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            var userGroupMix = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_6__["VGUserGroupMix"]();
            userGroupMix.users = response.users;
            userGroupMix.groups = response.groups;
            return userGroupMix;
        }), 
        // tap(users => this.log(`fetched Users & Groups Users `)),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboProjectUsers', [])));
    }
    /** POST: add a new User to the Visbo Project */
    addVPUser(email, groupId, message, vpid, sysadmin = false) {
        var url = `${this.vpUrl}/${vpid}/group/${groupId}/user`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        var reqBody = {};
        reqBody.email = email;
        reqBody.message = message;
        this.log(`Calling HTTP Request: ${url} for ${email} `);
        return this.http.post(url, reqBody, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`added Visbo User to Group with id=${group._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVPUser')));
    }
    /** DELETE: remove a User from the Visbo Project */
    deleteVPUser(user, vpid, sysadmin = false) {
        var url = `${this.vpUrl}/${vpid}/group/${user.groupId}/user/${user.userId}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${user.email} as ${user.groupName} `);
        return this.http.delete(url, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(users => this.log(`deleted Visbo Project User ${user.email}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboProjectUser')));
    }
    /** POST: add a new Group to the Visbo Project */
    addVPGroup(newGroup, sysadmin = false) {
        var url = `${this.vpUrl}/${newGroup.vpids[0]}/group`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${newGroup.name} `);
        return this.http.post(url, newGroup, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`added Visbo Group with id=${group._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVPGroup')));
    }
    /** PUT: modify a VP Group in the Visbo Project (Change: Name, Global, Permission)*/
    modifyVPGroup(actGroup, sysadmin = false) {
        var url = `${this.vpUrl}/${actGroup.vpids[0]}/group/${actGroup._id}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for ${actGroup.name} Perm: ${JSON.stringify(actGroup.permission)} `);
        return this.http.put(url, actGroup, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.groups[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(group => this.log(`modified Visbo Group with id=${JSON.stringify(group)}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVPGroup')));
    }
    /** DELETE: remove a Group from the Visbo Project */
    deleteVPGroup(group, vpid, sysadmin = false) {
        var url = `${this.vpUrl}/${vpid}/group/${group._id}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for Group ${group.name} `);
        return this.http.delete(url, httpOptions)
            .pipe(
        // map(response => response.vc[0].users),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(groups => this.log(`deleted Visbo Project Group ${group.name}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboProjectGroup')));
    }
    /** DELETE: unlock Visbo Project Variant */
    unlockVP(variantName, vpid, sysadmin = false) {
        var url = `${this.vpUrl}/${vpid}/lock?variantName=${variantName}`;
        if (sysadmin)
            url = url.concat('?sysadmin=1');
        this.log(`Calling HTTP Request: ${url} for Lock ${variantName} `);
        return this.http.delete(url, httpOptions)
            .pipe(
        // map(response => response.vc[0].users),
        Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(lock => this.log(`deleted Visbo Project Lock ${variantName}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboProjectLock')));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request failed: ${error.error.message} ${error.status}`);
            // send the error to remote logging infrastructure
            this.log(`${operation} failed: ${error.error.message}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectService: ' + message);
    }
};
VisboProjectService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_7__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
VisboProjectService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], VisboProjectService);



/***/ }),

/***/ "./src/app/_services/visboprojectversion.service.ts":
/*!**********************************************************!*\
  !*** ./src/app/_services/visboprojectversion.service.ts ***!
  \**********************************************************/
/*! exports provided: VisboProjectVersionService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectVersionService", function() { return VisboProjectVersionService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs_observable_of__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/observable/of */ "./node_modules/rxjs-compat/_esm2015/observable/of.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visboprojectversion */ "./src/app/_models/visboprojectversion.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");







// import { VisboCenter } from '../_models/visbocenter';


const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let VisboProjectVersionService = class VisboProjectVersionService {
    constructor(http, messageService, authenticationService, env) {
        this.http = http;
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.env = env;
        this.vpvUrl = this.env.restUrl.concat('/vpv'); // URL to web api
        this.vpfUrl = this.env.restUrl.concat('/vp'); // URL to web api
    }
    /** GET VisboProjectVersions from the server if id is specified get only projects of this vpid*/
    getVisboProjectVersions(id, deleted = false, variantName = undefined, keyMetrics = false) {
        const url = `${this.vpvUrl}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (id)
            params = params.append('vpid', id);
        if (deleted)
            params = params.append('deleted', '1');
        if (variantName != undefined)
            params = params.append('variantName', variantName);
        if (keyMetrics)
            params = params.append('keyMetrics', '1');
        this.log(`Calling HTTP Request: ${url} Options: ${params}`);
        return this.http.get(this.vpvUrl, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vpv), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboprojectversions => this.log(`fetched ${visboprojectversions.length} VisboProjectVersions `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboProjectVersions', [])));
    }
    /** GET VisboProjectVersion by id. Will 404 if id not found */
    getVisboProjectVersion(id, deleted = false) {
        const url = `${this.vpvUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url} Params ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            // TODO: is there a better way to transfer the perm?
            response.vpv[0].perm = response.perm;
            return response.vpv[0];
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboprojectversion => this.log(`fetched Specific Version `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVisboProjectVersion id=${id}`)));
    }
    /* GET VisboProjectVersions whose name contains search term */
    // searchVisboProjectVersions(term: string): Observable<VisboProjectVersion[]> {
    //   if (!term.trim()) {
    //     // if not search term, return empty visboprojectversion array.
    //     return of([]);
    //   }
    //   return this.http.get<VisboProjectVersion[]>(`api/visboprojects?name=${term}`).pipe(
    //     tap(_ => this.log(`found VisboProjectVersions matching "${term}"`)),
    //     catchError(this.handleError<VisboProjectVersion[]>('searchVisboProjectVersions', []))
    //   );
    // }
    //////// Save methods //////////
    /** POST: add a new Visbo Project to the server */
    addVisboProjectVersion(visboprojectversion) {
        var newVPV = new _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_7__["VisboProjectVersion"]();
        newVPV.name = visboprojectversion.name;
        return this.http.post(this.vpvUrl, visboprojectversion, httpOptions)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => { return JSON.parse(JSON.stringify(response)).vpv; }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])((visboprojectversion) => this.log(`added VisboProjectVersion w/ id=${visboprojectversion._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVisboProjectVersion')));
    }
    /** DELETE: delete the Visbo Project from the server */
    deleteVisboProjectVersion(visboprojectversion, deleted = false) {
        //const id = typeof visboprojectversion === 'number' ? visboprojectversion : visboprojectversion._id;
        const id = visboprojectversion._id;
        const url = `${this.vpvUrl}/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request Delete: ${url} Params ${params}`);
        return this.http.delete(url, { headers, params }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(_ => this.log(`deleted VisboProjectVersion id=${id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVisboProjectVersion')));
    }
    /** PUT: update the Visbo Project on the server */
    updateVisboProjectVersion(visboprojectversion, deleted = false) {
        const url = `${this.vpvUrl}/${visboprojectversion._id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request PUT: ${url} Params ${params}`);
        return this.http.put(url, visboprojectversion, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(_ => this.log(`updated VisboProjectVersion id=${visboprojectversion._id} url=${this.vpvUrl}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('updateVisboProjectVersion')));
    }
    /** GET getVisboPortfolioVersions from the server if id is specified get only projects of this vpid*/
    getVisboPortfolioVersions(id, deleted = false) {
        const url = `${this.vpfUrl}/${id}/portfolio`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request: ${url} Options: ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            // TODO: is there a better way to transfer the perm?
            response.vpf[0].perm = response.perm;
            return response.vpf;
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboportfolioversion => this.log(`fetched ${visboportfolioversion.length} VisboPortfolioVersion `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboPortfolioVersions', [])));
    }
    /** GET getVisboPortfolioVersions from the server if id is specified get only projects of this vpid*/
    getVisboPortfolioKeyMetrics(id, refDate = new Date(), deleted = false) {
        const url = `${this.vpvUrl}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        params = params.append('vpfid', id);
        params = params.append('refDate', refDate.toISOString());
        params = params.append('keyMetrics', '1');
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request: ${url} Options: ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vpv), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vpv => this.log(`fetched ${vpv.length} VisboPortfolio Project Versions `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboPortfoliokeyMetrics', [])));
    }
    /** GET VisboProjectVersion by id. Will 404 if id not found */
    getVisboPortfolioVersion(id, deleted = false) {
        const url = `${this.vpfUrl}/${id}/portfolio`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (deleted)
            params = params.append('deleted', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url} Params ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            // TODO: is there a better way to transfer the perm?
            // response.vpf[0].perm = response.perm;
            return response.vpf[0];
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboportfolioversion => this.log(`fetched Specific Portfolio Version `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVisboPortfolioVersion id=${id}`)));
    }
    /** GET CostCalculation from the server for the specified vpv id */
    getCost(id) {
        const url = `${this.vpvUrl}/${id}/calc`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        // if (id) params = params.append('vpid', id);
        // if (deleted) params = params.append('deleted', '1');
        // if (variantName != undefined) params = params.append('variantName', variantName);
        // if (keyMetrics) params = params.append('keyMetrics', '1');
        this.log(`Calling HTTP Request: ${url} Options: ${params}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vpv), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visboprojectversions => this.log(`fetched ${visboprojectversions.length} VisboProjectVersions `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVisboProjectVersions', [])));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            // send the error to remote logging infrastructure
            this.log(`HTTP Request ${operation} failed: ${error.message} ${error.status}`);
            // better job of transforming error for user consumption
            // Let the app keep running by returning an empty result.
            return Object(rxjs_observable_of__WEBPACK_IMPORTED_MODULE_3__["of"])(result);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectVersionService: ' + message);
    }
};
VisboProjectVersionService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_8__["MessageService"] },
    { type: _authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_6__["EnvService"] }
];
VisboProjectVersionService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], VisboProjectVersionService);



/***/ }),

/***/ "./src/app/_services/visbosetting.service.ts":
/*!***************************************************!*\
  !*** ./src/app/_services/visbosetting.service.ts ***!
  \***************************************************/
/*! exports provided: VisboSettingService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboSettingService", function() { return VisboSettingService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm2015/operators/index.js");
/* harmony import */ var _env_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./env.service */ "./src/app/_services/env.service.ts");
/* harmony import */ var _message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./message.service */ "./src/app/_services/message.service.ts");



 // only need to import from rxjs



const httpOptions = {
    headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' })
};
let VisboSettingService = class VisboSettingService {
    constructor(http, messageService, env) {
        this.http = http;
        this.messageService = messageService;
        this.env = env;
        this.vcUrl = this.env.restUrl.concat('/vc'); // URL to web api
    }
    /** GET VCSettings from the server */
    getVCSettings(vcid, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/setting`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vcsetting), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbosettings => this.log(`fetched ${visbosettings.length} VCSettings `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVCSettings', [])));
    }
    /** GET VCSetting by id. Will 404 if id not found */
    getVCSetting(vcid, id, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/setting/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => {
            return response.vcsetting[0];
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbosetting => this.log(`fetched VC Setting ${visbosetting.name} id:${id} `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError(`getVCSetting id:${id}`)));
    }
    /** GET VCSetting by type */
    getVCSettingByName(vcid, name, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/setting?name=${name}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vcsetting), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbosettings => this.log(`fetched ${visbosettings.length} VCSettings `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVCSettings by Name', [])));
    }
    /** GET VCSetting by type */
    getVCSettingByType(vcid, type, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/setting?type=${type}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request for a specific entry: ${url}`);
        return this.http.get(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vcsetting), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(visbosettings => this.log(`fetched ${visbosettings.length} VCSettings `)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('getVCSettings by Type', [])));
    }
    //////// Save methods //////////
    /** POST: a new Visbo Center Setting to the server */
    addVCSetting(vcid, visbosetting, sysadmin = false) {
        var url = `${this.vcUrl}/${vcid}/setting`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request: ${url} ${JSON.stringify(visbosetting)}`);
        var url = this.vcUrl + '?sysadmin=1';
        return this.http.post(url, visbosetting, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vcsetting[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vcsetting => this.log(`added VCSetting ${vcsetting.name} with id=${vcsetting._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('addVCSetting')));
    }
    /** DELETE: delete the Visbo Center Setting from the server */
    deleteVCSetting(vcid, visbosetting, sysadmin = false) {
        //const id = typeof visbosetting === 'number' ? visbosetting : visbosetting._id;
        const id = visbosetting._id;
        var url = `${this.vcUrl}/${vcid}/setting/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request: ${url} `);
        return this.http.delete(url, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(response => this.log(`deleted VCSetting id=${id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('deleteVCSetting')));
    }
    /** PUT: update the Visbo Center Setting on the server */
    updateVCSetting(vcid, visbosetting, sysadmin = false) {
        const id = visbosetting._id;
        var url = `${this.vcUrl}/${vcid}/setting/${id}`;
        let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpHeaders"]({ 'Content-Type': 'application/json' });
        let params = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpParams"]();
        if (sysadmin)
            params = params.append('sysadmin', '1');
        this.log(`Calling HTTP Request PUT: ${url} `);
        return this.http.put(url, visbosetting, { headers, params })
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(response => response.vcsetting[0]), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(vcsetting => this.log(`updated VCSetting ${vcsetting.name} with id=${vcsetting._id}`)), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(this.handleError('updateVCSetting')));
    }
    /**
     * Handle Http operation that failed.
     * Let the app continue.
     * @param operation - name of the operation that failed
     * @param result - optional value to return as the observable result
     */
    handleError(operation = 'operation', result) {
        return (error) => {
            this.log(`HTTP Request ${operation} failed: ${error.error.message} status:${error.status}`);
            // Let the app keep running by returning an empty result.
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])(error);
            // return new ErrorObservable(error);
        };
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboSettingService: ' + message);
    }
};
VisboSettingService.ctorParameters = () => [
    { type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"] },
    { type: _message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _env_service__WEBPACK_IMPORTED_MODULE_5__["EnvService"] }
];
VisboSettingService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])()
], VisboSettingService);



/***/ }),

/***/ "./src/app/app-routing.module.ts":
/*!***************************************!*\
  !*** ./src/app/app-routing.module.ts ***!
  \***************************************/
/*! exports provided: AppRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppRoutingModule", function() { return AppRoutingModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _login_login_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./login/login.component */ "./src/app/login/login.component.ts");
/* harmony import */ var _register_register_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./register/register.component */ "./src/app/register/register.component.ts");
/* harmony import */ var _registerconfirm_registerconfirm_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./registerconfirm/registerconfirm.component */ "./src/app/registerconfirm/registerconfirm.component.ts");
/* harmony import */ var _guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./_guards/auth.guard */ "./src/app/_guards/auth.guard.ts");
/* harmony import */ var _pwforgotten_pwforgotten_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pwforgotten/pwforgotten.component */ "./src/app/pwforgotten/pwforgotten.component.ts");
/* harmony import */ var _pwreset_pwreset_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./pwreset/pwreset.component */ "./src/app/pwreset/pwreset.component.ts");
/* harmony import */ var _dashboard_dashboard_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dashboard/dashboard.component */ "./src/app/dashboard/dashboard.component.ts");
/* harmony import */ var _visbocenters_visbocenters_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./visbocenters/visbocenters.component */ "./src/app/visbocenters/visbocenters.component.ts");
/* harmony import */ var _visbocenter_detail_visbocenter_detail_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./visbocenter-detail/visbocenter-detail.component */ "./src/app/visbocenter-detail/visbocenter-detail.component.ts");
/* harmony import */ var _visbocenter_audit_visbocenter_audit_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./visbocenter-audit/visbocenter-audit.component */ "./src/app/visbocenter-audit/visbocenter-audit.component.ts");
/* harmony import */ var _visboproject_audit_visboproject_audit_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./visboproject-audit/visboproject-audit.component */ "./src/app/visboproject-audit/visboproject-audit.component.ts");
/* harmony import */ var _visboprojects_visboprojects_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./visboprojects/visboprojects.component */ "./src/app/visboprojects/visboprojects.component.ts");
/* harmony import */ var _visboproject_detail_visboproject_detail_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./visboproject-detail/visboproject-detail.component */ "./src/app/visboproject-detail/visboproject-detail.component.ts");
/* harmony import */ var _visboprojectversions_visboprojectversions_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./visboprojectversions/visboprojectversions.component */ "./src/app/visboprojectversions/visboprojectversions.component.ts");
/* harmony import */ var _visboprojectversion_detail_visboprojectversion_detail_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./visboprojectversion-detail/visboprojectversion-detail.component */ "./src/app/visboprojectversion-detail/visboprojectversion-detail.component.ts");
/* harmony import */ var _visboportfolio_versions_visboportfolio_versions_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./visboportfolio-versions/visboportfolio-versions.component */ "./src/app/visboportfolio-versions/visboportfolio-versions.component.ts");
/* harmony import */ var _visboproject_keymetrics_visboproject_keymetrics_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./visboproject-keymetrics/visboproject-keymetrics.component */ "./src/app/visboproject-keymetrics/visboproject-keymetrics.component.ts");
/* harmony import */ var _visboproject_viewcost_visboproject_viewcost_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./visboproject-viewcost/visboproject-viewcost.component */ "./src/app/visboproject-viewcost/visboproject-viewcost.component.ts");
/* harmony import */ var _settings_settings_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
/* harmony import */ var _userprofile_userprofile_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./userprofile/userprofile.component */ "./src/app/userprofile/userprofile.component.ts");
/* harmony import */ var _sysvisbosystem_sysvisbosystem_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./sysvisbosystem/sysvisbosystem.component */ "./src/app/sysvisbosystem/sysvisbosystem.component.ts");
/* harmony import */ var _sysvisbocenters_sysvisbocenters_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./sysvisbocenters/sysvisbocenters.component */ "./src/app/sysvisbocenters/sysvisbocenters.component.ts");
/* harmony import */ var _sysvisbocenter_detail_sysvisbocenter_detail_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./sysvisbocenter-detail/sysvisbocenter-detail.component */ "./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.ts");
/* harmony import */ var _sysvisboprojects_sysvisboprojects_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./sysvisboprojects/sysvisboprojects.component */ "./src/app/sysvisboprojects/sysvisboprojects.component.ts");
/* harmony import */ var _sysvisboproject_detail_sysvisboproject_detail_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./sysvisboproject-detail/sysvisboproject-detail.component */ "./src/app/sysvisboproject-detail/sysvisboproject-detail.component.ts");
/* harmony import */ var _sysaudit_sysaudit_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./sysaudit/sysaudit.component */ "./src/app/sysaudit/sysaudit.component.ts");
/* harmony import */ var _sysuser_sysuser_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./sysuser/sysuser.component */ "./src/app/sysuser/sysuser.component.ts");
/* harmony import */ var _syslog_syslog_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./syslog/syslog.component */ "./src/app/syslog/syslog.component.ts");
/* harmony import */ var _systasks_systasks_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./systasks/systasks.component */ "./src/app/systasks/systasks.component.ts");
/* harmony import */ var _sysconfig_sysconfig_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./sysconfig/sysconfig.component */ "./src/app/sysconfig/sysconfig.component.ts");





















// import { VisboPortfolioVersionDetailComponent } from './visboprojectversion-detail/visboprojectversion-detail.component';












const routes = [
    { path: 'login', component: _login_login_component__WEBPACK_IMPORTED_MODULE_3__["LoginComponent"] },
    { path: 'register', component: _register_register_component__WEBPACK_IMPORTED_MODULE_4__["RegisterComponent"] },
    { path: 'registerconfirm', component: _registerconfirm_registerconfirm_component__WEBPACK_IMPORTED_MODULE_5__["RegisterconfirmComponent"] },
    { path: 'register/:id', component: _register_register_component__WEBPACK_IMPORTED_MODULE_4__["RegisterComponent"] },
    { path: 'pwforgotten', component: _pwforgotten_pwforgotten_component__WEBPACK_IMPORTED_MODULE_7__["PwforgottenComponent"] },
    { path: 'pwreset', component: _pwreset_pwreset_component__WEBPACK_IMPORTED_MODULE_8__["PwresetComponent"] },
    { path: 'dashboard', component: _dashboard_dashboard_component__WEBPACK_IMPORTED_MODULE_9__["DashboardComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vc', component: _visbocenters_visbocenters_component__WEBPACK_IMPORTED_MODULE_10__["VisboCentersComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vcDetail/:id', component: _visbocenter_detail_visbocenter_detail_component__WEBPACK_IMPORTED_MODULE_11__["VisbocenterDetailComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vcAudit/:id', component: _visbocenter_audit_visbocenter_audit_component__WEBPACK_IMPORTED_MODULE_12__["VisbocenterAuditComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vp', component: _visboprojects_visboprojects_component__WEBPACK_IMPORTED_MODULE_14__["VisboProjectsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vp/:id', component: _visboprojects_visboprojects_component__WEBPACK_IMPORTED_MODULE_14__["VisboProjectsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpDetail/:id', component: _visboproject_detail_visboproject_detail_component__WEBPACK_IMPORTED_MODULE_15__["VisboprojectDetailComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpAudit/:id', component: _visboproject_audit_visboproject_audit_component__WEBPACK_IMPORTED_MODULE_13__["VisboprojectAuditComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpKeyMetrics/:id', component: _visboproject_keymetrics_visboproject_keymetrics_component__WEBPACK_IMPORTED_MODULE_19__["VisboProjectKeyMetricsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpViewCost/:id', component: _visboproject_viewcost_visboproject_viewcost_component__WEBPACK_IMPORTED_MODULE_20__["VisboProjectViewCostComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpv', component: _visboprojectversions_visboprojectversions_component__WEBPACK_IMPORTED_MODULE_16__["VisboProjectVersionsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpv/:id', component: _visboprojectversions_visboprojectversions_component__WEBPACK_IMPORTED_MODULE_16__["VisboProjectVersionsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpvDetail/:id', component: _visboprojectversion_detail_visboprojectversion_detail_component__WEBPACK_IMPORTED_MODULE_17__["VisboProjectVersionDetailComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'vpf/:id', component: _visboportfolio_versions_visboportfolio_versions_component__WEBPACK_IMPORTED_MODULE_18__["VisboPortfolioVersionsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'settings', component: _settings_settings_component__WEBPACK_IMPORTED_MODULE_21__["SettingsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'profile', component: _userprofile_userprofile_component__WEBPACK_IMPORTED_MODULE_22__["UserProfileComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysadmins', component: _sysvisbosystem_sysvisbosystem_component__WEBPACK_IMPORTED_MODULE_23__["SysvisbosystemComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysvc', component: _sysvisbocenters_sysvisbocenters_component__WEBPACK_IMPORTED_MODULE_24__["SysVisboCentersComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysvcDetail/:id', component: _sysvisbocenter_detail_sysvisbocenter_detail_component__WEBPACK_IMPORTED_MODULE_25__["SysvisbocenterDetailComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysvp/:id', component: _sysvisboprojects_sysvisboprojects_component__WEBPACK_IMPORTED_MODULE_26__["SysVisboProjectsComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysvpDetail/:id', component: _sysvisboproject_detail_sysvisboproject_detail_component__WEBPACK_IMPORTED_MODULE_27__["SysvisboprojectDetailComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysaudit', component: _sysaudit_sysaudit_component__WEBPACK_IMPORTED_MODULE_28__["SysauditComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysuser', component: _sysuser_sysuser_component__WEBPACK_IMPORTED_MODULE_29__["SysuserComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'syslog', component: _syslog_syslog_component__WEBPACK_IMPORTED_MODULE_30__["SysLogComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'systasks', component: _systasks_systasks_component__WEBPACK_IMPORTED_MODULE_31__["SystasksComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: 'sysconfig', component: _sysconfig_sysconfig_component__WEBPACK_IMPORTED_MODULE_32__["SysconfigComponent"], canActivate: [_guards_auth_guard__WEBPACK_IMPORTED_MODULE_6__["AuthGuard"]] },
    { path: '', redirectTo: '/dashboard', pathMatch: 'full' }
];
let AppRoutingModule = class AppRoutingModule {
};
AppRoutingModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        imports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"].forRoot(routes)],
        exports: [_angular_router__WEBPACK_IMPORTED_MODULE_2__["RouterModule"]]
    })
], AppRoutingModule);



/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_services/alert.service */ "./src/app/_services/alert.service.ts");





let AppComponent = class AppComponent {
    constructor(messageService, authenticationService, alertService) {
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        // title = 'Your Projects served with Visbo ';
        this.version = '1.3';
        this.restVersionString = 'V undefined';
        this.restUIVersionString = 'V undefined';
    }
    ngOnInit() {
        this.restVersion();
        // this.pwPolicy();
    }
    restVersion() {
        this.authenticationService.restVersion()
            .subscribe(data => {
            this.log(`Version Status check result ${JSON.stringify(data)}`);
            if (data.version)
                this.restVersionString = data.version;
            if (data.versionUI)
                this.restUIVersionString = data.versionUI;
            this.log(`Version Status check success ${data.version}/${this.restVersionString} UI ${data.versionUI}/${this.restUIVersionString}`);
        }, error => {
            this.log(`Version Status check Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    pwPolicy() {
        this.authenticationService.initPWPolicy()
            .subscribe(data => {
            this.log(`Init PW Policy success`);
        }, error => {
            this.log(`Init PW Policy Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('App: ' + message);
    }
};
AppComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_2__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
AppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-root',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./app.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/app.component.html")).default
    })
], AppComponent);



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm2015/forms.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm2015/http.js");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./app-routing.module */ "./src/app/app-routing.module.ts");
/* harmony import */ var _login_login_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./login/login.component */ "./src/app/login/login.component.ts");
/* harmony import */ var _directives_alert_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./_directives/alert.component */ "./src/app/_directives/alert.component.ts");
/* harmony import */ var _guards_auth_guard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./_guards/auth.guard */ "./src/app/_guards/auth.guard.ts");
/* harmony import */ var _helpers_jwt_interceptor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./_helpers/jwt.interceptor */ "./src/app/_helpers/jwt.interceptor.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_user_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./_services/user.service */ "./src/app/_services/user.service.ts");
/* harmony import */ var _register_register_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./register/register.component */ "./src/app/register/register.component.ts");
/* harmony import */ var _registerconfirm_registerconfirm_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./registerconfirm/registerconfirm.component */ "./src/app/registerconfirm/registerconfirm.component.ts");
/* harmony import */ var _pwforgotten_pwforgotten_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./pwforgotten/pwforgotten.component */ "./src/app/pwforgotten/pwforgotten.component.ts");
/* harmony import */ var _pwreset_pwreset_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./pwreset/pwreset.component */ "./src/app/pwreset/pwreset.component.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _navbar_navbar_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./navbar/navbar.component */ "./src/app/navbar/navbar.component.ts");
/* harmony import */ var _messages_messages_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./messages/messages.component */ "./src/app/messages/messages.component.ts");
/* harmony import */ var _logouttimer_logouttimer_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./logouttimer/logouttimer.component */ "./src/app/logouttimer/logouttimer.component.ts");
/* harmony import */ var _settings_settings_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
/* harmony import */ var _userprofile_userprofile_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./userprofile/userprofile.component */ "./src/app/userprofile/userprofile.component.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _visbocenters_visbocenters_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./visbocenters/visbocenters.component */ "./src/app/visbocenters/visbocenters.component.ts");
/* harmony import */ var _visbocenter_detail_visbocenter_detail_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./visbocenter-detail/visbocenter-detail.component */ "./src/app/visbocenter-detail/visbocenter-detail.component.ts");
/* harmony import */ var _visbocenter_audit_visbocenter_audit_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./visbocenter-audit/visbocenter-audit.component */ "./src/app/visbocenter-audit/visbocenter-audit.component.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./_services/visboaudit.service */ "./src/app/_services/visboaudit.service.ts");
/* harmony import */ var _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./_services/visbosetting.service */ "./src/app/_services/visbosetting.service.ts");
/* harmony import */ var _services_sysuser_service__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./_services/sysuser.service */ "./src/app/_services/sysuser.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _visboprojects_visboprojects_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./visboprojects/visboprojects.component */ "./src/app/visboprojects/visboprojects.component.ts");
/* harmony import */ var _visboproject_detail_visboproject_detail_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./visboproject-detail/visboproject-detail.component */ "./src/app/visboproject-detail/visboproject-detail.component.ts");
/* harmony import */ var _visboproject_audit_visboproject_audit_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./visboproject-audit/visboproject-audit.component */ "./src/app/visboproject-audit/visboproject-audit.component.ts");
/* harmony import */ var _visboproject_keymetrics_visboproject_keymetrics_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./visboproject-keymetrics/visboproject-keymetrics.component */ "./src/app/visboproject-keymetrics/visboproject-keymetrics.component.ts");
/* harmony import */ var _visboproject_viewcost_visboproject_viewcost_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./visboproject-viewcost/visboproject-viewcost.component */ "./src/app/visboproject-viewcost/visboproject-viewcost.component.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _visboprojectversions_visboprojectversions_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./visboprojectversions/visboprojectversions.component */ "./src/app/visboprojectversions/visboprojectversions.component.ts");
/* harmony import */ var _visboprojectversion_detail_visboprojectversion_detail_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./visboprojectversion-detail/visboprojectversion-detail.component */ "./src/app/visboprojectversion-detail/visboprojectversion-detail.component.ts");
/* harmony import */ var _visboportfolio_versions_visboportfolio_versions_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./visboportfolio-versions/visboportfolio-versions.component */ "./src/app/visboportfolio-versions/visboportfolio-versions.component.ts");
/* harmony import */ var _dashboard_dashboard_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./dashboard/dashboard.component */ "./src/app/dashboard/dashboard.component.ts");
/* harmony import */ var _sysnavbar_sysnavbar_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./sysnavbar/sysnavbar.component */ "./src/app/sysnavbar/sysnavbar.component.ts");
/* harmony import */ var _sysvisbosystem_sysvisbosystem_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./sysvisbosystem/sysvisbosystem.component */ "./src/app/sysvisbosystem/sysvisbosystem.component.ts");
/* harmony import */ var _sysvisbocenters_sysvisbocenters_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./sysvisbocenters/sysvisbocenters.component */ "./src/app/sysvisbocenters/sysvisbocenters.component.ts");
/* harmony import */ var _sysvisbocenter_detail_sysvisbocenter_detail_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./sysvisbocenter-detail/sysvisbocenter-detail.component */ "./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.ts");
/* harmony import */ var _sysvisboprojects_sysvisboprojects_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./sysvisboprojects/sysvisboprojects.component */ "./src/app/sysvisboprojects/sysvisboprojects.component.ts");
/* harmony import */ var _sysvisboproject_detail_sysvisboproject_detail_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./sysvisboproject-detail/sysvisboproject-detail.component */ "./src/app/sysvisboproject-detail/sysvisboproject-detail.component.ts");
/* harmony import */ var _sysaudit_sysaudit_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./sysaudit/sysaudit.component */ "./src/app/sysaudit/sysaudit.component.ts");
/* harmony import */ var _sysuser_sysuser_component__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./sysuser/sysuser.component */ "./src/app/sysuser/sysuser.component.ts");
/* harmony import */ var _syslog_syslog_component__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./syslog/syslog.component */ "./src/app/syslog/syslog.component.ts");
/* harmony import */ var _services_syslog_service__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./_services/syslog.service */ "./src/app/_services/syslog.service.ts");
/* harmony import */ var _systasks_systasks_component__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./systasks/systasks.component */ "./src/app/systasks/systasks.component.ts");
/* harmony import */ var _sysconfig_sysconfig_component__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./sysconfig/sysconfig.component */ "./src/app/sysconfig/sysconfig.component.ts");
/* harmony import */ var _helpers_env_service_provider__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./_helpers/env.service.provider */ "./src/app/_helpers/env.service.provider.ts");
/* harmony import */ var _google_chart_google_chart_module__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./google-chart/google-chart.module */ "./src/app/google-chart/google-chart.module.ts");







// import { AngularFontAwesomeModule } from 'angular-font-awesome';
// Authentication

















// Visbo Centers







// Visbo Projects






// Visbo Project Versions



// Visbo Portfolio Versions


// Sys Admin / App Admin














let AppModule = class AppModule {
};
AppModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_2__["NgModule"])({
        declarations: [
            _app_component__WEBPACK_IMPORTED_MODULE_5__["AppComponent"],
            _directives_alert_component__WEBPACK_IMPORTED_MODULE_8__["AlertComponent"],
            _visbocenters_visbocenters_component__WEBPACK_IMPORTED_MODULE_24__["VisboCentersComponent"],
            _visbocenter_detail_visbocenter_detail_component__WEBPACK_IMPORTED_MODULE_25__["VisbocenterDetailComponent"],
            _visbocenter_audit_visbocenter_audit_component__WEBPACK_IMPORTED_MODULE_26__["VisbocenterAuditComponent"],
            _visboprojects_visboprojects_component__WEBPACK_IMPORTED_MODULE_32__["VisboProjectsComponent"],
            _visboproject_detail_visboproject_detail_component__WEBPACK_IMPORTED_MODULE_33__["VisboprojectDetailComponent"],
            _visboproject_audit_visboproject_audit_component__WEBPACK_IMPORTED_MODULE_34__["VisboprojectAuditComponent"],
            _visboproject_keymetrics_visboproject_keymetrics_component__WEBPACK_IMPORTED_MODULE_35__["VisboProjectKeyMetricsComponent"],
            _visboproject_viewcost_visboproject_viewcost_component__WEBPACK_IMPORTED_MODULE_36__["VisboProjectViewCostComponent"],
            _visboprojectversions_visboprojectversions_component__WEBPACK_IMPORTED_MODULE_38__["VisboProjectVersionsComponent"],
            _visboprojectversion_detail_visboprojectversion_detail_component__WEBPACK_IMPORTED_MODULE_39__["VisboProjectVersionDetailComponent"],
            _visboportfolio_versions_visboportfolio_versions_component__WEBPACK_IMPORTED_MODULE_40__["VisboPortfolioVersionsComponent"],
            _messages_messages_component__WEBPACK_IMPORTED_MODULE_19__["MessagesComponent"],
            _logouttimer_logouttimer_component__WEBPACK_IMPORTED_MODULE_20__["LogoutTimerComponent"],
            _settings_settings_component__WEBPACK_IMPORTED_MODULE_21__["SettingsComponent"],
            _userprofile_userprofile_component__WEBPACK_IMPORTED_MODULE_22__["UserProfileComponent"],
            _dashboard_dashboard_component__WEBPACK_IMPORTED_MODULE_41__["DashboardComponent"],
            _navbar_navbar_component__WEBPACK_IMPORTED_MODULE_18__["NavbarComponent"],
            _login_login_component__WEBPACK_IMPORTED_MODULE_7__["LoginComponent"],
            _register_register_component__WEBPACK_IMPORTED_MODULE_13__["RegisterComponent"],
            _registerconfirm_registerconfirm_component__WEBPACK_IMPORTED_MODULE_14__["RegisterconfirmComponent"],
            _pwforgotten_pwforgotten_component__WEBPACK_IMPORTED_MODULE_15__["PwforgottenComponent"],
            _pwreset_pwreset_component__WEBPACK_IMPORTED_MODULE_16__["PwresetComponent"],
            _sysnavbar_sysnavbar_component__WEBPACK_IMPORTED_MODULE_42__["SysNavbarComponent"],
            _sysvisbocenters_sysvisbocenters_component__WEBPACK_IMPORTED_MODULE_44__["SysVisboCentersComponent"],
            _sysvisbosystem_sysvisbosystem_component__WEBPACK_IMPORTED_MODULE_43__["SysvisbosystemComponent"],
            _sysvisbocenter_detail_sysvisbocenter_detail_component__WEBPACK_IMPORTED_MODULE_45__["SysvisbocenterDetailComponent"],
            _sysvisboprojects_sysvisboprojects_component__WEBPACK_IMPORTED_MODULE_46__["SysVisboProjectsComponent"],
            _sysvisboproject_detail_sysvisboproject_detail_component__WEBPACK_IMPORTED_MODULE_47__["SysvisboprojectDetailComponent"],
            _sysaudit_sysaudit_component__WEBPACK_IMPORTED_MODULE_48__["SysauditComponent"],
            _sysuser_sysuser_component__WEBPACK_IMPORTED_MODULE_49__["SysuserComponent"],
            _syslog_syslog_component__WEBPACK_IMPORTED_MODULE_50__["SysLogComponent"],
            _systasks_systasks_component__WEBPACK_IMPORTED_MODULE_52__["SystasksComponent"],
            _sysconfig_sysconfig_component__WEBPACK_IMPORTED_MODULE_53__["SysconfigComponent"]
        ],
        imports: [
            _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["BrowserModule"],
            _angular_forms__WEBPACK_IMPORTED_MODULE_3__["FormsModule"],
            _app_routing_module__WEBPACK_IMPORTED_MODULE_6__["AppRoutingModule"],
            // AngularFontAwesomeModule,
            // MaterialModule,
            _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HttpClientModule"],
            _google_chart_google_chart_module__WEBPACK_IMPORTED_MODULE_55__["GoogleChartModule"]
        ],
        providers: [
            _guards_auth_guard__WEBPACK_IMPORTED_MODULE_9__["AuthGuard"],
            _services_alert_service__WEBPACK_IMPORTED_MODULE_17__["AlertService"],
            _services_authentication_service__WEBPACK_IMPORTED_MODULE_11__["AuthenticationService"],
            _services_user_service__WEBPACK_IMPORTED_MODULE_12__["UserService"],
            _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_27__["VisboCenterService"],
            _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_29__["VisboSettingService"],
            _services_visboproject_service__WEBPACK_IMPORTED_MODULE_31__["VisboProjectService"],
            _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_37__["VisboProjectVersionService"],
            _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_28__["VisboAuditService"],
            _services_sysuser_service__WEBPACK_IMPORTED_MODULE_30__["SysUserService"],
            _services_syslog_service__WEBPACK_IMPORTED_MODULE_51__["SysLogService"],
            {
                provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_4__["HTTP_INTERCEPTORS"],
                useClass: _helpers_jwt_interceptor__WEBPACK_IMPORTED_MODULE_10__["JwtInterceptor"],
                multi: true
            },
            _services_message_service__WEBPACK_IMPORTED_MODULE_23__["MessageService"],
            _helpers_env_service_provider__WEBPACK_IMPORTED_MODULE_54__["EnvServiceProvider"]
        ],
        bootstrap: [
            _app_component__WEBPACK_IMPORTED_MODULE_5__["AppComponent"]
        ]
    })
], AppModule);



/***/ }),

/***/ "./src/app/dashboard/dashboard.component.css":
/*!***************************************************!*\
  !*** ./src/app/dashboard/dashboard.component.css ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/dashboard/dashboard.component.ts":
/*!**************************************************!*\
  !*** ./src/app/dashboard/dashboard.component.ts ***!
  \**************************************************/
/*! exports provided: DashboardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardComponent", function() { return DashboardComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _models_visboproject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visboproject */ "./src/app/_models/visboproject.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");








let DashboardComponent = class DashboardComponent {
    constructor(visbocenterService, visboprojectService, messageService, alertService, route, router) {
        this.visbocenterService = visbocenterService;
        this.visboprojectService = visboprojectService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.visbocenters = [];
        this.visboprojects = [];
    }
    ngOnInit() {
        this.getVisboCenters();
        this.getVisboProjects();
    }
    getVisboCenters() {
        // get top 3 visbo centers ordered by last modification date
        this.visbocenterService.getVisboCenters()
            .subscribe(visbocenters => {
            this.visbocenters = visbocenters.sort(function (vc1, vc2) { return vc1.updatedAt > vc2.updatedAt ? -1 : 1; }).slice(0, 3);
        }, error => {
            console.log('get VCs failed: error: %d message: %s', error.status, error.error.message); // log to console instead
            this.alertService.error(error.error.message);
        });
    }
    getVisboProjects() {
        // get top 3 visbo projects ordered by last modification date
        this.visboprojectService.getVisboProjects(null)
            .subscribe(visboprojects => {
            this.visboprojects = visboprojects.sort(function (vp1, vp2) { return vp1.updatedAt > vp2.updatedAt ? -1 : 1; }).slice(0, 3);
        }, error => {
            console.log('get VPs failed: error: %d message: %s', error.status, error.error.message); // log to console instead
            this.alertService.error(error.error.message);
        });
    }
    gotoClickedVc(visbocenter) {
        // console.log("clicked row %s", visbocenter.name);
        this.router.navigate(['vp/' + visbocenter._id]);
    }
    gotoClickedVcDetail(visbocenter) {
        console.log("clicked row %s", visbocenter.name);
        this.router.navigate(['vcDetail/' + visbocenter._id]);
    }
    gotoClickedVp(visboproject) {
        console.log("clicked row %s", visboproject.name);
        if (visboproject.vpType == _models_visboproject__WEBPACK_IMPORTED_MODULE_6__["VPTYPE"]["Portfolio"]) {
            this.router.navigate(['vpf/' + visboproject._id]);
        }
        else {
            this.router.navigate(['vpKeyMetrics/' + visboproject._id]);
        }
    }
    gotoClickedVpDetail(visboproject) {
        console.log("clicked row %s", visboproject.name);
        this.router.navigate(['vpDetail/' + visboproject._id]);
    }
};
DashboardComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__["VisboCenterService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
DashboardComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-dashboard',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./dashboard.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/dashboard/dashboard.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./dashboard.component.css */ "./src/app/dashboard/dashboard.component.css")).default]
    })
], DashboardComponent);



/***/ }),

/***/ "./src/app/google-chart/bubble-chart/bubble-chart.component.css":
/*!**********************************************************************!*\
  !*** ./src/app/google-chart/bubble-chart/bubble-chart.component.css ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("#divBubbleChart{\n    width: 100%;\n    height: 600px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9nb29nbGUtY2hhcnQvYnViYmxlLWNoYXJ0L2J1YmJsZS1jaGFydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLGFBQWE7QUFDakIiLCJmaWxlIjoiYXBwL2dvb2dsZS1jaGFydC9idWJibGUtY2hhcnQvYnViYmxlLWNoYXJ0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZGl2QnViYmxlQ2hhcnR7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiA2MDBweDtcbn1cbiJdfQ== */");

/***/ }),

/***/ "./src/app/google-chart/bubble-chart/bubble-chart.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/google-chart/bubble-chart/bubble-chart.component.ts ***!
  \*********************************************************************/
/*! exports provided: BubbleChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BubbleChartComponent", function() { return BubbleChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");



let BubbleChartComponent = class BubbleChartComponent {
    constructor(gChartService) {
        this.gChartService = gChartService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
        // this.log(`Google Chart Bubble Chart Init ${JSON.stringify(this.graphData)}`);
    }
    drawChart() {
        // this.log(`Google Chart Bubble Chart Draw ${this.graphData.length}`);
        let chart = new this.gLib.visualization.BubbleChart(document.getElementById('divBubbleChart'));
        let data = new this.gLib.visualization.arrayToDataTable(this.graphData);
        let parentThis = this.parentThis;
        // parentThis.log("Google Chart Bubble Draw/Refresh");
        let options = { 'title': 'Bubble Chart' };
        // The select handler. Call the chart's getSelection() method
        function selectHandler() {
            var selectedItem = chart.getSelection()[0];
            if (parentThis == undefined)
                console.log(`Bubble: The user clicked and this is undefined`);
            else if (selectedItem) {
                var row = selectedItem.row;
                var label = data.getValue(selectedItem.row, 0);
                parentThis.log(`Bubble: The user selected Row ${row} ${label}`);
                parentThis.chartSelectRow(row, label);
            }
        }
        // Listen for the 'select' event, and call my function selectHandler() when
        // the user selects something on the chart.
        this.gLib.visualization.events.addListener(chart, 'select', selectHandler);
        chart.draw(data, this.graphOptions || options);
    }
};
BubbleChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__["GoogleChartService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], BubbleChartComponent.prototype, "graphData", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], BubbleChartComponent.prototype, "graphOptions", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], BubbleChartComponent.prototype, "parentThis", void 0);
BubbleChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-bubble-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./bubble-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/bubble-chart/bubble-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./bubble-chart.component.css */ "./src/app/google-chart/bubble-chart/bubble-chart.component.css")).default]
    })
], BubbleChartComponent);



/***/ }),

/***/ "./src/app/google-chart/column-chart/column-chart.component.css":
/*!**********************************************************************!*\
  !*** ./src/app/google-chart/column-chart/column-chart.component.css ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("#divColumnChart{\n    width: 100%;\n    height: 700px; \n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9nb29nbGUtY2hhcnQvY29sdW1uLWNoYXJ0L2NvbHVtbi1jaGFydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLGFBQWE7QUFDakIiLCJmaWxlIjoiYXBwL2dvb2dsZS1jaGFydC9jb2x1bW4tY2hhcnQvY29sdW1uLWNoYXJ0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZGl2Q29sdW1uQ2hhcnR7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiA3MDBweDsgXG59XG4iXX0= */");

/***/ }),

/***/ "./src/app/google-chart/column-chart/column-chart.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/google-chart/column-chart/column-chart.component.ts ***!
  \*********************************************************************/
/*! exports provided: ColumnChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColumnChartComponent", function() { return ColumnChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");




let ColumnChartComponent = class ColumnChartComponent {
    constructor(gChartService, messageService) {
        this.gChartService = gChartService;
        this.messageService = messageService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
        // this.log(`Google Chart Column Chart Init ${JSON.stringify(this.graphData)}`);
    }
    drawChart() {
        // this.log(`Google Chart Column Chart Draw ${this.graphData.length}`);
        let chart = new this.gLib.visualization.ColumnChart(document.getElementById('divColumnChart'));
        let data = new this.gLib.visualization.arrayToDataTable(this.graphData);
        let options = { 'title': 'Column Chart' };
        chart.draw(data, this.graphOptions || options);
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Column Chart: ' + message);
    }
};
ColumnChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__["GoogleChartService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_2__["MessageService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ColumnChartComponent.prototype, "graphData", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ColumnChartComponent.prototype, "graphOptions", void 0);
ColumnChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-column-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./column-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/column-chart/column-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./column-chart.component.css */ "./src/app/google-chart/column-chart/column-chart.component.css")).default]
    })
], ColumnChartComponent);



/***/ }),

/***/ "./src/app/google-chart/google-chart.module.ts":
/*!*****************************************************!*\
  !*** ./src/app/google-chart/google-chart.module.ts ***!
  \*****************************************************/
/*! exports provided: GoogleChartModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleChartModule", function() { return GoogleChartModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _line_chart_line_chart_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./line-chart/line-chart.component */ "./src/app/google-chart/line-chart/line-chart.component.ts");
/* harmony import */ var _bubble_chart_bubble_chart_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./bubble-chart/bubble-chart.component */ "./src/app/google-chart/bubble-chart/bubble-chart.component.ts");
/* harmony import */ var _scatter_chart_scatter_chart_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scatter-chart/scatter-chart.component */ "./src/app/google-chart/scatter-chart/scatter-chart.component.ts");
/* harmony import */ var _service_service_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./service/service.module */ "./src/app/google-chart/service/service.module.ts");
/* harmony import */ var _pie_chart_pie_chart_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pie-chart/pie-chart.component */ "./src/app/google-chart/pie-chart/pie-chart.component.ts");
/* harmony import */ var _table_chart_table_chart_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./table-chart/table-chart.component */ "./src/app/google-chart/table-chart/table-chart.component.ts");
/* harmony import */ var _column_chart_column_chart_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./column-chart/column-chart.component */ "./src/app/google-chart/column-chart/column-chart.component.ts");










let GoogleChartModule = class GoogleChartModule {
};
GoogleChartModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        declarations: [_line_chart_line_chart_component__WEBPACK_IMPORTED_MODULE_3__["LineChartComponent"], _bubble_chart_bubble_chart_component__WEBPACK_IMPORTED_MODULE_4__["BubbleChartComponent"], _scatter_chart_scatter_chart_component__WEBPACK_IMPORTED_MODULE_5__["ScatterChartComponent"], _pie_chart_pie_chart_component__WEBPACK_IMPORTED_MODULE_7__["PieChartComponent"], _table_chart_table_chart_component__WEBPACK_IMPORTED_MODULE_8__["TableChartComponent"], _column_chart_column_chart_component__WEBPACK_IMPORTED_MODULE_9__["ColumnChartComponent"]],
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"],
            _service_service_module__WEBPACK_IMPORTED_MODULE_6__["ServiceModule"]
        ],
        exports: [_line_chart_line_chart_component__WEBPACK_IMPORTED_MODULE_3__["LineChartComponent"], _bubble_chart_bubble_chart_component__WEBPACK_IMPORTED_MODULE_4__["BubbleChartComponent"], _scatter_chart_scatter_chart_component__WEBPACK_IMPORTED_MODULE_5__["ScatterChartComponent"], _pie_chart_pie_chart_component__WEBPACK_IMPORTED_MODULE_7__["PieChartComponent"], _table_chart_table_chart_component__WEBPACK_IMPORTED_MODULE_8__["TableChartComponent"], _column_chart_column_chart_component__WEBPACK_IMPORTED_MODULE_9__["ColumnChartComponent"]],
        providers: []
    })
], GoogleChartModule);



/***/ }),

/***/ "./src/app/google-chart/line-chart/line-chart.component.css":
/*!******************************************************************!*\
  !*** ./src/app/google-chart/line-chart/line-chart.component.css ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("#divLineChart{\n    width: 100%;\n    height: 500px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9nb29nbGUtY2hhcnQvbGluZS1jaGFydC9saW5lLWNoYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0lBQ1gsYUFBYTtBQUNqQiIsImZpbGUiOiJhcHAvZ29vZ2xlLWNoYXJ0L2xpbmUtY2hhcnQvbGluZS1jaGFydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2RpdkxpbmVDaGFydHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDUwMHB4O1xufVxuIl19 */");

/***/ }),

/***/ "./src/app/google-chart/line-chart/line-chart.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/google-chart/line-chart/line-chart.component.ts ***!
  \*****************************************************************/
/*! exports provided: LineChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineChartComponent", function() { return LineChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");




let LineChartComponent = class LineChartComponent {
    constructor(gChartService, messageService) {
        this.gChartService = gChartService;
        this.messageService = messageService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
        // this.log(`Google Chart Line Chart Init ${JSON.stringify(this.graphData)}`);
    }
    drawChart() {
        // this.log(`Google Chart Line Chart Draw ${this.graphData.length}`);
        let chart = new this.gLib.visualization.LineChart(document.getElementById('divLineChart'));
        let data = new this.gLib.visualization.arrayToDataTable(this.graphData);
        let parentThis = this.parentThis;
        let options = { 'title': 'Line Chart' };
        // The select handler. Call the chart's getSelection() method
        function selectHandler() {
            var list = chart.getSelection();
            if (!list || list.length == 0) {
                console.log(`Chart Line: chartGetSelection is undefined`, list || list.length);
            }
            else {
                var selectedItem = list[0];
                parentThis.log(`Chart Line: The user selected ${JSON.stringify(selectedItem)}`);
                if (parentThis == undefined)
                    console.log(`Chart Line: The user clicked and this is undefined`);
                else if (selectedItem) {
                    var row = selectedItem.row;
                    var col = selectedItem.column;
                    if (row != null && row >= 0) {
                        var label = data.getValue(row, 0);
                        parentThis.chartSelectRow(row, col, label);
                    }
                }
            }
        }
        // Listen for the 'select' event, and call my function selectHandler() when
        // the user selects something on the chart.
        this.gLib.visualization.events.addListener(chart, 'select', selectHandler);
        chart.draw(data, this.graphOptions || options);
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Line Chart: ' + message);
    }
};
LineChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__["GoogleChartService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_2__["MessageService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], LineChartComponent.prototype, "graphData", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], LineChartComponent.prototype, "graphOptions", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], LineChartComponent.prototype, "parentThis", void 0);
LineChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-line-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./line-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/line-chart/line-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./line-chart.component.css */ "./src/app/google-chart/line-chart/line-chart.component.css")).default]
    })
], LineChartComponent);



/***/ }),

/***/ "./src/app/google-chart/pie-chart/pie-chart.component.css":
/*!****************************************************************!*\
  !*** ./src/app/google-chart/pie-chart/pie-chart.component.css ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("#divPieChart{\n    width: 100%;\n    height: 300px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9nb29nbGUtY2hhcnQvcGllLWNoYXJ0L3BpZS1jaGFydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLGFBQWE7QUFDakIiLCJmaWxlIjoiYXBwL2dvb2dsZS1jaGFydC9waWUtY2hhcnQvcGllLWNoYXJ0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZGl2UGllQ2hhcnR7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAzMDBweDtcbn0iXX0= */");

/***/ }),

/***/ "./src/app/google-chart/pie-chart/pie-chart.component.ts":
/*!***************************************************************!*\
  !*** ./src/app/google-chart/pie-chart/pie-chart.component.ts ***!
  \***************************************************************/
/*! exports provided: PieChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PieChartComponent", function() { return PieChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");



let PieChartComponent = class PieChartComponent {
    constructor(gChartService) {
        this.gChartService = gChartService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
        // this.log(`Google Chart Pie Chart Init ${JSON.stringify(this.graphData)}`);
    }
    drawChart() {
        // this.log(`Google Chart Pie Chart Draw ${this.graphData.length}`);
        let chart = new this.gLib.visualization.PieChart(document.getElementById('divPieChart'));
        let data = new this.gLib.visualization.DataTable();
        let parentThis = this.parentThis;
        for (var i = 0; i < this.graphLegend.length; i++) {
            data.addColumn(this.graphLegend[i][0], this.graphLegend[i][1]);
        }
        // data.addColumn('string', 'Accessories');
        // data.addColumn('number', 'Quantity');
        data.addRows(this.graphData);
        let options = {
            'title': 'Pie Chart Title',
            'sliceVisibilityThreshold': .0
        };
        // The select handler. Call the chart's getSelection() method
        function selectHandler() {
            var selectedItem = chart.getSelection()[0];
            if (parentThis)
                console.log(`The user clicked and this is defined`);
            else if (parentThis == undefined)
                console.log(`The user clicked and this is undefined`);
            if (selectedItem) {
                var label = data.getValue(selectedItem.row, 0);
                var value = data.getValue(selectedItem.row, 1);
                parentThis.log(`The user selected Row ${selectedItem.row} ${label} ${value}`);
            }
        }
        // Listen for the 'select' event, and call my function selectHandler() when
        // the user selects something on the chart.
        this.gLib.visualization.events.addListener(chart, 'select', selectHandler);
        chart.draw(data, this.graphOptions || options);
    }
};
PieChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__["GoogleChartService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], PieChartComponent.prototype, "graphData", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], PieChartComponent.prototype, "graphLegend", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], PieChartComponent.prototype, "graphOptions", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], PieChartComponent.prototype, "parentThis", void 0);
PieChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-pie-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./pie-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/pie-chart/pie-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./pie-chart.component.css */ "./src/app/google-chart/pie-chart/pie-chart.component.css")).default]
    })
], PieChartComponent);



/***/ }),

/***/ "./src/app/google-chart/scatter-chart/scatter-chart.component.css":
/*!************************************************************************!*\
  !*** ./src/app/google-chart/scatter-chart/scatter-chart.component.css ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("#divScatterChart{\n    width: 100%;\n    height: 600px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9nb29nbGUtY2hhcnQvc2NhdHRlci1jaGFydC9zY2F0dGVyLWNoYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0lBQ1gsYUFBYTtBQUNqQiIsImZpbGUiOiJhcHAvZ29vZ2xlLWNoYXJ0L3NjYXR0ZXItY2hhcnQvc2NhdHRlci1jaGFydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2RpdlNjYXR0ZXJDaGFydHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDYwMHB4O1xufVxuIl19 */");

/***/ }),

/***/ "./src/app/google-chart/scatter-chart/scatter-chart.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/google-chart/scatter-chart/scatter-chart.component.ts ***!
  \***********************************************************************/
/*! exports provided: ScatterChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScatterChartComponent", function() { return ScatterChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");




let ScatterChartComponent = class ScatterChartComponent {
    constructor(gChartService, messageService) {
        this.gChartService = gChartService;
        this.messageService = messageService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
        // this.log(`Google Chart Scatter Chart Init ${JSON.stringify(this.graphData)}`);
    }
    drawChart() {
        // this.log(`Google Chart Scatter Chart Draw ${this.graphData.length}`);
        let chart = new this.gLib.visualization.ScatterChart(document.getElementById('divScatterChart'));
        let data = new this.gLib.visualization.arrayToDataTable(this.graphData);
        let options = { 'title': 'Scatter Chart' };
        chart.draw(data, this.graphOptions || options);
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Scatter Chart: ' + message);
    }
};
ScatterChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_3__["GoogleChartService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_2__["MessageService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ScatterChartComponent.prototype, "graphData", void 0);
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], ScatterChartComponent.prototype, "graphOptions", void 0);
ScatterChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-scatter-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./scatter-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/scatter-chart/scatter-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./scatter-chart.component.css */ "./src/app/google-chart/scatter-chart/scatter-chart.component.css")).default]
    })
], ScatterChartComponent);



/***/ }),

/***/ "./src/app/google-chart/service/google-chart.service.ts":
/*!**************************************************************!*\
  !*** ./src/app/google-chart/service/google-chart.service.ts ***!
  \**************************************************************/
/*! exports provided: GoogleChartService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleChartService", function() { return GoogleChartService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _service_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./service.module */ "./src/app/google-chart/service/service.module.ts");



let GoogleChartService = class GoogleChartService {
    constructor() {
        this.google = google;
    }
    getGoogle() {
        return this.google;
    }
};
GoogleChartService = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
        providedIn: _service_module__WEBPACK_IMPORTED_MODULE_2__["ServiceModule"]
    })
], GoogleChartService);



/***/ }),

/***/ "./src/app/google-chart/service/service.module.ts":
/*!********************************************************!*\
  !*** ./src/app/google-chart/service/service.module.ts ***!
  \********************************************************/
/*! exports provided: ServiceModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ServiceModule", function() { return ServiceModule; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");



let ServiceModule = class ServiceModule {
};
ServiceModule = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"])({
        declarations: [],
        imports: [
            _angular_common__WEBPACK_IMPORTED_MODULE_2__["CommonModule"]
        ]
    })
], ServiceModule);



/***/ }),

/***/ "./src/app/google-chart/table-chart/table-chart.component.css":
/*!********************************************************************!*\
  !*** ./src/app/google-chart/table-chart/table-chart.component.css ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvZ29vZ2xlLWNoYXJ0L3RhYmxlLWNoYXJ0L3RhYmxlLWNoYXJ0LmNvbXBvbmVudC5jc3MifQ== */");

/***/ }),

/***/ "./src/app/google-chart/table-chart/table-chart.component.ts":
/*!*******************************************************************!*\
  !*** ./src/app/google-chart/table-chart/table-chart.component.ts ***!
  \*******************************************************************/
/*! exports provided: TableChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableChartComponent", function() { return TableChartComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../service/google-chart.service */ "./src/app/google-chart/service/google-chart.service.ts");



let TableChartComponent = class TableChartComponent {
    constructor(gChartService) {
        this.gChartService = gChartService;
        this.gLib = this.gChartService.getGoogle();
        this.gLib.charts.load('current', { 'packages': ['corechart', 'table'] });
        this.gLib.charts.setOnLoadCallback(this.drawChart.bind(this));
    }
    ngOnInit() {
    }
    drawChart() {
        let chart = new this.gLib.visualization.Table(document.getElementById('divTableChart'));
        let data = new this.gLib.visualization.DataTable();
        data.addColumn('string', 'Year');
        data.addColumn('number', 'Sales');
        data.addColumn('number', 'Expenses');
        data.addRows([
            ['2004', 1000, 400],
            ['2005', 1170, 460],
            ['2006', 660, 1120],
            ['2007', 1030, 540]
        ]);
        let options = { 'title': 'Sales Tabular Data',
            'width': '100%',
            'height': '100%' };
        chart.draw(data, options);
    }
};
TableChartComponent.ctorParameters = () => [
    { type: _service_google_chart_service__WEBPACK_IMPORTED_MODULE_2__["GoogleChartService"] }
];
TableChartComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-table-chart',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./table-chart.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/google-chart/table-chart/table-chart.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./table-chart.component.css */ "./src/app/google-chart/table-chart/table-chart.component.css")).default]
    })
], TableChartComponent);



/***/ }),

/***/ "./src/app/login/login.component.ts":
/*!******************************************!*\
  !*** ./src/app/login/login.component.ts ***!
  \******************************************/
/*! exports provided: LoginComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoginComponent", function() { return LoginComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");







let LoginComponent = class LoginComponent {
    constructor(route, router, messageService, authenticationService, visbocenterService, alertService) {
        this.route = route;
        this.router = router;
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.visbocenterService = visbocenterService;
        this.alertService = alertService;
        this.model = {};
        this.restVersionString = undefined;
        this.loading = false;
    }
    ngOnInit() {
        // reset login status
        this.authenticationService.logout();
        // this.restVersion();
        if (this.route.snapshot.queryParams.email)
            this.model.username = this.route.snapshot.queryParams.email;
        // get return url from route parameters or default to '/'
        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';
        console.log(`return url ${this.returnUrl}`);
        if (this.returnUrl.indexOf('/login') >= 0)
            this.returnUrl = '/'; // do not return to login
    }
    restVersion() {
        if (this.restVersionString)
            return;
        this.authenticationService.restVersion()
            .subscribe(data => {
            this.restVersionString = data.version;
            this.log(`Version Status check success ${this.restVersionString}`);
        }, error => {
            this.log(`Version Status check Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    login() {
        this.loading = true;
        this.authenticationService.login(this.model.username, this.model.password)
            .subscribe(user => {
            // this.log(`Login Success Result ${JSON.stringify(user)}`);
            if (user.status && user.status.expiresAt) {
                var expiration = new Date(user.status.expiresAt);
                this.log(`Login Success BUT EXPIRATION at: ${expiration.toLocaleString()}`);
                this.alertService.error(`Your password expires at ${expiration.toLocaleString()}. Please change your password before`, true);
            }
            this.visbocenterService.getSysVisboCenter()
                .subscribe(vc => {
                this.log(`Login Success ${this.returnUrl} Role ${JSON.stringify(this.visbocenterService.getSysAdminRole())} `);
                this.router.navigate([this.returnUrl]);
            }, error => {
                this.log(`No SysVC found: `);
                this.router.navigate([this.returnUrl]);
            });
        }, error => {
            this.log(`Login Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
            this.loading = false;
        });
    }
    pwforgotten() {
        var email = (this.model.username || '').trim();
        this.log(`Forward to password forgotten ${email} `);
        // MS TODO: Check if user name is an e-Mail Address
        this.router.navigate(['pwforgotten'], { queryParams: { email: email } });
    }
    register() {
        this.log(`Forward to Register `);
        this.router.navigate(['register']);
    }
    relogin() {
        // called after server respons with 401 "not authenticated"
        this.authenticationService.logout();
        // get return url from route parameters or default to '/'
        this.log(`reLogin after error 401 to URL ${this.route.snapshot.queryParams["returnUrl"]}`);
        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Login: ' + message);
    }
};
LoginComponent.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__["VisboCenterService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
LoginComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-login',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./login.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/login/login.component.html")).default
    })
], LoginComponent);



/***/ }),

/***/ "./src/app/logouttimer/logouttimer.component.css":
/*!*******************************************************!*\
  !*** ./src/app/logouttimer/logouttimer.component.css ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/* private CSS styles */\nh2 {\n  color: red;\n  font-family: Arial, Helvetica, sans-serif;\n  font-weight: lighter;\n}\nbody {\n  margin: 2em;\n}\nbody, input[text], button {\n  color: crimson;\n  font-family: Cambria, Georgia;\n}\nbutton.clear {\n  font-family: Arial;\n  background-color: #eee;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 4px;\n  cursor: pointer;\n  cursor: hand;\n}\nbutton:hover {\n  background-color: #cfd8dc;\n}\nbutton:disabled {\n  background-color: #eee;\n  color: #aaa;\n  cursor: auto;\n}\nbutton.clear {\n  color: #888;\n  margin-bottom: 12px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9sb2dvdXR0aW1lci9sb2dvdXR0aW1lci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVCQUF1QjtBQUN2QjtFQUNFLFVBQVU7RUFDVix5Q0FBeUM7RUFDekMsb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxXQUFXO0FBQ2I7QUFDQTtFQUNFLGNBQWM7RUFDZCw2QkFBNkI7QUFDL0I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLFlBQVk7QUFDZDtBQUNBO0VBQ0UseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtBQUNyQiIsImZpbGUiOiJhcHAvbG9nb3V0dGltZXIvbG9nb3V0dGltZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIHByaXZhdGUgQ1NTIHN0eWxlcyAqL1xuaDIge1xuICBjb2xvcjogcmVkO1xuICBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtcbiAgZm9udC13ZWlnaHQ6IGxpZ2h0ZXI7XG59XG5ib2R5IHtcbiAgbWFyZ2luOiAyZW07XG59XG5ib2R5LCBpbnB1dFt0ZXh0XSwgYnV0dG9uIHtcbiAgY29sb3I6IGNyaW1zb247XG4gIGZvbnQtZmFtaWx5OiBDYW1icmlhLCBHZW9yZ2lhO1xufVxuXG5idXR0b24uY2xlYXIge1xuICBmb250LWZhbWlseTogQXJpYWw7XG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gIGJvcmRlcjogbm9uZTtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBjdXJzb3I6IGhhbmQ7XG59XG5idXR0b246aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2ZkOGRjO1xufVxuYnV0dG9uOmRpc2FibGVkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgY29sb3I6ICNhYWE7XG4gIGN1cnNvcjogYXV0bztcbn1cbmJ1dHRvbi5jbGVhciB7XG4gIGNvbG9yOiAjODg4O1xuICBtYXJnaW4tYm90dG9tOiAxMnB4O1xufVxuIl19 */");

/***/ }),

/***/ "./src/app/logouttimer/logouttimer.component.ts":
/*!******************************************************!*\
  !*** ./src/app/logouttimer/logouttimer.component.ts ***!
  \******************************************************/
/*! exports provided: LogoutTimerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogoutTimerComponent", function() { return LogoutTimerComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm2015/index.js");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");







let LogoutTimerComponent = class LogoutTimerComponent {
    constructor(route, router, alertService, authenticationService, messageService) {
        this.route = route;
        this.router = router;
        this.alertService = alertService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.logoutTimer = true;
        this.logoutTime = new Date();
    }
    ngOnInit() {
        // Get Logout Time from authentication Service
        this.logoutTime = new Date();
        this.logoutTime.setSeconds(this.logoutTime.getSeconds() + 100);
        this.log(`Logout Time Init ${this.logoutTime.toISOString()} `);
        this.checkLogout();
    }
    checkLogout() {
        //emit value in sequence every 10 second
        const source = Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["interval"])(10000);
        const subscribe = source.subscribe(val => {
            var current = new Date();
            var logoutTime;
            logoutTime = this.authenticationService.logoutCheck();
            if (!logoutTime)
                logoutTime = current;
            var diff = Math.round((logoutTime.getTime() - current.getTime()) / 1000);
            // this.log(`Check Logout Time ${logoutTime.toISOString()} diff ${diff}`)
            if (diff > 0 && diff <= 120) {
                this.alertService.error(`AutoLogout: Session expires in ${diff} Seconds`, true);
            }
            if (diff < 0) {
                this.log(`Logout Time passed`);
                this.alertService.error("AutoLogout: Session expired, please log in again", true);
                this.router.navigate(['login'], { queryParams: { returnUrl: this.router.url } });
            }
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        // console.log('logoutTimer: ' + message)
        this.messageService.add('logoutTimer: ' + message);
    }
};
LogoutTimerComponent.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_4__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] }
];
LogoutTimerComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-logouttimer',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./logouttimer.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/logouttimer/logouttimer.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./logouttimer.component.css */ "./src/app/logouttimer/logouttimer.component.css")).default]
    })
], LogoutTimerComponent);



/***/ }),

/***/ "./src/app/messages/messages.component.css":
/*!*************************************************!*\
  !*** ./src/app/messages/messages.component.css ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("/* MessagesComponent's private CSS styles */\nh2 {\n  color: red;\n  font-family: Arial, Helvetica, sans-serif;\n  font-weight: lighter;\n}\nbody {\n  margin: 2em;\n}\nbody, input[text], button {\n  color: crimson;\n  font-family: Cambria, Georgia;\n}\nbutton.clear {\n  font-family: Arial;\n  background-color: #eee;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 4px;\n  cursor: pointer;\n  cursor: hand;\n}\nbutton:hover {\n  background-color: #cfd8dc;\n}\nbutton:disabled {\n  background-color: #eee;\n  color: #aaa;\n  cursor: auto;\n}\nbutton.clear {\n  color: #888;\n  margin-bottom: 12px;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9tZXNzYWdlcy9tZXNzYWdlcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQztBQUMzQztFQUNFLFVBQVU7RUFDVix5Q0FBeUM7RUFDekMsb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxXQUFXO0FBQ2I7QUFDQTtFQUNFLGNBQWM7RUFDZCw2QkFBNkI7QUFDL0I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLFlBQVk7QUFDZDtBQUNBO0VBQ0UseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtBQUNyQiIsImZpbGUiOiJhcHAvbWVzc2FnZXMvbWVzc2FnZXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIE1lc3NhZ2VzQ29tcG9uZW50J3MgcHJpdmF0ZSBDU1Mgc3R5bGVzICovXG5oMiB7XG4gIGNvbG9yOiByZWQ7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xuICBmb250LXdlaWdodDogbGlnaHRlcjtcbn1cbmJvZHkge1xuICBtYXJnaW46IDJlbTtcbn1cbmJvZHksIGlucHV0W3RleHRdLCBidXR0b24ge1xuICBjb2xvcjogY3JpbXNvbjtcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XG59XG5cbmJ1dHRvbi5jbGVhciB7XG4gIGZvbnQtZmFtaWx5OiBBcmlhbDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgYm9yZGVyOiBub25lO1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGN1cnNvcjogaGFuZDtcbn1cbmJ1dHRvbjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjZmQ4ZGM7XG59XG5idXR0b246ZGlzYWJsZWQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xuICBjb2xvcjogI2FhYTtcbiAgY3Vyc29yOiBhdXRvO1xufVxuYnV0dG9uLmNsZWFyIHtcbiAgY29sb3I6ICM4ODg7XG4gIG1hcmdpbi1ib3R0b206IDEycHg7XG59XG4iXX0= */");

/***/ }),

/***/ "./src/app/messages/messages.component.ts":
/*!************************************************!*\
  !*** ./src/app/messages/messages.component.ts ***!
  \************************************************/
/*! exports provided: MessagesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagesComponent", function() { return MessagesComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");



let MessagesComponent = class MessagesComponent {
    constructor(messageService) {
        this.messageService = messageService;
    }
    ngOnInit() {
        this.activateMessage = this.messageService.getstatus();
        this.messageService.activateMessageToggle.subscribe((status) => {
            this.activateMessage = this.messageService.getstatus();
        });
    }
};
MessagesComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_2__["MessageService"] }
];
MessagesComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-messages',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./messages.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/messages/messages.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./messages.component.css */ "./src/app/messages/messages.component.css")).default]
    })
], MessagesComponent);



/***/ }),

/***/ "./src/app/navbar/navbar.component.css":
/*!*********************************************!*\
  !*** ./src/app/navbar/navbar.component.css ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (".navbar {\n  padding: 0px;\n  margin-bottom: 1em;\n  margin-top: 1em;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9uYXZiYXIvbmF2YmFyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakIiLCJmaWxlIjoiYXBwL25hdmJhci9uYXZiYXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uYXZiYXIge1xuICBwYWRkaW5nOiAwcHg7XG4gIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgbWFyZ2luLXRvcDogMWVtO1xufVxuIl19 */");

/***/ }),

/***/ "./src/app/navbar/navbar.component.ts":
/*!********************************************!*\
  !*** ./src/app/navbar/navbar.component.ts ***!
  \********************************************/
/*! exports provided: NavbarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavbarComponent", function() { return NavbarComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");








let NavbarComponent = class NavbarComponent {
    constructor(route, router, alertService, messageService, authenticationService, visbocenterService) {
        this.route = route;
        this.router = router;
        this.alertService = alertService;
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.visbocenterService = visbocenterService;
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
    }
    ngOnInit() {
        // get return url from route parameters or default to '/'
        // this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        this.log(`Navbar Init Sys Role ${JSON.stringify(this.combinedPerm)} View ${this.permSystem.View}`);
    }
    gotoClickedItem(action) {
        // console.log("clicked nav item %s", action);
        this.router.navigate([action]);
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('NavBar: ' + message);
    }
};
NavbarComponent.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__["AuthenticationService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_4__["VisboCenterService"] }
];
NavbarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'visbo-navbar',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./navbar.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/navbar/navbar.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./navbar.component.css */ "./src/app/navbar/navbar.component.css")).default]
    })
], NavbarComponent);



/***/ }),

/***/ "./src/app/pwforgotten/pwforgotten.component.css":
/*!*******************************************************!*\
  !*** ./src/app/pwforgotten/pwforgotten.component.css ***!
  \*******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvcHdmb3Jnb3R0ZW4vcHdmb3Jnb3R0ZW4uY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/pwforgotten/pwforgotten.component.ts":
/*!******************************************************!*\
  !*** ./src/app/pwforgotten/pwforgotten.component.ts ***!
  \******************************************************/
/*! exports provided: PwforgottenComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PwforgottenComponent", function() { return PwforgottenComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");






let PwforgottenComponent = class PwforgottenComponent {
    constructor(messageService, route, router, authenticationService, alertService) {
        this.messageService = messageService;
        this.route = route;
        this.router = router;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.model = {};
        this.loading = false;
    }
    ngOnInit() {
        if (this.route.snapshot.queryParams.email)
            this.model.username = this.route.snapshot.queryParams.email;
        this.log(`Password Forgotten for User ${this.model.username}`);
    }
    pwforgotten() {
        this.loading = true;
        this.authenticationService.pwforgotten(this.model)
            .subscribe(data => {
            this.alertService.success('Password Forgotten Request successful. Please check your Mail to continue.', true);
            this.router.navigate(['login']);
        }, error => {
            this.log(`Error during Password Forgotten ${error.error.message}`);
            this.alertService.error(error.error.message);
            this.loading = false;
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('PW Forgotten: ' + message);
    }
};
PwforgottenComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
PwforgottenComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-pwforgotten',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./pwforgotten.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/pwforgotten/pwforgotten.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./pwforgotten.component.css */ "./src/app/pwforgotten/pwforgotten.component.css")).default]
    })
], PwforgottenComponent);



/***/ }),

/***/ "./src/app/pwreset/pwreset.component.css":
/*!***********************************************!*\
  !*** ./src/app/pwreset/pwreset.component.css ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvcHdyZXNldC9wd3Jlc2V0LmNvbXBvbmVudC5jc3MifQ== */");

/***/ }),

/***/ "./src/app/pwreset/pwreset.component.ts":
/*!**********************************************!*\
  !*** ./src/app/pwreset/pwreset.component.ts ***!
  \**********************************************/
/*! exports provided: PwresetComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PwresetComponent", function() { return PwresetComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");







let PwresetComponent = class PwresetComponent {
    constructor(messageService, router, route, authenticationService, alertService) {
        this.messageService = messageService;
        this.router = router;
        this.route = route;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.model = {};
        this.loading = false;
        this.token = '';
    }
    ngOnInit() {
        this.getPWPolicy();
        this.token = this.route.snapshot.queryParams.token;
        this.log(`Init PW Reset Token ${this.token}`);
    }
    pwreset() {
        this.loading = true;
        this.model.token = this.token;
        this.authenticationService.pwreset(this.model)
            .subscribe(data => {
            this.alertService.success('Reset Password Request successful.', true);
            this.router.navigate(['login']);
        }, error => {
            this.loading = false;
            this.log(`Error during Reset Password ${error.error.message}`);
            this.alertService.error(`Password Reset: ${error.error.message}`);
        });
    }
    getPWPolicy() {
        this.authenticationService.initPWPolicy()
            .subscribe(data => {
            this.log(`Init PW Policy success ${JSON.stringify(data)}`);
            this.PWPolicy = data.PWPolicy;
            this.PWPolicyDescription = data.Description;
        }, error => {
            this.log(`Init PW Policy Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('PW Reset: ' + message);
    }
};
PwresetComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
PwresetComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-pwreset',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./pwreset.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/pwreset/pwreset.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./pwreset.component.css */ "./src/app/pwreset/pwreset.component.css")).default]
    })
], PwresetComponent);



/***/ }),

/***/ "./src/app/register/register.component.css":
/*!*************************************************!*\
  !*** ./src/app/register/register.component.css ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/register/register.component.ts":
/*!************************************************!*\
  !*** ./src/app/register/register.component.ts ***!
  \************************************************/
/*! exports provided: RegisterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RegisterComponent", function() { return RegisterComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");






let RegisterComponent = class RegisterComponent {
    constructor(messageService, route, router, authenticationService, alertService) {
        this.messageService = messageService;
        this.route = route;
        this.router = router;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.model = {};
        this.userRegister = undefined;
        this.hash = undefined;
        this.loading = false;
    }
    ngOnInit() {
        this.getPWPolicy();
        const id = this.route.snapshot.paramMap.get('id');
        this.hash = this.route.snapshot.queryParams.hash;
        if (id) {
            this.log(`Register for User ${id} hash ${this.hash}`);
            this.userRegister = id;
        }
        else {
            this.userRegister = undefined;
        }
        this.model = {};
    }
    register() {
        this.loading = true;
        this.log(`Call register Service`);
        if (this.userRegister) {
            this.model._id = this.userRegister;
        }
        this.authenticationService.createUser(this.model, this.hash)
            .subscribe(data => {
            if (this.hash) {
                this.alertService.success(`Congratulation, your e-mail address ${data.email} is now confirmed. Please login.`, true);
            }
            else {
                this.alertService.success(`Congratulation, you registered successfully your e-mail address ${data.email}. Please check your e-Mail for confirmation.`, true);
            }
            this.router.navigate(['login']);
        }, error => {
            this.log(`Error during Create User ${error.error.message}`);
            this.alertService.error(error.error.message);
            this.loading = false;
        });
    }
    getPWPolicy() {
        this.authenticationService.initPWPolicy()
            .subscribe(data => {
            this.log(`Init PW Policy success ${JSON.stringify(data)}`);
            this.PWPolicy = data.PWPolicy;
            this.PWPolicyDescription = data.Description;
        }, error => {
            this.log(`Init PW Policy Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Register: ' + message);
    }
};
RegisterComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
RegisterComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-register',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./register.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/register/register.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./register.component.css */ "./src/app/register/register.component.css")).default]
    })
], RegisterComponent);



/***/ }),

/***/ "./src/app/registerconfirm/registerconfirm.component.css":
/*!***************************************************************!*\
  !*** ./src/app/registerconfirm/registerconfirm.component.css ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvcmVnaXN0ZXJjb25maXJtL3JlZ2lzdGVyY29uZmlybS5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/registerconfirm/registerconfirm.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/registerconfirm/registerconfirm.component.ts ***!
  \**************************************************************/
/*! exports provided: RegisterconfirmComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RegisterconfirmComponent", function() { return RegisterconfirmComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");







let RegisterconfirmComponent = class RegisterconfirmComponent {
    constructor(messageService, router, route, authenticationService, alertService) {
        this.messageService = messageService;
        this.router = router;
        this.route = route;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.model = {};
    }
    ngOnInit() {
        this.model.hash = this.route.snapshot.queryParams.hash;
        this.model._id = this.route.snapshot.queryParams.id;
        this.log(`Init Register Confirm userid ${this.model._id} Token ${this.model.hash}`);
        this.authenticationService.registerconfirm(this.model)
            .subscribe(data => {
            this.log(`Register Confirm Success ${JSON.stringify(data)}`);
            this.alertService.success(`Congratulation, your e-mail address is now confirmed. Please login.`, true);
            this.router.navigate(['login']);
        }, error => {
            this.log(`Error during Register Confirm ${error.error.message}`);
            this.alertService.error(error.error.message);
            this.router.navigate(['login']);
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Register Confirm: ' + message);
    }
};
RegisterconfirmComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
RegisterconfirmComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-registerconfirm',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./registerconfirm.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/registerconfirm/registerconfirm.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./registerconfirm.component.css */ "./src/app/registerconfirm/registerconfirm.component.css")).default]
    })
], RegisterconfirmComponent);



/***/ }),

/***/ "./src/app/settings/settings.component.ts":
/*!************************************************!*\
  !*** ./src/app/settings/settings.component.ts ***!
  \************************************************/
/*! exports provided: SettingsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsComponent", function() { return SettingsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");


//import { ActivatedRoute } from '@angular/router';




let SettingsComponent = class SettingsComponent {
    constructor(visbocenterService, router, messageService, alertService) {
        this.visbocenterService = visbocenterService;
        this.router = router;
        this.messageService = messageService;
        this.alertService = alertService;
        this.combinedPerm = undefined;
    }
    ngOnInit() {
        this.activateMessage = this.messageService.getstatus();
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        console.log('Sys Admin Role: ', JSON.stringify(this.combinedPerm));
    }
    toggleMessages() {
        console.log('Toggle Messages');
        this.activateMessage = this.messageService.toggle();
    }
};
SettingsComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__["VisboCenterService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_3__["AlertService"] }
];
SettingsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-settings',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./settings.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/settings/settings.component.html")).default
    })
], SettingsComponent);



/***/ }),

/***/ "./src/app/sysaudit/sysaudit.component.css":
/*!*************************************************!*\
  !*** ./src/app/sysaudit/sysaudit.component.css ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzYXVkaXQvc3lzYXVkaXQuY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/sysaudit/sysaudit.component.ts":
/*!************************************************!*\
  !*** ./src/app/sysaudit/sysaudit.component.ts ***!
  \************************************************/
/*! exports provided: SysauditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysauditComponent", function() { return SysauditComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _models_visboaudit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visboaudit */ "./src/app/_models/visboaudit.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visboaudit.service */ "./src/app/_services/visboaudit.service.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);










var encodeCSV = function (source) {
    var result;
    if (!source)
        return source;
    result = source.replace(/\t/g, " ");
    if (result[0] == '=' || result[0] == '+' || result[0] == '-') {
        result = "'".concat(result);
    }
    return result;
};
let SysauditComponent = class SysauditComponent {
    constructor(visboauditService, visbocenterService, authenticationService, messageService, alertService, route, 
    //private location: Location,
    router) {
        this.visboauditService = visboauditService;
        this.visbocenterService = visbocenterService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.auditTypeList = [
            { name: "All", action: "" },
            { name: "Read", action: "GET" },
            { name: "Create", action: "POST" },
            { name: "Update", action: "PUT" },
            { name: "Delete", action: "DELETE" }
        ];
        this.auditAreaList = [
            { name: "Overview", action: "other" },
            { name: "System", action: "sys" },
            { name: "Visbo Center", action: "vc" },
            { name: "Visbo Project", action: "vp" },
            { name: "All", action: "" }
        ];
        this.sysVCId = '';
        this.chart = false;
        this.chartButton = "Chart";
        this.graphData = [];
        this.graphLegend = "Graph Legend not set";
        this.graphOptions = {
            'title': 'Audit Activity by Action',
            'sliceVisibilityThreshold': .025
        };
        this.graphDataLineChart = "Graph Time Data not set";
        this.graphOptionsLineChart = {
            'title': 'Audit Activity by Time',
            // 'width': '1200',
            'explorer': { 'actions': ['dragToZoom', 'rightClickToReset'], 'maxZoomIn': .01 },
            'vAxis': {
                'title': 'Number of Activities',
                'minorGridlines': { 'count': 0 }
            },
            'hAxis': {
                'format': 'dd.MM.yy',
                'gridlines': {
                    'count': -1,
                },
                'minorGridlines': { 'count': 0 }
            },
            'pointSize': 6,
            'curveType': 'function',
            'colors': ['blue', 'red', 'green', 'yellow']
        };
        this.graphDataColumnChart = "Graph VisboCenter Data not set";
        this.graphOptionsColumnChart = {
            'title': 'Audit Activity by User',
            'isStacked': true,
            'hAxis': { 'direction': -1, 'slantedText': true, 'slantedTextAngle': 45 }
        };
    }
    ngOnInit() {
        // this.log(`Audit init Dates ${this.auditFrom} to ${this.auditTo}`);
        this.auditCount = 50;
        this.auditType = this.auditTypeList[0].name;
        this.auditArea = this.auditAreaList[0].name;
        this.today = new Date();
        this.today.setHours(0, 0, 0, 0);
        this.sysVCId = this.visbocenterService.getSysVCId();
        this.getVisboAudits();
    }
    // onSelect(visboaudit: VisboAudit): void {
    //   this.getVisboAudits();
    // }
    getVisboAudits() {
        var queryAudit = new _models_visboaudit__WEBPACK_IMPORTED_MODULE_6__["QueryAuditType"];
        this.parentThis = this;
        // set date values if not set or adopt to end of day in case of to date
        if (this.auditTo) {
            queryAudit.to = new Date(this.auditTo);
        }
        else {
            queryAudit.to = new Date();
        }
        if (this.auditFrom) {
            queryAudit.from = new Date(this.auditFrom);
        }
        if (this.auditText)
            queryAudit.text = this.auditText.trim();
        for (var i = 0; i < this.auditTypeList.length; i++) {
            if (this.auditType == this.auditTypeList[i].name) {
                queryAudit.actionType = this.auditTypeList[i].action;
                break;
            }
        }
        for (var i = 0; i < this.auditAreaList.length; i++) {
            if (this.auditArea == this.auditAreaList[i].name) {
                queryAudit.area = this.auditAreaList[i].action;
                break;
            }
        }
        queryAudit.maxcount = this.auditCount;
        var chartFlag = this.chart;
        this.chart = false;
        // this.log(`Audit getSystemAudits recalc Query ${JSON.stringify(queryAudit)}`);
        this.visboauditService.getVisboAudits(true, queryAudit)
            .subscribe(audit => {
            this.audit = audit;
            this.alertService.success('Successfully accessed Audit', true);
            this.sortTable(undefined);
            this.groupGraphData();
            this.groupgraphDataLineChart();
            this.groupgraphDataColumnChart();
            this.chart = chartFlag;
        }, error => {
            this.log(`get Audit failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    gotoDetail(visboaudit) {
        // this.log(`navigate to Audit Detail ${visboaudit._id}`);
        this.router.navigate(['sysaudit/' + visboaudit._id]);
    }
    downloadVisboAudit() {
        this.log(`sysAudit Download ${this.audit.length} Items`);
        var data;
        var separator = "\t";
        var lineItem;
        var userAgent;
        data = 'sep=' + separator + '\n'; // to force excel to use the separator
        data = data + 'date' + separator
            + 'time UTC' + separator
            + 'email' + separator
            + 'actionDescription' + separator
            + 'action' + separator
            + 'url' + separator
            + 'actionInfo' + separator
            + 'responseTime' + separator
            + 'responseStatus' + separator
            + 'vcid' + separator
            + 'vcname' + separator
            + 'vpid' + separator
            + 'vpname' + separator
            + 'vpvid' + separator
            + 'size' + separator
            + 'ip' + separator
            + 'userId' + separator
            + 'userAgent' + separator
            + 'ttl' + separator
            + 'VC Details' + separator
            + 'VP Details' + '\n';
        var createdAt;
        for (var i = 0; i < this.audit.length; i++) {
            createdAt = new Date(this.audit[i].createdAt).toISOString();
            userAgent = (this.audit[i].userAgent || '').replace(/,/g, ";");
            lineItem = createdAt.substr(0, 10) + separator
                + createdAt.substr(11, 12) + separator
                + encodeCSV(this.audit[i].user.email) + separator
                + encodeCSV(this.audit[i].actionDescription) + separator
                + this.audit[i].action + separator
                + this.audit[i].url + separator
                + this.audit[i].actionInfo + separator
                + (this.audit[i].result ? this.audit[i].result.time : '') + separator
                + (this.audit[i].result ? this.audit[i].result.status : '') + separator
                + (this.audit[i].vc ? this.audit[i].vc.vcid : '') + separator
                + (this.audit[i].vc ? encodeCSV(this.audit[i].vc.name) : '') + separator
                + (this.audit[i].vp ? this.audit[i].vp.vpid : '') + separator
                + (this.audit[i].vp ? encodeCSV(this.audit[i].vp.name) : '') + separator
                + (this.audit[i].vpv ? this.audit[i].vpv.vpvid : '') + separator
                + (this.audit[i].result ? this.audit[i].result.size : '0') + separator
                + this.audit[i].ip + separator
                + this.audit[i].user.userId + separator
                + encodeCSV(userAgent) + separator
                + (this.audit[i].ttl || '') + separator
                + (this.audit[i].vc ? (encodeCSV(this.audit[i].vc.vcjson) || '') : '') + separator
                + (this.audit[i].vp ? (encodeCSV(this.audit[i].vp.vpjson) || '') : '') + '\n';
            data = data.concat(lineItem);
        }
        this.log(`sysAudit CSV Len ${data.length} `);
        var blob = new Blob([data], { type: 'text/plain' });
        var url = window.URL.createObjectURL(blob);
        var fileName = 'auditlog.csv';
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.href = url;
        a.download = fileName;
        this.log(`Open URL ${url} doc ${JSON.stringify(a)}`);
        a.click();
        window.URL.revokeObjectURL(url);
    }
    switchChart() {
        this.chart = !this.chart;
        this.chartButton = this.chart ? "List" : "Chart";
        // this.log(`Switch Chart to ${this.chart} Graph ${JSON.stringify(this.graphData)}`);
    }
    groupGraphData() {
        this.graphLegend = [["string", "Action Type"],
            ["number", "Count"]
        ];
        var graphSum = [];
        var graphData = [];
        var auditElement;
        for (auditElement in this.audit) {
            // this.log(`Group Graph Chart Element ${JSON.stringify(this.audit[auditElement])}`);
            if (this.audit[auditElement].actionDescription) {
                graphSum[this.audit[auditElement].actionDescription] = (graphSum[this.audit[auditElement].actionDescription] || 0) + 1;
                // this.log(`Group Graph Chart Element ${graphSum[this.audit[auditElement].action]} ${this.audit[auditElement].action}`);
            }
        }
        var graphElement;
        var i = 0;
        // this.graphData = [];
        for (graphElement in graphSum) {
            // this.log(`Group Graph Sum Chart Element ${graphElement}: ${JSON.stringify(graphSum[graphElement])}`);
            graphData.push([graphElement, graphSum[graphElement]]);
        }
        graphData.sort(function (a, b) {
            var result = 0;
            if (a[1] > b[1])
                result = -1;
            else if (a[1] < b[1])
                result = 1;
            return result;
        });
        this.graphData = graphData;
        // this.log(`Group Graph Sum Chart Updated`);
    }
    formatDate(iDate) {
        var iDateString = '';
        iDateString = moment__WEBPACK_IMPORTED_MODULE_9__(iDate).format('YYYY-MM-DD');
        // this.log(`Date Conversion ${iDate}: ${iDateString}`);
        return iDateString;
    }
    groupgraphDataLineChart() {
        var graphSum = [];
        var graphData = [];
        var auditElement;
        for (auditElement in this.audit) {
            if (this.audit[auditElement].createdAt) {
                var activityDay = new Date(this.audit[auditElement].createdAt);
                var activityIndex;
                activityDay.setHours(0, 0, 0, 0);
                activityIndex = Math.trunc(activityDay.getTime() / 1000 / 60 / 60 / 24);
                // // activityDay = activityDay.substr(0,10);
                // this.log(`Group Graph Time Chart Element ${activityIndex} ${activityDay}`);
                if (graphSum[activityIndex] == undefined)
                    graphSum[activityIndex] = [new Date(activityDay), 0, 0, 0, 0];
                graphSum[activityIndex][1] = graphSum[activityIndex][1] + 1;
                if (this.audit[auditElement].vpv)
                    graphSum[activityIndex][4] = graphSum[activityIndex][4] + 1;
                else if (this.audit[auditElement].vp)
                    graphSum[activityIndex][3] = graphSum[activityIndex][3] + 1;
                else if (this.audit[auditElement].vc && this.audit[auditElement].vc.vcid.toString() != this.sysVCId)
                    graphSum[activityIndex][2] = graphSum[activityIndex][2] + 1;
                // this.log(`Group Graph Time Chart Element ${activityIndex} ${JSON.stringify(graphSum[activityIndex])}`);
            }
        }
        // var graphElement: any;
        for (var graphElement in graphSum) {
            // this.log(`Group Graph Sum Chart Element ${graphElement}: ${JSON.stringify(graphSum[graphElement])}`);
            graphData.push(graphSum[graphElement]);
        }
        if (graphData.length == 1) {
            var dayBefore = new Date(graphData[0][0].toISOString());
            dayBefore.setMinutes(dayBefore.getMinutes() - 1);
            graphData.push([dayBefore, 0, 0, 0, 0]);
        }
        graphData.sort(function (a, b) { return b[0] - a[0]; });
        graphData.push(["Date", "All", "VC", "VP", "VPV"]);
        graphData.reverse();
        this.graphOptionsLineChart.hAxis.gridlines.count = graphData.length - 1;
        this.log(`Group Graph Time Chart Gridlines ${graphData.length - 1} `);
        this.graphDataLineChart = graphData;
    }
    groupgraphDataColumnChart() {
        var graphSum = [];
        var graphData = [];
        var auditElement;
        var userString, minDateString, maxDateString;
        for (auditElement in this.audit) {
            if (this.audit[auditElement].user && this.audit[auditElement].user.email) {
                userString = this.audit[auditElement].user.email;
                if (graphSum[userString] == undefined)
                    graphSum[userString] = [userString, 0, 0, 0, 0, 0, ''];
                if (this.audit[auditElement].vpv)
                    graphSum[userString][3] = graphSum[userString][3] + 1;
                else if (this.audit[auditElement].vp)
                    graphSum[userString][2] = graphSum[userString][2] + 1;
                else if (this.audit[auditElement].vc && this.audit[auditElement].vc.vcid.toString() != this.sysVCId)
                    graphSum[userString][1] = graphSum[userString][1] + 1;
                else if (this.audit[auditElement].vc && this.audit[auditElement].vc.vcid.toString() == this.sysVCId)
                    graphSum[userString][4] = graphSum[userString][4] + 1;
                else
                    graphSum[userString][5] = graphSum[userString][5] + 1;
                // this.log(`Group Graph Time Chart Element ${userString}: ${graphSum[userString]}`);
            }
        }
        var graphElement;
        for (graphElement in graphSum) {
            // this.log(`Group Graph Sum Chart Element ${graphElement}: ${JSON.stringify(graphSum[graphElement])}`);
            graphData.push(graphSum[graphElement]);
        }
        graphData.sort(function (a, b) {
            var result = 0;
            var firstSum = a[1] + a[2] + a[3] + a[4] + a[5];
            var secondSum = b[1] + b[2] + b[3] + b[4] + b[5];
            if (firstSum > secondSum)
                result = -1;
            else if (firstSum > secondSum)
                result = 1;
            return result;
        });
        graphData.push(['User', 'VC', 'VP', 'VPV', 'System', 'Other', { role: 'annotation' }]);
        graphData.reverse();
        this.log(`Group Graph Column Chart Element ${JSON.stringify(graphData[0])}`);
        this.log(`Group Graph Column Chart Element ${JSON.stringify(graphData[1])}`);
        this.graphDataColumnChart = graphData;
    }
    helperAuditIndex(auditIndex) {
        // this.log(`Remove User Helper: ${userIndex}`);
        this.auditIndex = auditIndex;
    }
    helperFormatActionDescription(auditentry) {
        this.log(`AuditDescription  ${auditentry.actionDescription} `);
        var desc;
        if (auditentry.actionDescription == "GET"
            || auditentry.actionDescription == "POST"
            || auditentry.actionDescription == "PUT"
            || auditentry.actionDescription == "DELETE") {
            desc = auditentry.actionDescription.concat(' ', auditentry.url);
            if (desc.length > 20)
                desc = desc.substring(0, 17) + '...';
            return desc;
        }
        return auditentry.actionDescription;
    }
    helperFormatBytes(a, b = 2) {
        if (0 == a)
            return "0 B";
        var c = 1024, d = b || 2;
        var e = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"];
        var f = Math.floor(Math.log(a) / Math.log(c));
        return parseFloat((a / Math.pow(c, f)).toFixed(d)) + " " + e[f];
    }
    pageAuditIndex(increment) {
        var newAuditIndex;
        newAuditIndex = this.auditIndex + increment;
        if (newAuditIndex < 0)
            newAuditIndex = 0;
        if (newAuditIndex >= this.audit.length)
            newAuditIndex = this.audit.length - 1;
        this.auditIndex = newAuditIndex;
    }
    helperResponseText(visboaudit) {
        if (visboaudit.result.statusText)
            return visboaudit.result.statusText;
        var status = visboaudit.result.status;
        if (status == "200")
            return "Success";
        if (status == "304")
            return "Success";
        if (status == "400")
            return "Bad Request";
        if (status == "401")
            return "Not Authenticated";
        if (status == "403")
            return "Permission Denied";
        if (status == "404")
            return "URL not found";
        if (status == "409")
            return "Conflict";
        if (status == "423")
            return "Locked";
        if (status == "500")
            return "Server Error";
        return status.toString();
    }
    helperShortenText(text, len) {
        if (!text || !len || len < 5 || text.length <= len)
            return (text);
        return text.substring(0, 20).concat('...', text.substring(text.length - 7, text.length));
    }
    toggleDetail() {
        this.log(`Toggle ShowMore`);
        this.showMore = !this.showMore;
    }
    isToday(checkDate) {
        // this.log(`Check Date ${checkDate} ${this.today.toISOString()}`);
        return new Date(checkDate) > this.today;
    }
    sortTable(n) {
        if (!this.audit)
            return;
        // this.log(`Sort Table Column ${n}`)
        // change sort order otherwise sort same column same direction
        if (n != undefined) {
            // sort a different column
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            else if (this.sortAscending != undefined)
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = undefined;
        }
        if (this.sortAscending == undefined) {
            // sort name column ascending, number values desc first
            this.sortAscending = (n == 2 || n == 3 || n == 4) ? true : false;
            // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.audit.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.createdAt > b.createdAt)
                    result = 1;
                else if (a.createdAt < b.createdAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.user.email.toLowerCase() > b.user.email.toLowerCase())
                    result = 1;
                else if (a.user.email.toLowerCase() < b.user.email.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.action > b.action)
                    result = 1;
                else if (a.action < b.action)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.url > b.url)
                    result = 1;
                else if (a.url < b.url)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort Result
            // this.audit.sort(function(a, b) { return a.result.status.toValue() - b.result.status.toValue() })
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.result.status > b.result.status)
                    result = 1;
                else if (a.result.status < b.result.status)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 6) {
            this.audit.sort(function (a, b) {
                return a.result.time - b.result.time;
            });
        }
        else if (this.sortColumn == 7) {
            this.audit.sort(function (a, b) {
                return (a.result.size || 0) - (b.result.size || 0);
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.audit.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys Audit: ' + message);
    }
};
SysauditComponent.ctorParameters = () => [
    { type: _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_8__["VisboAuditService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_7__["VisboCenterService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysauditComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysaudit',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysaudit.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysaudit/sysaudit.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysaudit.component.css */ "./src/app/sysaudit/sysaudit.component.css")).default]
    })
], SysauditComponent);



/***/ }),

/***/ "./src/app/sysconfig/sysconfig.component.css":
/*!***************************************************!*\
  !*** ./src/app/sysconfig/sysconfig.component.css ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzY29uZmlnL3N5c2NvbmZpZy5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/sysconfig/sysconfig.component.ts":
/*!**************************************************!*\
  !*** ./src/app/sysconfig/sysconfig.component.ts ***!
  \**************************************************/
/*! exports provided: SysconfigComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysconfigComponent", function() { return SysconfigComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbosetting.service */ "./src/app/_services/visbosetting.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");








let SysconfigComponent = class SysconfigComponent {
    constructor(visbocenterService, visbosettingService, messageService, alertService, router) {
        this.visbocenterService = visbocenterService;
        this.visbosettingService = visbosettingService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.router = router;
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
    }
    ngOnInit() {
        this.systemVC = this.visbocenterService.getSysVCId();
        this.getVisboConfig();
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        // this.log(`getVisboConfig Perm ${JSON.stringify(this.combinedPerm)}`);
    }
    getVisboConfig() {
        this.log(`get VisboConfig Values`);
        this.visbosettingService.getVCSettingByType(this.systemVC, 'SysConfig', true)
            .subscribe(vcsetting => {
            this.vcsetting = vcsetting;
            this.sortTable(1);
            this.log('get Settings success ' + vcsetting.length);
        }, error => {
            this.log(`get Settings failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    getMainInfo(entry) {
        // this.log('get Main Value ' + entry.name);
        var result = "";
        if (entry.value) {
            switch (entry.name) {
                case 'UI URL':
                    result = entry.value.UIUrl;
                    break;
                case 'SMTP':
                    result = entry.value.auth && entry.value.auth.user;
                    break;
                case 'PW Policy':
                    result = (entry.value.Description || "").substring(0, 60).concat("...");
                    break;
                case 'DEBUG':
                    result = JSON.stringify(entry.value).substring(0, 60).concat("...");
                    break;
                case 'Log Age':
                    result = entry.value.duration;
                    break;
                case 'REDIS':
                    result = entry.value.host;
                    break;
            }
        }
        return result || "";
    }
    helperConfigName(config) {
        for (var i = 0; i < this.vcsetting.length; i++) {
            if (this.vcsetting[i].name == config) {
                return i;
            }
        }
        return undefined;
    }
    editConfigName(config) {
        this.log(`Edit Config  ${config}`);
        for (var i = 0; i < this.vcsetting.length; i++) {
            if (this.vcsetting[i].name == config) {
                this.editIndex = i;
                return i;
            }
        }
        return undefined;
    }
    updateConfig(setting) {
        // if (!setting) return;
        this.log(`Update Config  ${JSON.stringify(setting)}`);
        this.visbosettingService.updateVCSetting(this.systemVC, setting, true)
            .subscribe(data => {
            this.log(`set System Config success ${JSON.stringify(data)}`);
            this.alertService.success('Successfully changed System Configuration', true);
            this.vcsetting[this.helperConfigName(setting.name)] = data;
        }, error => {
            this.log(`set System Config failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    sortTable(n) {
        if (!this.vcsetting)
            return;
        this.log(`Sort Table Column ${n} old ${this.sortColumn}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortColumn == undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // this.log(`Sort VC Column ${this.sortColumn} Asc ${this.sortAscending} `)
        if (this.sortColumn == 1) {
            this.vcsetting.sort(function (a, b) {
                var result = 0;
                if (a.name > b.name)
                    result = 1;
                else if (a.name < b.name)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            return 0; // No Sorting
        }
        else if (this.sortColumn == 3) {
            this.vcsetting.sort(function (a, b) {
                var result = 0;
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        if (!this.sortAscending) {
            this.log(`Sort VC Column Reverse `);
            this.vcsetting.reverse();
        }
    }
    /** Log message with the MessageService */
    log(message) {
        this.messageService.add('Sys Config: ' + message);
    }
};
SysconfigComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__["VisboCenterService"] },
    { type: _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_6__["VisboSettingService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysconfigComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysconfig',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysconfig.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysconfig/sysconfig.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysconfig.component.css */ "./src/app/sysconfig/sysconfig.component.css")).default]
    })
], SysconfigComponent);



/***/ }),

/***/ "./src/app/syslog/syslog.component.ts":
/*!********************************************!*\
  !*** ./src/app/syslog/syslog.component.ts ***!
  \********************************************/
/*! exports provided: SysLogComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysLogComponent", function() { return SysLogComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_syslog_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/syslog.service */ "./src/app/_services/syslog.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visbosetting.service */ "./src/app/_services/visbosetting.service.ts");








let SysLogComponent = class SysLogComponent {
    constructor(visbocenterService, visbosettingService, syslogService, messageService, alertService, router) {
        this.visbocenterService = visbocenterService;
        this.visbosettingService = visbosettingService;
        this.syslogService = syslogService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.router = router;
    }
    ngOnInit() {
        this.systemVC = this.visbocenterService.getSysVCId();
        this.ageDays = 3;
        this.sortColumn = 2;
        this.getVisboLogs();
        this.sortTable(1);
        this.log(`syslog init VC ID ${this.systemVC}`);
    }
    // onSelect(visboaudit: VisboAudit): void {
    //   this.getVisboAudits();
    // }
    getVisboLogs() {
        this.log(`syslog getVisboLogs`);
        this.sortAscending = !this.sortAscending;
        this.syslogService.getSysLogs(this.ageDays)
            .subscribe(files => {
            this.files = files;
            this.sortTable(this.sortColumn);
            this.log('get Logs success');
        }, error => {
            this.log(`get Logs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    helperFileIndex(fileIndex) {
        this.fileIndex = fileIndex;
    }
    switchView() {
        this.logDataShow = !this.logDataShow;
    }
    getVisboLogFile(file) {
        this.log(`syslog getVisboLogFile`);
        this.syslogService.getSysLog(file.folder, file.name)
            .subscribe(data => {
            this.log(`get Log Content success Start:${data.substring(0, 30)}`);
            this.downloadFile(data, file.name);
        }, error => {
            this.log(`get Log Content failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    getLogLevel() {
        this.log(`syslog getLogLevel`);
        this.visbosettingService.getVCSettingByName(this.systemVC, 'DEBUG', true)
            .subscribe(vcsetting => {
            this.logLevelSetting = vcsetting[0];
            this.log(`get Log Level success ${JSON.stringify(this.logLevelSetting)}`);
        }, error => {
            this.log(`get Log Level failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    setLogLevel() {
        this.log(`syslog setLogLevel`);
        this.visbosettingService.updateVCSetting(this.systemVC, this.logLevelSetting, true)
            .subscribe(data => {
            this.log(`set Log Level success ${JSON.stringify(data)}`);
            this.alertService.success('Successfully changed Log Level', true);
            this.logLevelSetting = data;
        }, error => {
            this.log(`set Log Level failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    downloadFile(data, fileName) {
        this.log(`download File succeeded Len: ${data.length}`);
        var blob = new Blob([data], { type: 'text/plain' });
        var url = window.URL.createObjectURL(blob);
        this.log(`Open URL ${url}`);
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.href = url;
        a.download = fileName + '.log';
        a.click();
        window.URL.revokeObjectURL(url);
    }
    formatBytes(size, precision) {
        if (0 == size)
            return "0 Bytes";
        var c = 1024, d = precision || 2, units = ["Bytes", "KB", "MB", "GB"];
        var f = Math.floor(Math.log(size) / Math.log(c));
        return parseFloat((size / Math.pow(c, f)).toFixed(d)) + " " + units[f];
    }
    sortTable(n) {
        if (!this.files)
            return;
        this.log(`Sort Table Column ${n}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortColumn == undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.files.sort(function (a, b) {
                var result = 0;
                if (a.name > b.name)
                    result = 1;
                else if (a.name < b.name)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.files.sort(function (a, b) {
                var result = 0;
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.files.sort(function (a, b) {
                return a.size - b.size;
            });
        }
        if (!this.sortAscending) {
            this.files.reverse();
        }
    }
    /** Log message with the MessageService */
    log(message) {
        this.messageService.add('Sys Logs: ' + message);
    }
};
SysLogComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__["VisboCenterService"] },
    { type: _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_7__["VisboSettingService"] },
    { type: _services_syslog_service__WEBPACK_IMPORTED_MODULE_5__["SysLogService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysLogComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-syslog',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./syslog.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/syslog/syslog.component.html")).default
    })
], SysLogComponent);



/***/ }),

/***/ "./src/app/sysnavbar/sysnavbar.component.css":
/*!***************************************************!*\
  !*** ./src/app/sysnavbar/sysnavbar.component.css ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (".navbar {\n  padding: 0px;\n  margin-bottom: 1em;\n  margin-top: 1em;\n}\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zeXNuYXZiYXIvc3lzbmF2YmFyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakIiLCJmaWxlIjoiYXBwL3N5c25hdmJhci9zeXNuYXZiYXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5uYXZiYXIge1xuICBwYWRkaW5nOiAwcHg7XG4gIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgbWFyZ2luLXRvcDogMWVtO1xufVxuIl19 */");

/***/ }),

/***/ "./src/app/sysnavbar/sysnavbar.component.ts":
/*!**************************************************!*\
  !*** ./src/app/sysnavbar/sysnavbar.component.ts ***!
  \**************************************************/
/*! exports provided: SysNavbarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysNavbarComponent", function() { return SysNavbarComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");








let SysNavbarComponent = class SysNavbarComponent {
    constructor(route, router, alertService, messageService, authenticationService, visbocenterService) {
        this.route = route;
        this.router = router;
        this.alertService = alertService;
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.visbocenterService = visbocenterService;
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
    }
    ngOnInit() {
        // get return url from route parameters or default to '/'
        // this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        this.log(`Navbar Init Sys Role ${JSON.stringify(this.combinedPerm)} ${this.permSystem.View}`);
    }
    gotoClickedItem(action) {
        // console.log("clicked nav item %s", action);
        this.router.navigate([action]);
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    hasVCPerm(perm) {
        return (this.combinedPerm.vc & perm) > 0;
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys NavBar: ' + message);
    }
};
SysNavbarComponent.ctorParameters = () => [
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_3__["AuthenticationService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_4__["VisboCenterService"] }
];
SysNavbarComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'sysvisbo-navbar',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysnavbar.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysnavbar/sysnavbar.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysnavbar.component.css */ "./src/app/sysnavbar/sysnavbar.component.css")).default]
    })
], SysNavbarComponent);



/***/ }),

/***/ "./src/app/systasks/systasks.component.css":
/*!*************************************************!*\
  !*** ./src/app/systasks/systasks.component.css ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzdGFza3Mvc3lzdGFza3MuY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/systasks/systasks.component.ts":
/*!************************************************!*\
  !*** ./src/app/systasks/systasks.component.ts ***!
  \************************************************/
/*! exports provided: SystasksComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SystasksComponent", function() { return SystasksComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbosetting.service */ "./src/app/_services/visbosetting.service.ts");







let SystasksComponent = class SystasksComponent {
    constructor(visbocenterService, visbosettingService, messageService, alertService, router) {
        this.visbocenterService = visbocenterService;
        this.visbosettingService = visbosettingService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.router = router;
    }
    ngOnInit() {
        this.systemVC = this.visbocenterService.getSysVCId();
        this.getVisboTasks();
    }
    getVisboTasks() {
        this.log(`getVisboTasks`);
        this.visbosettingService.getVCSettingByType(this.systemVC, 'Task', true)
            .subscribe(vcsetting => {
            this.vcsetting = vcsetting;
            this.sortTable(undefined);
            this.log('get Settings success ' + vcsetting.length);
            this.alertService.clear();
        }, error => {
            this.log(`get Settings failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    helperTaskIndex(taskIndex) {
        this.taskIndex = taskIndex;
    }
    pageTaskIndex(increment) {
        var newtaskIndex;
        newtaskIndex = this.taskIndex + increment;
        if (newtaskIndex < 0)
            newtaskIndex = 0;
        if (newtaskIndex >= this.vcsetting.length)
            newtaskIndex = this.vcsetting.length - 1;
        this.taskIndex = newtaskIndex;
    }
    executeTask() {
        this.log(`execute Task Immediately: ${this.vcsetting[this.taskIndex].name} `);
        this.vcsetting[this.taskIndex].value.nextRun = new Date();
        this.visbosettingService.updateVCSetting(this.systemVC, this.vcsetting[this.taskIndex], true)
            .subscribe(data => {
            this.log(`execute Task success ${JSON.stringify(data)}`);
            this.alertService.success('Successfully set Task to execute', false);
            this.vcsetting[this.taskIndex] = data;
        }, error => {
            this.log(`execute Task failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    sortTable(n) {
        if (!this.vcsetting)
            return;
        this.log(`Sort Table Column ${n} ${this.sortColumn}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortColumn == undefined) {
            if (this.sortColumn == undefined)
                this.sortColumn = 1;
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 0) ? true : false;
                // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
            }
            else
                this.sortAscending = !this.sortAscending;
            this.log(`Sort Order ${this.sortAscending}`);
        }
        // this.log(`Sort VC Column ${this.sortColumn} Asc ${this.sortAscending} `)
        if (this.sortColumn == 1) {
            this.vcsetting.sort(function (a, b) {
                var result = 0;
                if (a.name > b.name)
                    result = 1;
                else if (a.name < b.name)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.vcsetting.sort(function (a, b) {
                var result = 0;
                if (a.value.lastRun > b.value.lastRun)
                    result = 1;
                else if (a.value.lastRun < b.value.lastRun)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.vcsetting.sort(function (a, b) {
                var result = 0;
                if (a.value.nextRun > b.value.nextRun)
                    result = 1;
                else if (a.value.nextRun < b.value.nextRun)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            this.vcsetting.sort(function (a, b) {
                var val1 = 0, val2 = 0;
                if (a.value.taskSpecific && a.value.taskSpecific.result)
                    val1 = a.value.taskSpecific.result;
                if (b.value.taskSpecific && b.value.taskSpecific.result)
                    val2 = b.value.taskSpecific.result;
                return val1 - val2;
            });
        }
        if (!this.sortAscending) {
            this.log(`Sort VC Column Reverse `);
            this.vcsetting.reverse();
        }
    }
    /** Log message with the MessageService */
    log(message) {
        this.messageService.add('Sys Tasks: ' + message);
    }
};
SystasksComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_5__["VisboCenterService"] },
    { type: _services_visbosetting_service__WEBPACK_IMPORTED_MODULE_6__["VisboSettingService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SystasksComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-systasks',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./systasks.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/systasks/systasks.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./systasks.component.css */ "./src/app/systasks/systasks.component.css")).default]
    })
], SystasksComponent);



/***/ }),

/***/ "./src/app/sysuser/sysuser.component.css":
/*!***********************************************!*\
  !*** ./src/app/sysuser/sysuser.component.css ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzdXNlci9zeXN1c2VyLmNvbXBvbmVudC5jc3MifQ== */");

/***/ }),

/***/ "./src/app/sysuser/sysuser.component.ts":
/*!**********************************************!*\
  !*** ./src/app/sysuser/sysuser.component.ts ***!
  \**********************************************/
/*! exports provided: SysuserComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysuserComponent", function() { return SysuserComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_sysuser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/sysuser.service */ "./src/app/_services/sysuser.service.ts");






let SysuserComponent = class SysuserComponent {
    constructor(sysuserService, messageService, alertService, route, router) {
        this.sysuserService = sysuserService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
    }
    ngOnInit() {
        this.getSysUsers();
        this.sortTable(undefined);
    }
    getSysUsers() {
        if (this.userMatch)
            this.userMatch = this.userMatch.trim();
        this.log(`Get with filter ${this.userMatch}`);
        this.sysuserService.getSysUsers(this.userMatch)
            .subscribe(user => {
            this.user = user;
            this.sortTable(undefined);
            this.log('get success');
        }, error => {
            this.log(`get failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    helperUserIndex(userIndex) {
        this.userIndex = userIndex;
    }
    pageUserIndex(increment) {
        var newuserIndex;
        newuserIndex = this.userIndex + increment;
        if (newuserIndex < 0)
            newuserIndex = 0;
        if (newuserIndex >= this.user.length)
            newuserIndex = this.user.length - 1;
        this.userIndex = newuserIndex;
    }
    helperShortenText(text, len) {
        if (!text || !len || len < 5 || text.length <= len) {
            return (text);
        }
        return text.substring(0, 20).concat('...', text.substring(text.length - 7, text.length));
    }
    toggleDetail() {
        this.log(`Toggle ShowMore`);
        this.showMore = !this.showMore;
    }
    sortTable(n) {
        if (!this.user)
            return;
        this.log(`Sort Table Column ${n}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined) {
            // sort a different column
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            else if (this.sortAscending != undefined)
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 2;
            this.sortAscending = undefined;
        }
        if (this.sortAscending == undefined) {
            // sort name column ascending, number values desc first
            this.sortAscending = (n == 1) ? true : false;
            // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.user.sort(function (a, b) {
                var result = 0;
                if (a.email.toLowerCase() > b.email.toLowerCase())
                    result = 1;
                else if (a.email.toLowerCase() < b.email.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.user.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.user.sort(function (a, b) {
                var result = 0;
                var aLastLoginAt, bLastLoginAt;
                aLastLoginAt = a.status && a.status.lastLoginAt ? new Date(a.status.lastLoginAt) : undefined;
                if (!aLastLoginAt)
                    aLastLoginAt = new Date('2001-01-01');
                bLastLoginAt = b.status && b.status.lastLoginAt ? new Date(b.status.lastLoginAt) : undefined;
                if (!bLastLoginAt)
                    bLastLoginAt = new Date('2001-01-01');
                return aLastLoginAt.getTime() - bLastLoginAt.getTime();
            });
        }
        else if (this.sortColumn == 4) {
            this.user.sort(function (a, b) {
                var result = 0;
                var alastLoginFailedAt, blastLoginFailedAt;
                alastLoginFailedAt = a.status && a.status.lastLoginFailedAt ? new Date(a.status.lastLoginFailedAt) : undefined;
                if (!alastLoginFailedAt)
                    alastLoginFailedAt = new Date('2001-01-01');
                blastLoginFailedAt = b.status && b.status.lastLoginFailedAt ? new Date(b.status.lastLoginFailedAt) : undefined;
                if (!blastLoginFailedAt)
                    blastLoginFailedAt = new Date('2001-01-01');
                return alastLoginFailedAt.getTime() - blastLoginFailedAt.getTime();
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.user.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys User: ' + message);
    }
};
SysuserComponent.ctorParameters = () => [
    { type: _services_sysuser_service__WEBPACK_IMPORTED_MODULE_5__["SysUserService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysuserComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysuser',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysuser.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysuser/sysuser.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysuser.component.css */ "./src/app/sysuser/sysuser.component.css")).default]
    })
], SysuserComponent);



/***/ }),

/***/ "./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.css":
/*!***************************************************************************!*\
  !*** ./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.css ***!
  \***************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzdmlzYm9jZW50ZXItZGV0YWlsL3N5c3Zpc2JvY2VudGVyLWRldGFpbC5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.ts":
/*!**************************************************************************!*\
  !*** ./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.ts ***!
  \**************************************************************************/
/*! exports provided: SysvisbocenterDetailComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysvisbocenterDetailComponent", function() { return SysvisbocenterDetailComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");










let SysvisbocenterDetailComponent = class SysvisbocenterDetailComponent {
    constructor(messageService, visbocenterService, visboprojectService, route, location, router, authenticationService, alertService) {
        this.messageService = messageService;
        this.visbocenterService = visbocenterService;
        this.visboprojectService = visboprojectService;
        this.route = route;
        this.location = location;
        this.router = router;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.newUserInvite = {};
        this.actGroup = {};
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
        this.deleted = false;
        this.sortUserColumn = 1;
        this.sortUserAscending = true;
        this.sortGroupColumn = 1;
        this.sortGroupAscending = true;
    }
    ngOnInit() {
        this.log(`SysVisboCenter Init: ${JSON.stringify(this.visbocenter)}`);
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.getVisboCenter();
        this.getVisboCenterUsers();
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        // this.log(`SysAdmin Role: ${this.vcIsSysAdmin}`)
    }
    getVisboCenter() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log(`VisboCenter Detail of: ${id} Deleted ${this.deleted}`);
        this.visbocenterService.getVisboCenter(id, true, this.deleted)
            .subscribe(visbocenter => {
            this.visbocenter = visbocenter;
            this.combinedPerm = visbocenter.perm;
            // this.log(`VisboCenter initialised ${this.visbocenter._id} Perm Sys ${JSON.stringify(this.combinedPerm)} `)
        }, error => {
            this.log(`Get VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    hasVCPerm(perm) {
        return (this.combinedPerm.vc & perm) > 0;
    }
    hasVPPerm(perm) {
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboCenterUsers() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log(`VisboCenter UserList of ${id} Deleted ${this.deleted}`);
        this.visbocenterService.getVCUsers(id, true, this.deleted)
            .subscribe(mix => {
            this.vgUsers = mix.users;
            this.vgGroups = mix.groups;
            this.log(`fetched Users ${this.vgUsers.length}, Groups ${this.vgGroups.length}`);
            this.sortUserTable();
            this.sortGroupTable();
        }, error => {
            this.log(`Get VC Users failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVCAudit(visbocenter) {
        this.log(`GoTo VC Audit ${visbocenter.name} ${this.visbocenter.name}`);
        var queryParams = this.deleted ? { sysadmin: 1, deleted: 1 } : { sysadmin: 1 };
        this.log(`GoTo VC Audit ${visbocenter.name} ${this.visbocenter.name} ${JSON.stringify(queryParams)}`);
        this.router.navigate(['vcAudit/'.concat(visbocenter._id)], { queryParams: queryParams });
    }
    gotoVPList(visbocenter) {
        this.log(`GoTo VP List ${JSON.stringify(this.combinedPerm)}`);
        if (this.hasVPPerm(this.permVP.View))
            this.router.navigate(['sysvp/'.concat(visbocenter._id)]);
    }
    goBack() {
        // this.log(`VC Details go Back ${JSON.stringify(this.location)}`)
        this.location.back();
    }
    save() {
        this.log(`PUT VC: ${this.visbocenter.name} ID: ${this.visbocenter._id} Deleted: ${this.deleted}`);
        this.visbocenterService.updateVisboCenter(this.visbocenter, true, this.deleted)
            .subscribe(vc => {
            this.alertService.success(`Visbo Center ${vc.name} updated successfully`, true);
            this.goBack();
        }, error => {
            this.log(`save VC failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${this.visbocenter.name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Center ${this.visbocenter.name} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    delete(visbocenter) {
        this.log(`Delete VC: ${visbocenter.name} ID: ${visbocenter._id} Deleted: ${this.deleted}`);
        this.visbocenterService.deleteVisboCenter(visbocenter, true, this.deleted)
            .subscribe(vc => {
            this.alertService.success(`Visbo Center ${visbocenter.name} deleted successfully`, true);
            this.goBack();
        }, error => {
            this.log(`delete VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${visbocenter.name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    toggleUserGroup() {
        this.showGroups = !this.showGroups;
    }
    addNewVCUser() {
        var email = this.newUserInvite.email.trim();
        var groupName = this.newUserInvite.groupName.trim();
        var groupId = this.vgGroups.filter(group => group.name == groupName)[0]._id;
        var inviteMessage = '';
        if (this.newUserInvite.inviteMessage)
            inviteMessage = this.newUserInvite.inviteMessage.trim();
        var vcid = this.visbocenter._id;
        this.log(`Add VisboCenter User: ${email} Group: ${groupName}/${groupId} VC: ${vcid}`);
        if (!email || !groupId) {
            return;
        }
        this.visbocenterService.addVCUser(email, groupId, inviteMessage, vcid, true)
            .subscribe(group => {
            // Add User to User & Group list
            var newUserGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGUserGroup"]();
            newUserGroup.userId = group.users.filter(user => user.email == email)[0].userId;
            newUserGroup.email = email;
            newUserGroup.groupId = group._id;
            newUserGroup.groupName = group.name;
            this.log(`Add VisboCenter User Push: ${JSON.stringify(newUserGroup)}`);
            this.vgUsers.push(newUserGroup);
            this.sortUserTable();
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == group._id) {
                    this.vgGroups[i] = group;
                    break;
                }
            }
            this.alertService.success(`User ${email} added successfully`);
        }, error => {
            this.log(`Add VisboCenter User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Add User to Visbo Center`);
            }
            else {
                this.log(`Error during add VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperRemoveUser(memberIndex) {
        this.userIndex = memberIndex;
    }
    helperRemoveGroup(memberIndex) {
        this.groupIndex = memberIndex;
    }
    removeVCUser(user, vcid) {
        this.log(`Remove VisboCenter User: ${user.email}/${user.userId} Group: ${user.groupName} VC: ${vcid}`);
        this.visbocenterService.deleteVCUser(user, vcid, true)
            .subscribe(users => {
            // this.log(`Remove VisboCenter User result: ${JSON.stringify(result)}`);
            // this.visbocenter.users = users;
            // filter user from vgUsers
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser !== user);
            // filter user from vgGroups
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == user.groupId) {
                    for (var j = 0; j < this.vgGroups[i].users.length; j++) {
                        if (this.vgGroups[i].users[j].userId == user.userId) {
                            this.vgGroups[i].users.splice(j, 1); // remove item from array
                            break;
                        }
                    }
                    break;
                }
            }
            this.alertService.success(`User ${user.email} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove User from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperVCPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedView)
            perm += this.permVC.View;
        if (newGroup.checkedViewAudit)
            perm += this.permVC.ViewAudit;
        if (newGroup.checkedModify)
            perm += this.permVC.Modify;
        if (newGroup.checkedCreateVP)
            perm += this.permVC.CreateVP;
        if (newGroup.checkedManagePerm)
            perm += this.permVC.ManagePerm;
        return perm;
    }
    helperVPPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedVPView)
            perm += this.permVP.View;
        if (newGroup.checkedVPViewAudit)
            perm += this.permVP.ViewAudit;
        if (newGroup.checkedVPModify)
            perm += this.permVP.Modify;
        if (newGroup.checkedCreateVariant)
            perm += this.permVP.CreateVariant;
        if (newGroup.checkedVPManagePerm)
            perm += this.permVP.ManagePerm;
        if (newGroup.checkedVPDelete)
            perm += this.permVP.DeleteVP;
        return perm;
    }
    initGroup(curGroup) {
        if (curGroup) {
            this.actGroup.confirm = 'Modify';
            this.actGroup.gid = curGroup._id;
            this.log(`Init Group Set GroupID : ${this.actGroup.gid} ID ${curGroup._id}`);
            this.actGroup.groupName = curGroup.name;
            this.actGroup.checkGlobal = curGroup.global;
            this.actGroup.checkedView = (curGroup.permission.vc & this.permVC.View) > 0;
            this.actGroup.checkedViewAudit = (curGroup.permission.vc & this.permVC.ViewAudit) > 0;
            this.actGroup.checkedModify = (curGroup.permission.vc & this.permVC.Modify) > 0;
            this.actGroup.checkedCreateVP = (curGroup.permission.vc & this.permVC.CreateVP) > 0;
            this.actGroup.checkedManagePerm = (curGroup.permission.vc & this.permVC.ManagePerm) > 0;
            this.actGroup.checkedVPView = (curGroup.permission.vp & this.permVP.View) > 0;
            this.actGroup.checkedVPViewAudit = (curGroup.permission.vp & this.permVP.ViewAudit) > 0;
            this.actGroup.checkedVPModify = (curGroup.permission.vp & this.permVP.Modify) > 0;
            this.actGroup.checkedCreateVariant = (curGroup.permission.vp & this.permVP.CreateVariant) > 0;
            this.actGroup.checkedVPManagePerm = (curGroup.permission.vp & this.permVP.ManagePerm) > 0;
            this.actGroup.checkedVPDelete = (curGroup.permission.vp & this.permVP.DeleteVP) > 0;
        }
        else {
            this.actGroup.confirm = 'Add';
            this.actGroup.gid = undefined;
            this.actGroup.groupName = '';
            this.actGroup.checkGlobal = false;
            this.actGroup.checkedView = true;
        }
        this.log(`Init Group for Creation / Modification: ${this.actGroup.groupName} ID ${this.actGroup.gid}`);
    }
    addModifyVCGroup() {
        var newGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGGroup"];
        newGroup.name = this.actGroup.groupName.trim();
        newGroup.global = this.actGroup.checkGlobal;
        newGroup.vcid = this.visbocenter._id;
        newGroup.permission = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPermission"];
        newGroup.permission.vc = this.helperVCPerm(this.actGroup);
        newGroup.permission.vp = this.helperVPPerm(this.actGroup);
        this.log(`Add/Modify VisboCenter Group: Group: ${newGroup.name} New/Modify ${this.actGroup.gid}`);
        if (this.actGroup.gid) {
            // modify existing Group
            this.log(`Modify VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: vc ${newGroup.permission.vc} vp ${newGroup.permission.vp}`);
            newGroup._id = this.actGroup.gid;
            this.visbocenterService.modifyVCGroup(newGroup, true)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Modify VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups = this.vgGroups.filter(vcGroup => vcGroup._id !== newGroup._id);
                this.vgGroups.push(group);
                // update User List to reflect new Group Name & ID
                for (var i = 0; i < this.vgUsers.length; i++) {
                    if (this.vgUsers[i].groupId == newGroup._id) {
                        this.vgUsers[i].groupName = group.name;
                    }
                }
                this.sortUserTable();
                this.sortGroupTable();
                this.alertService.success(`Group ${group.name} changed successfully`);
            }, error => {
                this.log(`Modify VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Modify Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            // create new Group
            this.log(`Add VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: vc ${newGroup.permission.vc} vp ${newGroup.permission.vp}`);
            this.visbocenterService.addVCGroup(newGroup, true)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Add VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups.push(group);
                this.alertService.success(`Group ${group.name} added successfully`);
            }, error => {
                this.log(`Add VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Add Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    removeVCGroup(group) {
        this.log(`Remove VisboCenter Group: ${group.name}/${group._id} VC: ${group.vcid}`);
        this.visbocenterService.deleteVCGroup(group, true)
            .subscribe(response => {
            this.log(`Remove VisboCenter Group result: ${JSON.stringify(response)}`);
            // filter user from vgUsers
            this.vgGroups = this.vgGroups.filter(vcGroup => vcGroup !== group);
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser.groupId !== group._id);
            this.alertService.success(`Group ${group.name} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter Group error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove Group from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    sortUserTable(n = undefined) {
        if (!this.vgUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortUserColumn == undefined) {
            if (n != this.sortUserColumn) {
                this.sortUserColumn = n;
                this.sortUserAscending = undefined;
            }
            if (this.sortUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortUserColumn, this.sortUserAscending)
            }
            else
                this.sortUserAscending = !this.sortUserAscending;
        }
        // this.log(`Sort Users Column ${this.sortUserColumn}`); // log to console instead
        if (this.sortUserColumn == 1) {
            // sort user email
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                if (a.email > b.email)
                    result = 1;
                else if (a.email < b.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortUserColumn == 2) {
            // sort user group name
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.groupName.toLowerCase() > b.groupName.toLowerCase())
                    result = 1;
                else if (a.groupName.toLowerCase() < b.groupName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortUserColumn, this.sortUserAscending)
        if (!this.sortUserAscending) {
            this.vgUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortUserColumn, this.sortUserAscending)
        }
    }
    sortGroupTable(n = undefined) {
        if (!this.vgGroups)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortGroupColumn == undefined) {
            if (n != this.sortGroupColumn) {
                this.sortGroupColumn = n;
                this.sortGroupAscending = undefined;
            }
            if (this.sortGroupAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortGroupAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortGroupColumn, this.sortGroupAscending)
            }
            else
                this.sortGroupAscending = !this.sortGroupAscending;
        }
        // this.log(`Sort Groups Column ${this.sortGroupColumn}`); // log to console instead
        if (this.sortGroupColumn == 1) {
            // sort user email
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortGroupColumn == 2) {
            // sort user group name
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                return b.users.length - a.users.length;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortGroupColumn, this.sortGroupAscending)
        if (!this.sortGroupAscending) {
            this.vgGroups.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortGroupColumn, this.sortGroupAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys VisboCenter Details: ' + message);
    }
};
SysvisbocenterDetailComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__["VisboProjectService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_2__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], SysvisbocenterDetailComponent.prototype, "visbocenter", void 0);
SysvisbocenterDetailComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysvisbocenter-detail',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysvisbocenter-detail.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysvisbocenter-detail.component.css */ "./src/app/sysvisbocenter-detail/sysvisbocenter-detail.component.css")).default]
    })
], SysvisbocenterDetailComponent);



/***/ }),

/***/ "./src/app/sysvisbocenters/sysvisbocenters.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/sysvisbocenters/sysvisbocenters.component.ts ***!
  \**************************************************************/
/*! exports provided: SysVisboCentersComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysVisboCentersComponent", function() { return SysVisboCentersComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");


//import { ActivatedRoute } from '@angular/router';






let SysVisboCentersComponent = class SysVisboCentersComponent {
    constructor(visbocenterService, authenticationService, messageService, alertService, route, 
    //private location: Location,
    router) {
        this.visbocenterService = visbocenterService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.combinedPerm = undefined;
        this.deleted = false;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
    }
    ngOnInit() {
        this.log(`Init SysVC Deleted: ${this.deleted}`);
        this.log(`Init GetVisboCenters ${JSON.stringify(this.route.snapshot.queryParams)}`);
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.getVisboCenters(this.deleted);
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
    }
    onSelect(visbocenter) {
        this.getVisboCenters(this.deleted);
    }
    toggleVisboCenters() {
        this.deleted = !this.deleted;
        this.log(`VC toggleVisboCenters ${this.deleted}`);
        this.getVisboCenters(this.deleted);
        this.router.navigate(['sysvc'], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
        // this.router.navigate(['sysvcDetail/'+visbocenter._id], deleted ? { queryParams: { deleted: deleted }} : {});
    }
    getVisboCenters(deleted) {
        this.log(`VC getVisboCenters ${JSON.stringify(this.combinedPerm)} deleted ${this.deleted}`);
        this.visbocenterService.getVisboCenters(true, deleted)
            .subscribe(visbocenters => {
            this.visbocenters = visbocenters;
            this.sortVCTable(1);
            this.log('get VCs success');
        }, error => {
            this.log(`get VCs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    getSysVisboCenter() {
        var currentUser = this.authenticationService.getActiveUser();
        // console.log("VC getSysVisboCenter for User %s", currentUser.email);
        this.visbocenterService.getSysVisboCenter()
            .subscribe(vc => {
            if (vc.length > 0) {
                this.sysvisbocenter = vc[0];
            }
        });
    }
    add(name, description) {
        name = name.trim();
        description = description.trim();
        this.log(`VC: Add VC: ${name}`);
        if (!name) {
            return;
        }
        this.visbocenterService.addVisboCenter({ name: name, description: description }).subscribe(vc => {
            this.visbocenters.push(vc);
            this.sortVCTable(undefined);
            this.alertService.success(`Visbo Center ${vc.name} created successfully`);
        }, error => {
            this.log(`add VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied for Visbo Center ${name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Center Name ${name} already exists or not allowed`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    delete(visbocenter) {
        // remove item from list
        this.messageService.add(`VC: Delete VC: ${visbocenter.name} ID: ${visbocenter._id}`);
        this.visbocenters = this.visbocenters.filter(vc => vc !== visbocenter);
        this.visbocenterService.deleteVisboCenter(visbocenter).subscribe(error => {
            this.log(`delete VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoDetail(visbocenter) {
        var deleted = visbocenter.deletedAt ? true : false;
        this.log(`navigate to VC Detail ${visbocenter._id} Deleted ${deleted}`);
        this.router.navigate(['sysvcDetail/' + visbocenter._id], deleted ? { queryParams: { deleted: deleted } } : {});
    }
    gotoClickedRow(visbocenter) {
        this.log(`clicked row ${visbocenter.name}`);
        // check that the user has Permission to see VPs
        if (this.hasVPPerm(this.permVC.View))
            this.router.navigate(['sysvp/' + visbocenter._id]);
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    hasVCPerm(perm) {
        return (this.combinedPerm.vc & perm) > 0;
    }
    hasVPPerm(perm) {
        return (this.combinedPerm.vp & perm) > 0;
    }
    sortVCTable(n) {
        if (!this.visbocenters)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortColumn == undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = n == 1 ? true : false;
                // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.visbocenters.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.visbocenters.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort VP Count
            this.visbocenters.sort(function (a, b) { return a.vpCount - b.vpCount; });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.visbocenters.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys VisboCenter: ' + message);
    }
};
SysVisboCentersComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__["VisboCenterService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysVisboCentersComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysvisbocenters',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysvisbocenters.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbocenters/sysvisbocenters.component.html")).default
    })
], SysVisboCentersComponent);



/***/ }),

/***/ "./src/app/sysvisboproject-detail/sysvisboproject-detail.component.css":
/*!*****************************************************************************!*\
  !*** ./src/app/sysvisboproject-detail/sysvisboproject-detail.component.css ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzdmlzYm9wcm9qZWN0LWRldGFpbC9zeXN2aXNib3Byb2plY3QtZGV0YWlsLmNvbXBvbmVudC5jc3MifQ== */");

/***/ }),

/***/ "./src/app/sysvisboproject-detail/sysvisboproject-detail.component.ts":
/*!****************************************************************************!*\
  !*** ./src/app/sysvisboproject-detail/sysvisboproject-detail.component.ts ***!
  \****************************************************************************/
/*! exports provided: SysvisboprojectDetailComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysvisboprojectDetailComponent", function() { return SysvisboprojectDetailComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");










let SysvisboprojectDetailComponent = class SysvisboprojectDetailComponent {
    constructor(messageService, visbocenterService, authenticationService, route, visboprojectService, location, alertService, router) {
        this.messageService = messageService;
        this.visbocenterService = visbocenterService;
        this.authenticationService = authenticationService;
        this.route = route;
        this.visboprojectService = visboprojectService;
        this.location = location;
        this.alertService = alertService;
        this.router = router;
        this.actGroup = {};
        this.newUserInvite = {};
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
        this.deleted = false;
        this.sortUserColumn = 1;
        this.sortUserAscending = true;
        this.sortGroupColumn = 1;
        this.sortGroupAscending = true;
    }
    ngOnInit() {
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
        this.getVisboProject();
        this.getVisboProjectUsers();
        this.log(`SysAdmin Role: ${JSON.stringify(this.combinedPerm)}`);
    }
    getVisboProject() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboProject Detail of: ' + id);
        this.visboprojectService.getVisboProject(id, true)
            .subscribe(visboproject => {
            this.visboproject = visboproject;
            this.combinedPerm = visboproject.perm;
            this.log(`Get VisboProject ${id} Perm ${JSON.stringify(this.combinedPerm)}`);
        }, error => {
            this.log(`get VPs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    gotoVPAudit(visboproject) {
        this.log(`GoTo VP Audit ${visboproject.name} ${this.visboproject.name}`);
        this.router.navigate(['vpAudit/'.concat(visboproject._id)], { queryParams: { sysadmin: 1 } });
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    hasVCPerm(perm) {
        return (this.combinedPerm.vc & perm) > 0;
    }
    hasVPPerm(perm) {
        return (this.combinedPerm.vp & perm) > 0;
    }
    toggleUserGroup() {
        this.showGroups = !this.showGroups;
    }
    getVisboProjectUsers() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboProject UserList of: ' + id);
        this.visboprojectService.getVPUsers(id, true)
            .subscribe(mix => {
            this.vgUsers = mix.users;
            this.vgGroups = mix.groups;
            this.log(`fetched Users ${this.vgUsers.length}, Groups ${this.vgGroups.length}`);
            this.sortUserTable();
            this.sortGroupTable();
        }, error => {
            this.log(`Get VP Users failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    goBack() {
        this.location.back();
    }
    delete(visboproject) {
        // remove item from list
        // this.visboprojectService.deleteVisboProject(visboproject).subscribe();
        // this.goBack();
        this.visboprojectService.deleteVisboProject(visboproject)
            .subscribe(() => { this.goBack(); }, error => {
            this.log(`delete VP failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${visboproject.name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVCDetail(visboproject) {
        this.router.navigate(['sysvcDetail/'.concat(visboproject.vcid)]);
    }
    gotoVPList(visboproject) {
        this.router.navigate(['sysvp/'.concat(visboproject.vcid)]);
    }
    save() {
        this.visboprojectService.updateVisboProject(this.visboproject)
            .subscribe((vp) => {
            this.alertService.success(`Visbo Project ${vp.name} updated successfully`, true);
            this.goBack();
        }, error => {
            this.log(`save VP failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${this.visboproject.name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Project ${this.visboproject.name} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    addNewVPUser() {
        var email = this.newUserInvite.email.trim();
        var groupName = this.newUserInvite.groupName.trim();
        var inviteGroup = this.vgGroups.filter(group => group.name == groupName)[0];
        var groupId = inviteGroup._id;
        var inviteMessage = '';
        if (this.newUserInvite.inviteMessage)
            inviteMessage = this.newUserInvite.inviteMessage.trim();
        var vpid = this.visboproject._id;
        this.log(`Add VisboProject User: ${email} Group: ${groupName}/${groupId} VP: ${vpid}`);
        if (!email || !groupId) {
            return;
        }
        this.visboprojectService.addVPUser(email, groupId, inviteMessage, vpid, true)
            .subscribe(group => {
            // Add User to User & Group list
            var newUserGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGUserGroup"]();
            newUserGroup.userId = group.users.filter(user => user.email == email)[0].userId;
            newUserGroup.email = email;
            newUserGroup.groupId = group._id;
            newUserGroup.groupName = group.name;
            newUserGroup.groupType = inviteGroup.groupType;
            newUserGroup.internal = inviteGroup.internal;
            this.log(`Add VisboCenter User Push: ${JSON.stringify(newUserGroup)}`);
            this.vgUsers.push(newUserGroup);
            this.sortUserTable();
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == group._id) {
                    this.vgGroups[i] = group;
                    break;
                }
            }
            this.alertService.success(`User ${email} added successfully`);
        }, error => {
            this.log(`Add VisboProject User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Add User to Visbo Project`);
            }
            else {
                this.log(`Error during add VP user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperRemoveUser(memberIndex) {
        // this.log(`Remove User Helper: ${userIndex}`);
        this.userIndex = memberIndex;
    }
    helperRemoveGroup(memberIndex) {
        this.groupIndex = memberIndex;
    }
    removeVPUser(user, vpid) {
        this.log(`Remove VisboProject User: ${user.email}/${user.userId} Group: ${user.groupName} VP: ${vpid}`);
        this.visboprojectService.deleteVPUser(user, vpid, true)
            .subscribe(users => {
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser !== user);
            // filter user from vgGroups
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == user.groupId) {
                    for (var j = 0; j < this.vgGroups[i].users.length; j++) {
                        if (this.vgGroups[i].users[j].userId == user.userId) {
                            this.vgGroups[i].users.splice(j, 1); // remove item from array
                            break;
                        }
                    }
                    break;
                }
            }
            this.alertService.success(`User ${user.email} removed successfully`);
        }, error => {
            this.log(`Remove VisboProject User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove User from Visbo Project`);
            }
            else {
                this.log(`Error during remove User from VP user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperVPPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedVPView)
            perm += this.permVP.View;
        if (newGroup.checkedVPViewAudit)
            perm += this.permVP.ViewAudit;
        if (newGroup.checkedVPModify)
            perm += this.permVP.Modify;
        if (newGroup.checkedCreateVariant)
            perm += this.permVP.CreateVariant;
        if (newGroup.checkedVPManagePerm)
            perm += this.permVP.ManagePerm;
        if (newGroup.checkedVPDelete)
            perm += this.permVP.DeleteVP;
        return perm;
    }
    initGroup(curGroup) {
        if (curGroup) {
            this.actGroup.confirm = (curGroup.groupType == 'VP') ? 'Modify' : 'View';
            this.actGroup.gid = curGroup._id;
            this.log(`Init Group Set GroupID : ${this.actGroup.gid} ID ${curGroup._id}`);
            this.actGroup.groupName = curGroup.name;
            this.actGroup.groupType = curGroup.groupType;
            this.actGroup.internal = curGroup.internal;
            this.actGroup.checkGlobal = curGroup.global;
            this.actGroup.checkedView = (curGroup.permission.vc & this.permVC.View) > 0;
            this.actGroup.checkedViewAudit = (curGroup.permission.vc & this.permVC.ViewAudit) > 0;
            this.actGroup.checkedModify = (curGroup.permission.vc & this.permVC.Modify) > 0;
            this.actGroup.checkedCreateVP = (curGroup.permission.vc & this.permVC.CreateVP) > 0;
            this.actGroup.checkedManagePerm = (curGroup.permission.vc & this.permVC.ManagePerm) > 0;
            this.actGroup.checkedVPView = (curGroup.permission.vp & this.permVP.View) > 0;
            this.actGroup.checkedVPViewAudit = (curGroup.permission.vp & this.permVP.ViewAudit) > 0;
            this.actGroup.checkedVPModify = (curGroup.permission.vp & this.permVP.Modify) > 0;
            this.actGroup.checkedCreateVariant = (curGroup.permission.vp & this.permVP.CreateVariant) > 0;
            this.actGroup.checkedVPManagePerm = (curGroup.permission.vp & this.permVP.ManagePerm) > 0;
            this.actGroup.checkedVPDelete = (curGroup.permission.vp & this.permVP.DeleteVP) > 0;
        }
        else {
            this.actGroup.confirm = 'Add';
            this.actGroup.gid = undefined;
            this.actGroup.groupName = '';
            this.actGroup.groupType = 'VP';
            this.actGroup.internal = false;
            this.actGroup.checkGlobal = false;
            this.actGroup.checkedView = true;
        }
        this.log(`Init Group for Creation / Modification: ${this.actGroup.groupName} ID ${this.actGroup.gid} Action ${this.actGroup.confirm} `);
    }
    addModifyVPGroup() {
        var newGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGGroup"];
        this.log(`Modify VisboProject Group: Group: ${this.actGroup.groupName} VC: ${this.visboproject.vcid} VP: ${this.visboproject._id} }`);
        newGroup.name = this.actGroup.groupName.trim();
        newGroup.global = false;
        newGroup.vcid = this.visboproject.vcid;
        newGroup.vpids = [];
        newGroup.vpids.push(this.visboproject._id);
        newGroup.permission = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPermission"];
        newGroup.permission.vp = this.helperVPPerm(this.actGroup);
        if (this.actGroup.gid) {
            // modify existing Group
            this.log(`Modify VisboProject Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: ${JSON.stringify(newGroup.permission)}`);
            newGroup._id = this.actGroup.gid;
            this.visboprojectService.modifyVPGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                this.log(`Modify VisboProject Group Push: ${JSON.stringify(group)}`);
                this.vgGroups = this.vgGroups.filter(vgGroup => vgGroup._id !== newGroup._id);
                this.vgGroups.push(group);
                // update User List to reflect new Group Name & ID
                for (var i = 0; i < this.vgUsers.length; i++) {
                    if (this.vgUsers[i].groupId == newGroup._id) {
                        this.vgUsers[i].groupName = group.name;
                    }
                }
                this.sortUserTable();
                this.sortGroupTable();
                this.alertService.success(`Group ${group.name} changed successfully`);
            }, error => {
                this.log(`Modify VisboProject Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Modify Group to Visbo Project`);
                }
                else {
                    this.log(`Error during modify VP Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            // create new Group
            this.log(`Add VisboCenter Group: Group: ${newGroup.name} VP: ${newGroup.vpids[0]} Perm: ${JSON.stringify(newGroup.permission)}`);
            this.visboprojectService.addVPGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Add VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups.push(group);
                this.alertService.success(`Group ${group.name} added successfully`);
            }, error => {
                this.log(`Add VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Add Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    sortUserTable(n = undefined) {
        if (!this.vgUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortUserColumn == undefined) {
            if (n != this.sortUserColumn) {
                this.sortUserColumn = n;
                this.sortUserAscending = undefined;
            }
            if (this.sortUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortUserColumn, this.sortUserAscending)
            }
            else
                this.sortUserAscending = !this.sortUserAscending;
        }
        // this.log(`Sort Users Column ${this.sortUserColumn}`); // log to console instead
        if (this.sortUserColumn == 1) {
            // sort user email
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                if (a.email > b.email)
                    result = 1;
                else if (a.email < b.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortUserColumn == 2) {
            // sort user group name
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.groupName.toLowerCase() > b.groupName.toLowerCase())
                    result = 1;
                else if (a.groupName.toLowerCase() < b.groupName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortUserColumn, this.sortUserAscending)
        if (!this.sortUserAscending) {
            this.vgUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortUserColumn, this.sortUserAscending)
        }
    }
    sortGroupTable(n = undefined) {
        if (!this.vgGroups)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortGroupColumn == undefined) {
            if (n != this.sortGroupColumn) {
                this.sortGroupColumn = n;
                this.sortGroupAscending = undefined;
            }
            if (this.sortGroupAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortGroupAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortGroupColumn, this.sortGroupAscending)
            }
            else
                this.sortGroupAscending = !this.sortGroupAscending;
        }
        // this.log(`Sort Groups Column ${this.sortGroupColumn}`); // log to console instead
        if (this.sortGroupColumn == 1) {
            // sort user email
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortGroupColumn == 2) {
            // sort user group name
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                return b.users.length - a.users.length;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortGroupColumn, this.sortGroupAscending)
        if (!this.sortGroupAscending) {
            this.vgGroups.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortGroupColumn, this.sortGroupAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectDetail: ' + message);
    }
};
SysvisboprojectDetailComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__["VisboProjectService"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_2__["Location"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], SysvisboprojectDetailComponent.prototype, "visboproject", void 0);
SysvisboprojectDetailComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysvisboproject-detail',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysvisboproject-detail.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboproject-detail/sysvisboproject-detail.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysvisboproject-detail.component.css */ "./src/app/sysvisboproject-detail/sysvisboproject-detail.component.css")).default]
    })
], SysvisboprojectDetailComponent);



/***/ }),

/***/ "./src/app/sysvisboprojects/sysvisboprojects.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/sysvisboprojects/sysvisboprojects.component.ts ***!
  \****************************************************************/
/*! exports provided: SysVisboProjectsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysVisboProjectsComponent", function() { return SysVisboProjectsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");









let SysVisboProjectsComponent = class SysVisboProjectsComponent {
    constructor(authenticationService, messageService, alertService, visboprojectService, visbocenterService, route, 
    //private location: Location,
    router) {
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.visboprojectService = visboprojectService;
        this.visbocenterService = visbocenterService;
        this.route = route;
        this.router = router;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVP"];
    }
    ngOnInit() {
        // console.log("Init VisboProjects");
        this.getVisboProjects();
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
    }
    onSelect(visboproject) {
        this.getVisboProjects();
    }
    getVisboProjects() {
        this.log(`VP getSysVisboProjects SysAdminRole ${JSON.stringify(this.combinedPerm)}`);
        const id = this.route.snapshot.paramMap.get('id');
        var i;
        var currentUser = this.authenticationService.getActiveUser();
        this.vcSelected = id;
        if (id) {
            this.visbocenterService.getVisboCenter(id, true)
                .subscribe(visbocenters => {
                this.vcActive = visbocenters;
                this.combinedPerm = visbocenters.perm;
                this.log(`Get VisboProject for VC ${id} Perm ${JSON.stringify(this.combinedPerm)}`);
                this.visboprojectService.getVisboProjects(id, true)
                    .subscribe(visboprojects => {
                    this.visboprojects = visboprojects;
                    this.sortVPTable(1);
                }, error => {
                    this.log(`get VPs failed: error:  ${error.status} message: ${error.error.message}`);
                    this.alertService.error(error.error.message);
                });
            }, error => {
                this.log(`get VC failed: error:  ${error.status} message: ${error.error.message}`);
                this.alertService.error(error.error.message);
            });
        }
        else {
            this.vcSelected = null;
            this.vcActive = null;
            this.visboprojectService.getVisboProjects(null, true)
                .subscribe(visboprojects => {
                this.visboprojects = visboprojects;
                this.sortVPTable(1);
            }, error => {
                this.log(`get VPs all failed: error:  ${error.status} message: ${error.error.message}`);
                this.alertService.error(error.error.message);
            });
        }
    }
    // addproject(name: string, vcid: string, desc: string, vpPublic: boolean): void {
    //   name = name.trim();
    //   this.log(`call create VP ${name} with VCID ${vcid} Desc ${desc} Public ${vpPublic}`);
    //   if (!name) { return; }
    //   this.visboprojectService.addVisboProject({ name: name, description: desc, vpPublic: vpPublic == true, vcid: vcid } as VisboProject).subscribe(
    //     vp => {
    //       // console.log("add VP %s with ID %s to VC %s", vp[0].name, vp[0]._id, vp[0].vcid);
    //       this.visboprojects.push(vp);
    //       this.sortVPTable(undefined);
    //       this.alertService.success(`Visbo Project ${vp.name} created successfully`);
    //     },
    //     error => {
    //       this.log(`add VP failed: error: ${error.status} messages: ${error.error.message}`);
    //       if (error.status == 403) {
    //         this.alertService.error(`Permission Denied for Visbo Project ${name}`);
    //       } else if (error.status == 409) {
    //         // this.alertService.error(`Visbo Project ${name} already exists or not allowed`);
    //         this.alertService.error('Visbo Project already exists or not allowed');
    //       } else {
    //         this.alertService.error(error.error.message);
    //       }
    //     }
    //   );
    // }
    //
    // delete(visboproject: VisboProject): void {
    //   // remove item from list
    //   this.visboprojects = this.visboprojects.filter(vp => vp !== visboproject);
    //   this.visboprojectService.deleteVisboProject(visboproject)
    //     .subscribe(
    //       error => {
    //         // this.log(`delete VP failed: error: ${error.status} messages: ${error.error.message}`);
    //         if (error.status == 403) {
    //           this.alertService.error(`Permission Denied: Visbo Project ${name}`, true);
    //         } else {
    //           this.alertService.error(error.error.message);
    //         }
    //       }
    //     );
    // }
    gotoClickedRow(visboproject) {
        console.log("clicked row %s", visboproject.name);
        // this.router.navigate(['vpKeyMetrics/'.concat(visboproject._id)]);
    }
    gotoDetail(visboproject) {
        this.router.navigate(['sysvpDetail/'.concat(visboproject._id)]);
    }
    gotoVCDetail(visbocenter) {
        this.router.navigate(['sysvcDetail/'.concat(visbocenter._id)]);
    }
    sortVPTable(n) {
        if (n != undefined) {
            if (!this.visboprojects)
                return;
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = n == 1 || n == 3 ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // console.log("Sort VP Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            // sort by VP Name
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by VP updatedAt
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by VC Name
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.vc.name.toLowerCase() > b.vc.name.toLowerCase())
                    result = 1;
                else if (a.vc.name.toLowerCase() < b.vc.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by VC vpvCount
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.vpvCount > b.vpvCount)
                    result = 1;
                else if (a.vpvCount < b.vpvCount)
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VP Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.visboprojects.reverse();
            // console.log("Sort VP Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProject: ' + message);
    }
};
SysVisboProjectsComponent.ctorParameters = () => [
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_6__["VisboProjectService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_7__["VisboCenterService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
SysVisboProjectsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysvisboprojects',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysvisboprojects.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisboprojects/sysvisboprojects.component.html")).default
    })
], SysVisboProjectsComponent);



/***/ }),

/***/ "./src/app/sysvisbosystem/sysvisbosystem.component.css":
/*!*************************************************************!*\
  !*** ./src/app/sysvisbosystem/sysvisbosystem.component.css ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvc3lzdmlzYm9zeXN0ZW0vc3lzdmlzYm9zeXN0ZW0uY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/sysvisbosystem/sysvisbosystem.component.ts":
/*!************************************************************!*\
  !*** ./src/app/sysvisbosystem/sysvisbosystem.component.ts ***!
  \************************************************************/
/*! exports provided: SysvisbosystemComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SysvisbosystemComponent", function() { return SysvisbosystemComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");



//import { ActivatedRoute } from '@angular/router';







let SysvisbosystemComponent = class SysvisbosystemComponent {
    constructor(messageService, visbocenterService, visboprojectService, route, location, router, authenticationService, alertService) {
        this.messageService = messageService;
        this.visbocenterService = visbocenterService;
        this.visboprojectService = visboprojectService;
        this.route = route;
        this.location = location;
        this.router = router;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.newUserInvite = {};
        this.actGroup = {};
        this.combinedPerm = undefined;
        this.permSystem = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPSystem"];
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
        this.sortUserColumn = 1;
        this.sortUserAscending = true;
        this.sortGroupColumn = 1;
        this.sortGroupAscending = true;
    }
    ngOnInit() {
        this.log(`Init SysAdmin`);
        this.getSysVisboCenter();
        this.combinedPerm = this.visbocenterService.getSysAdminRole();
    }
    getSysVisboCenter() {
        this.visbocenterService.getSysVisboCenter()
            .subscribe(vc => {
            this.visbocenter = vc[0];
            this.getVisboCenterUsers();
            this.log(`System VisboCenter initialised ${this.visbocenter._id} Perm Sys ${JSON.stringify(this.combinedPerm)} `);
        }, error => {
            this.log(`get VC failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${this.visbocenter.name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    hasSystemPerm(perm) {
        return (this.combinedPerm.system & perm) > 0;
    }
    hasVCPerm(perm) {
        return (this.combinedPerm.vc & perm) > 0;
    }
    hasVPPerm(perm) {
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboCenterUsers() {
        const id = this.visbocenter._id;
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboCenter UserList of: ' + id);
        this.visbocenterService.getVCUsers(id, true)
            .subscribe(mix => {
            this.vcUsers = mix.users;
            this.vcGroups = mix.groups;
            this.log(`fetched Users ${this.vcUsers.length}, Groups ${this.vcGroups.length}`);
            this.sortUserTable();
            this.sortGroupTable();
        }, error => {
            this.log(`Get VC Users failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVPList(visbocenter) {
        this.router.navigate(['sysvp/'.concat(visbocenter._id)]);
    }
    goBack() {
        // this.log(`VC Details go Back ${JSON.stringify(this.location)}`)
        this.location.back();
    }
    save() {
        this.visbocenterService.updateVisboCenter(this.visbocenter)
            .subscribe(vc => {
            this.alertService.success(`Visbo Center ${vc.name} updated successfully`, true);
            // this.goBack()
        }, error => {
            this.log(`save VC failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${this.visbocenter.name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Center ${this.visbocenter.name} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    toggleUserGroup() {
        this.showGroups = !this.showGroups;
    }
    addNewVCUser() {
        var email = this.newUserInvite.email.trim();
        var groupName = this.newUserInvite.groupName.trim();
        var groupId = this.vcGroups.filter(group => group.name == groupName)[0]._id;
        var inviteMessage = '';
        if (this.newUserInvite.inviteMessage)
            inviteMessage = this.newUserInvite.inviteMessage.trim();
        var vcid = this.visbocenter._id;
        this.log(`Add VisboCenter User: ${email} Group: ${groupName}/${groupId} VC: ${vcid}`);
        if (!email || !groupId) {
            return;
        }
        this.visbocenterService.addVCUser(email, groupId, inviteMessage, vcid, true)
            .subscribe(group => {
            // Add User to User & Group list
            var newUserGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGUserGroup"]();
            newUserGroup.userId = group.users.filter(user => user.email == email)[0].userId;
            newUserGroup.email = email;
            newUserGroup.groupId = group._id;
            newUserGroup.groupName = group.name;
            this.log(`Add VisboCenter User Push: ${JSON.stringify(newUserGroup)}`);
            this.vcUsers.push(newUserGroup);
            this.sortUserTable();
            for (var i = 0; i < this.vcGroups.length; i++) {
                if (this.vcGroups[i]._id == group._id) {
                    this.vcGroups[i] = group;
                    break;
                }
            }
            this.alertService.success(`User ${email} added successfully`);
        }, error => {
            this.log(`Add VisboCenter User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Add User to Visbo Center`);
            }
            else {
                this.log(`Error during add VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperRemoveUser(memberIndex) {
        this.userIndex = memberIndex;
    }
    helperRemoveGroup(memberIndex) {
        this.groupIndex = memberIndex;
    }
    removeVCUser(user, vcid) {
        this.log(`Remove VisboCenter User: ${user.email}/${user.userId} Group: ${user.groupName} VC: ${vcid}`);
        this.visbocenterService.deleteVCUser(user, vcid, true)
            .subscribe(users => {
            // this.log(`Remove VisboCenter User result: ${JSON.stringify(result)}`);
            // this.visbocenter.users = users;
            // filter user from vcUsers
            this.vcUsers = this.vcUsers.filter(vcUser => vcUser !== user);
            // filter user from vcGroups
            for (var i = 0; i < this.vcGroups.length; i++) {
                if (this.vcGroups[i]._id == user.groupId) {
                    for (var j = 0; j < this.vcGroups[i].users.length; j++) {
                        if (this.vcGroups[i].users[j].userId == user.userId) {
                            this.vcGroups[i].users.splice(j, 1); // remove item from array
                            break;
                        }
                    }
                    break;
                }
            }
            this.alertService.success(`User ${user.email} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove User from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperSystemPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedSystemView)
            perm += this.permSystem.View;
        if (newGroup.checkedSystemViewAudit)
            perm += this.permSystem.ViewAudit;
        if (newGroup.checkedSystemViewLog)
            perm += this.permSystem.ViewLog;
        if (newGroup.checkedSystemModify)
            perm += this.permSystem.Modify;
        if (newGroup.checkedSystemCreateVC)
            perm += this.permSystem.CreateVC;
        if (newGroup.checkedSystemDeleteVC)
            perm += this.permSystem.DeleteVC;
        if (newGroup.checkedSystemManagePerm)
            perm += this.permSystem.ManagePerm;
        return perm;
    }
    helperVCPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedView)
            perm += this.permVC.View;
        if (newGroup.checkedViewAudit)
            perm += this.permVC.ViewAudit;
        if (newGroup.checkedModify)
            perm += this.permVC.Modify;
        if (newGroup.checkedCreateVP)
            perm += this.permVC.CreateVP;
        if (newGroup.checkedManagePerm)
            perm += this.permVC.ManagePerm;
        return perm;
    }
    helperVPPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedVPView)
            perm += this.permVP.View;
        if (newGroup.checkedVPViewAudit)
            perm += this.permVP.ViewAudit;
        if (newGroup.checkedVPModify)
            perm += this.permVP.Modify;
        if (newGroup.checkedCreateVariant)
            perm += this.permVP.CreateVariant;
        if (newGroup.checkedVPManagePerm)
            perm += this.permVP.ManagePerm;
        if (newGroup.checkedVPDelete)
            perm += this.permVP.DeleteVP;
        return perm;
    }
    initGroup(curGroup) {
        if (curGroup) {
            this.actGroup.confirm = 'Modify';
            this.actGroup.gid = curGroup._id;
            this.log(`Init Group Set GroupID : ${this.actGroup.gid} ID ${curGroup._id}`);
            this.actGroup.groupName = curGroup.name;
            this.actGroup.checkedSystemView = (curGroup.permission.system & this.permSystem.View) > 0;
            this.actGroup.checkedSystemViewAudit = (curGroup.permission.system & this.permSystem.ViewAudit) > 0;
            this.actGroup.checkedSystemViewLog = (curGroup.permission.system & this.permSystem.ViewLog) > 0;
            this.actGroup.checkedSystemModify = (curGroup.permission.system & this.permSystem.Modify) > 0;
            this.actGroup.checkedSystemCreateVC = (curGroup.permission.system & this.permSystem.CreateVC) > 0;
            this.actGroup.checkedSystemDeleteVC = (curGroup.permission.system & this.permSystem.DeleteVC) > 0;
            this.actGroup.checkedSystemManagePerm = (curGroup.permission.system & this.permSystem.ManagePerm) > 0;
            this.actGroup.checkGlobal = curGroup.global;
            this.actGroup.checkedView = (curGroup.permission.vc & this.permVC.View) > 0;
            this.actGroup.checkedViewAudit = (curGroup.permission.vc & this.permVC.ViewAudit) > 0;
            this.actGroup.checkedModify = (curGroup.permission.vc & this.permVC.Modify) > 0;
            this.actGroup.checkedCreateVP = (curGroup.permission.vc & this.permVC.CreateVP) > 0;
            this.actGroup.checkedManagePerm = (curGroup.permission.vc & this.permVC.ManagePerm) > 0;
            this.actGroup.checkedVPView = (curGroup.permission.vp & this.permVP.View) > 0;
            this.actGroup.checkedVPViewAudit = (curGroup.permission.vp & this.permVP.ViewAudit) > 0;
            this.actGroup.checkedVPModify = (curGroup.permission.vp & this.permVP.Modify) > 0;
            this.actGroup.checkedCreateVariant = (curGroup.permission.vp & this.permVP.CreateVariant) > 0;
            this.actGroup.checkedVPManagePerm = (curGroup.permission.vp & this.permVP.ManagePerm) > 0;
            this.actGroup.checkedVPDelete = (curGroup.permission.vp & this.permVP.DeleteVP) > 0;
        }
        else {
            this.actGroup.confirm = 'Add';
            this.actGroup.gid = undefined;
            this.actGroup.groupName = '';
            this.actGroup.checkGlobal = false;
            this.actGroup.checkedView = true;
        }
        this.log(`Init Group for Creation / Modification: ${this.actGroup.groupName} ID ${this.actGroup.gid}`);
    }
    addModifyVCGroup() {
        var newGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGGroup"];
        newGroup.name = this.actGroup.groupName.trim();
        newGroup.global = this.actGroup.checkGlobal;
        newGroup.vcid = this.visbocenter._id;
        newGroup.permission = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPermission"];
        newGroup.permission.system = this.helperSystemPerm(this.actGroup);
        if (newGroup.global) {
            newGroup.permission.vc = this.helperVCPerm(this.actGroup);
            newGroup.permission.vp = this.helperVPPerm(this.actGroup);
        }
        this.log(`Add/Modify VisboCenter Group: Group: ${newGroup.name} New/Modify ${this.actGroup.gid} Perm: ${JSON.stringify(newGroup.permission)}`);
        if (this.actGroup.gid) {
            // modify existing Group
            this.log(`Modify VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: ${JSON.stringify(newGroup.permission)}`);
            newGroup._id = this.actGroup.gid;
            this.visbocenterService.modifyVCGroup(newGroup, true)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Modify VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vcGroups = this.vcGroups.filter(vcGroup => vcGroup._id !== newGroup._id);
                this.vcGroups.push(group);
                // update User List to reflect new Group Name & ID
                for (var i = 0; i < this.vcUsers.length; i++) {
                    if (this.vcUsers[i].groupId == newGroup._id) {
                        this.vcUsers[i].groupName = group.name;
                    }
                }
                this.sortUserTable();
                this.sortGroupTable();
                this.alertService.success(`Group ${group.name} changed successfully`);
            }, error => {
                this.log(`Modify VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Modify Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            // create new Group
            this.log(`Add VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: vc ${JSON.stringify(newGroup.permission)}`);
            this.visbocenterService.addVCGroup(newGroup, true)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Add VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vcGroups.push(group);
                this.alertService.success(`Group ${group.name} added successfully`);
            }, error => {
                this.log(`Add VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Add Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    removeVCGroup(group) {
        this.log(`Remove VisboCenter Group: ${group.name}/${group._id} VC: ${group.vcid}`);
        this.visbocenterService.deleteVCGroup(group, true)
            .subscribe(response => {
            this.log(`Remove VisboCenter Group result: ${JSON.stringify(response)}`);
            // filter user from vcUsers
            this.vcGroups = this.vcGroups.filter(vcGroup => vcGroup !== group);
            this.vcUsers = this.vcUsers.filter(vcUser => vcUser.groupId !== group._id);
            this.alertService.success(`Group ${group.name} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter Group error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove Group from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    sortUserTable(n = undefined) {
        if (!this.vcUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortUserColumn == undefined) {
            if (n != this.sortUserColumn) {
                this.sortUserColumn = n;
                this.sortUserAscending = undefined;
            }
            if (this.sortUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortUserColumn, this.sortUserAscending)
            }
            else
                this.sortUserAscending = !this.sortUserAscending;
        }
        if (this.sortUserColumn == 1) {
            // sort user email
            this.vcUsers.sort(function (a, b) {
                var result = 0;
                if (a.email > b.email)
                    result = 1;
                else if (a.email < b.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortUserColumn == 2) {
            // sort user group name
            this.vcUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.groupName.toLowerCase() > b.groupName.toLowerCase())
                    result = 1;
                else if (a.groupName.toLowerCase() < b.groupName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortUserColumn, this.sortUserAscending)
        if (!this.sortUserAscending) {
            this.vcUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortUserColumn, this.sortUserAscending)
        }
    }
    sortGroupTable(n = undefined) {
        if (!this.vcGroups)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortGroupColumn == undefined) {
            if (n != this.sortGroupColumn) {
                this.sortGroupColumn = n;
                this.sortGroupAscending = undefined;
            }
            if (this.sortGroupAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortGroupAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortGroupColumn, this.sortGroupAscending)
            }
            else
                this.sortGroupAscending = !this.sortGroupAscending;
        }
        // this.log(`Sort Groups Column ${this.sortGroupColumn}`); // log to console instead
        if (this.sortGroupColumn == 1) {
            // sort user email
            this.vcGroups.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortGroupColumn == 2) {
            // sort user group name
            this.vcGroups.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                return b.users.length - a.users.length;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortGroupColumn, this.sortGroupAscending)
        if (!this.sortGroupAscending) {
            this.vcGroups.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortGroupColumn, this.sortGroupAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Sys VisboCenter: ' + message);
    }
};
SysvisbosystemComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_9__["VisboProjectService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["ActivatedRoute"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_2__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_3__["Router"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] }
];
SysvisbosystemComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-sysvisbosystem',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./sysvisbosystem.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/sysvisbosystem/sysvisbosystem.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./sysvisbosystem.component.css */ "./src/app/sysvisbosystem/sysvisbosystem.component.css")).default]
    })
], SysvisbosystemComponent);



/***/ }),

/***/ "./src/app/userprofile/userprofile.component.ts":
/*!******************************************************!*\
  !*** ./src/app/userprofile/userprofile.component.ts ***!
  \******************************************************/
/*! exports provided: UserProfileComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserProfileComponent", function() { return UserProfileComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_user_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/user.service */ "./src/app/_services/user.service.ts");
/* harmony import */ var _models_login__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/login */ "./src/app/_models/login.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");








let UserProfileComponent = class UserProfileComponent {
    constructor(userService, messageService, alertService, route, authenticationService, 
    //private location: Location,
    router) {
        this.userService = userService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.authenticationService = authenticationService;
        this.router = router;
        this.model = {};
        this.modelPw = {};
        this.loading = false;
    }
    ngOnInit() {
        this.getPWPolicy();
        this.log(`Start init User Get Profile `);
        this.modelPw = {};
        this.getUserProfile();
    }
    getUserProfile() {
        this.log("User Get Profile");
        this.userService.getUserProfile()
            .subscribe(user => {
            this.user = user;
            this.model.email = user.email;
            this.model.updatedAt = user.updatedAt;
            if (user.profile) {
                this.model.firstName = user.profile.firstName;
                this.model.lastName = user.profile.lastName;
                this.model.company = user.profile.company;
                this.model.phone = user.profile.phone;
            }
            if (user.status) {
                this.model.registeredAt = user.status.registeredAt;
                this.model.lastLoginAt = user.status.lastLoginAt;
                this.model.lastLoginFailedAt = user.status.lastLoginFailedAt;
            }
            this.log(`get User Profile success ${user.email}`);
        }, error => {
            this.log(`get User profile failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    saveUserProfile() {
        this.loading = true;
        this.log(`Save profile info now ${this.model.email}`);
        if (!this.user.profile)
            this.user.profile = new _models_login__WEBPACK_IMPORTED_MODULE_6__["VisboUserProfile"];
        this.user.profile.firstName = this.model.firstName;
        this.user.profile.lastName = this.model.lastName;
        this.user.profile.company = this.model.company;
        this.user.profile.phone = this.model.phone;
        this.userService.updateUserProfile(this.user)
            .subscribe(user => {
            this.log(`Save profile success updatedAt ${user.updatedAt}`);
            this.user = user;
            this.model.email = user.email;
            this.model.updatedAt = user.updatedAt;
            this.model.firstName = user.profile.firstName;
            this.model.lastName = user.profile.lastName;
            this.model.company = user.profile.company;
            this.model.phone = user.profile.phone;
            this.model.registeredAt = user.status.registeredAt;
            this.model.lastLoginAt = user.status.lastLoginAt;
            this.model.lastLoginFailedAt = user.status.lastLoginFailedAt;
            this.alertService.success(`User Profile updated successfully`, true);
            this.loading = false;
        }, error => {
            this.log(`update User profile failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error('Permission Denied');
            }
            else {
                this.alertService.error(error.error.message);
            }
            this.loading = false;
        });
    }
    passwordInit() {
        this.modelPw = {};
    }
    passwordChange() {
        this.log(`Password Change ${this.model.email} Len Old ${this.modelPw.oldpassword.length} New ${this.modelPw.newpassword.length}`);
        var model = {};
        model.oldpassword = this.modelPw.oldpassword;
        model.password = this.modelPw.newpassword;
        this.userService.passwordChange(model)
            .subscribe(user => {
            this.log(`Change Password success updatedAt ${user.updatedAt}`);
            this.user = user;
            this.model.email = user.email;
            this.model.updatedAt = user.updatedAt;
            this.model.firstName = user.profile.firstName;
            this.model.lastName = user.profile.lastName;
            this.model.company = user.profile.company;
            this.model.phone = user.profile.phone;
            this.model.registeredAt = user.status.registeredAt;
            this.model.lastLoginAt = user.status.lastLoginAt;
            this.model.lastLoginFailedAt = user.status.lastLoginFailedAt;
            this.alertService.success(`Password changed successfully`, true);
        }, error => {
            this.log(`change password failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error('Permission Denied');
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    userReset() {
        this.getUserProfile();
    }
    getPWPolicy() {
        this.authenticationService.initPWPolicy()
            .subscribe(data => {
            this.log(`Init PW Policy success ${JSON.stringify(data)}`);
            this.PWPolicy = data.PWPolicy;
            this.PWPolicyDescription = data.Description;
        }, error => {
            this.log(`Init PW Policy Failed: ${error.status} ${error.error.message} `);
            this.alertService.error(error.error.message);
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('UserProfile: ' + message);
    }
};
UserProfileComponent.ctorParameters = () => [
    { type: _services_user_service__WEBPACK_IMPORTED_MODULE_5__["UserService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_3__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_7__["AuthenticationService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
UserProfileComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-userprofile',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./userprofile.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/userprofile/userprofile.component.html")).default
    })
], UserProfileComponent);



/***/ }),

/***/ "./src/app/visbocenter-audit/visbocenter-audit.component.css":
/*!*******************************************************************!*\
  !*** ./src/app/visbocenter-audit/visbocenter-audit.component.css ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvdmlzYm9jZW50ZXItYXVkaXQvdmlzYm9jZW50ZXItYXVkaXQuY29tcG9uZW50LmNzcyJ9 */");

/***/ }),

/***/ "./src/app/visbocenter-audit/visbocenter-audit.component.ts":
/*!******************************************************************!*\
  !*** ./src/app/visbocenter-audit/visbocenter-audit.component.ts ***!
  \******************************************************************/
/*! exports provided: VisbocenterAuditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisbocenterAuditComponent", function() { return VisbocenterAuditComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _models_visboaudit__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visboaudit */ "./src/app/_models/visboaudit.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_services/visboaudit.service */ "./src/app/_services/visboaudit.service.ts");










var encodeCSV = function (source) {
    var result;
    if (!source)
        return source;
    result = source.replace(/\t/g, " ");
    if (result[0] == '=' || result[0] == '+' || result[0] == '-') {
        result = "'".concat(result);
    }
    return result;
};
let VisbocenterAuditComponent = class VisbocenterAuditComponent {
    constructor(visboauditService, visbocenterService, authenticationService, messageService, alertService, route, location, router) {
        this.visboauditService = visboauditService;
        this.visbocenterService = visbocenterService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.location = location;
        this.router = router;
        this.auditTypeList = [
            { name: "All", action: "" },
            { name: "Read", action: "GET" },
            { name: "Create", action: "POST" },
            { name: "Update", action: "PUT" },
            { name: "Delete", action: "DELETE" }
        ];
        this.auditAreaList = [
            { name: "All", action: "" },
            { name: "Visbo Center", action: "vc" },
            { name: "Visbo Project", action: "vp" }
        ];
        this.deleted = false;
    }
    ngOnInit() {
        this.sysadmin = this.route.snapshot.queryParams['sysadmin'];
        this.deleted = this.route.snapshot.queryParams['deleted'] == true;
        const id = this.route.snapshot.paramMap.get('id');
        this.visbocenterService.getVisboCenter(id, this.sysadmin, this.deleted)
            .subscribe(visbocenter => {
            this.visbocenter = visbocenter;
            this.combinedPerm = visbocenter.perm;
            this.log(`VisboCenter initialised ${this.visbocenter._id} Perm ${JSON.stringify(this.combinedPerm)} `);
        }, error => {
            this.log(`Get VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
        this.auditCount = 50;
        this.auditType = this.auditTypeList[0].name;
        this.auditArea = this.auditAreaList[0].name;
        this.today = new Date();
        this.today.setHours(0, 0, 0, 0);
        this.getVisboCenterAudits();
        this.sortTable(undefined);
    }
    getVisboCenterAudits() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        var queryAudit = new _models_visboaudit__WEBPACK_IMPORTED_MODULE_7__["QueryAuditType"];
        this.log(`Audit getVisboCenterAudits from ${this.auditFrom} to ${this.auditTo} Text ${this.auditText} AuditType ${this.auditType}`);
        // set date values if not set or adopt to end of day in case of to date
        if (this.auditTo) {
            queryAudit.to = new Date(this.auditTo);
        }
        else {
            queryAudit.to = new Date();
        }
        if (this.auditFrom) {
            queryAudit.from = new Date(this.auditFrom);
        }
        else {
            // queryAudit.from = new Date(queryAudit.to);
            // queryAudit.from.setDate(queryAudit.from.getDate()-7);
            // queryAudit.from.setHours(0, 0, 0, 0);
        }
        if (this.auditText)
            queryAudit.text = this.auditText.trim();
        for (var i = 0; i < this.auditTypeList.length; i++) {
            if (this.auditType == this.auditTypeList[i].name) {
                queryAudit.actionType = this.auditTypeList[i].action;
                break;
            }
        }
        for (var i = 0; i < this.auditAreaList.length; i++) {
            if (this.auditArea == this.auditAreaList[i].name) {
                queryAudit.area = this.auditAreaList[i].action;
                break;
            }
        }
        queryAudit.maxcount = this.auditCount;
        this.log(`Audit getVisboCenterAudits VC ${id} recalc Query ${JSON.stringify(queryAudit)}`);
        this.visboauditService.getVisboCenterAudits(id, this.sysadmin, this.deleted, queryAudit)
            .subscribe(audit => {
            this.audit = audit;
            this.sortTable(undefined);
            this.log('get Audit success');
        }, error => {
            this.log(`get Audit failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    downloadVisboAudit() {
        this.log(`sysAudit Download ${this.audit.length} Items`);
        var data;
        var separator = "\t";
        var lineItem;
        var userAgent;
        data = 'sep=' + separator + '\n'; // to force excel to use the separator
        data = data + 'date' + separator
            + 'time UTC' + separator
            + 'email' + separator
            + 'actiondDescription' + separator
            + 'action' + separator
            + 'url' + separator
            + 'actionInfo' + separator
            + 'responseTime' + separator
            + 'responseStatus' + separator
            + 'vcid' + separator
            + 'vcname' + separator
            + 'vpid' + separator
            + 'vpname' + separator
            + 'vpvid' + separator
            + 'size' + separator
            + 'ip' + separator
            + 'userId' + separator
            + 'userAgent' + separator
            + 'ttl' + separator
            + 'VC Details' + separator
            + 'VP Details' + '\n';
        var createdAt;
        for (var i = 0; i < this.audit.length; i++) {
            createdAt = new Date(this.audit[i].createdAt).toISOString();
            userAgent = (this.audit[i].userAgent || '').replace(/,/g, ";");
            lineItem = createdAt.substr(0, 10) + separator
                + createdAt.substr(11, 8) + separator
                + encodeCSV(this.audit[i].user.email) + separator
                + encodeCSV(this.audit[i].actionDescription) + separator
                + this.audit[i].action + separator
                + this.audit[i].url + separator
                + this.audit[i].actionInfo + separator
                + (this.audit[i].result ? this.audit[i].result.time : '') + separator
                + (this.audit[i].result ? this.audit[i].result.status : '') + separator
                + (this.audit[i].vc ? this.audit[i].vc.vcid : '') + separator
                + (this.audit[i].vc ? encodeCSV(this.audit[i].vc.name) : '') + separator
                + (this.audit[i].vp ? this.audit[i].vp.vpid : '') + separator
                + (this.audit[i].vp ? encodeCSV(this.audit[i].vp.name) : '') + separator
                + (this.audit[i].vpv ? this.audit[i].vpv.vpvid : '') + separator
                + (this.audit[i].result ? this.audit[i].result.size : '0') + separator
                + this.audit[i].ip + separator
                + this.audit[i].user.userId + separator
                + encodeCSV(userAgent) + separator
                + (this.audit[i].ttl || '') + separator
                + (this.audit[i].vc ? (encodeCSV(this.audit[i].vc.vcjson) || '') : '') + separator
                + (this.audit[i].vp ? (encodeCSV(this.audit[i].vp.vpjson) || '') : '') + '\n';
            data = data.concat(lineItem);
        }
        this.log(`VC Audit CSV Len ${data.length} `);
        var blob = new Blob([data], { type: 'text/plain' });
        var url = window.URL.createObjectURL(blob);
        this.log(`Open URL ${url}`);
        var fileName = `auditlog-VC.csv`;
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.href = url;
        a.download = fileName;
        this.log(`Open URL ${url} doc ${JSON.stringify(a)}`);
        a.click();
        window.URL.revokeObjectURL(url);
    }
    helperAuditIndex(auditIndex) {
        // this.log(`Remove User Helper: ${userIndex}`);
        this.auditIndex = auditIndex;
    }
    helperFormatBytes(a, b = 2) {
        if (0 == a)
            return "0 B";
        var c = 1024, d = b || 2;
        var e = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"];
        var f = Math.floor(Math.log(a) / Math.log(c));
        return parseFloat((a / Math.pow(c, f)).toFixed(d)) + " " + e[f];
    }
    pageAuditIndex(increment) {
        var newAuditIndex;
        newAuditIndex = this.auditIndex + increment;
        if (newAuditIndex < 0)
            newAuditIndex = 0;
        if (newAuditIndex >= this.audit.length)
            newAuditIndex = this.audit.length - 1;
        this.auditIndex = newAuditIndex;
    }
    helperResponseText(visboaudit) {
        if (visboaudit.result.statusText)
            return visboaudit.result.statusText;
        var status = visboaudit.result.status;
        if (status == "200")
            return "Success";
        if (status == "304")
            return "Success";
        if (status == "400")
            return "Bad Request";
        if (status == "401")
            return "Not Authenticated";
        if (status == "403")
            return "Permission Denied";
        if (status == "404")
            return "URL not found";
        if (status == "409")
            return "Conflict";
        if (status == "423")
            return "Locked";
        if (status == "500")
            return "Server Error";
        return status.toString();
    }
    helperShortenText(text, len) {
        if (!text || !len || len < 5 || text.length <= len)
            return (text);
        return text.substring(0, 20).concat('...', text.substring(text.length - 7, text.length));
    }
    goBack() {
        // this.log(`VC Details go Back ${JSON.stringify(this.location)}`)
        this.location.back();
    }
    toggleDetail() {
        this.log(`Toggle ShowMore`);
        this.showMore = !this.showMore;
    }
    isToday(checkDate) {
        // this.log(`Check Date ${checkDate} ${this.today.toISOString()}`);
        return new Date(checkDate) > this.today;
    }
    sortTable(n) {
        if (!this.audit)
            return;
        this.log(`Sort Table Column ${n}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined) {
            // sort a different column
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            else if (this.sortAscending != undefined)
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = undefined;
        }
        if (this.sortAscending == undefined) {
            // sort name column ascending, number values desc first
            this.sortAscending = (n == 2 || n == 3 || n == 4) ? true : false;
            // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.audit.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.createdAt > b.createdAt)
                    result = 1;
                else if (a.createdAt < b.createdAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.user.email.toLowerCase() > b.user.email.toLowerCase())
                    result = 1;
                else if (a.user.email.toLowerCase() < b.user.email.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.action > b.action)
                    result = 1;
                else if (a.action < b.action)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.url > b.url)
                    result = 1;
                else if (a.url < b.url)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort Result
            // this.audit.sort(function(a, b) { return a.result.status.toValue() - b.result.status.toValue() })
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.result.status > b.result.status)
                    result = 1;
                else if (a.result.status < b.result.status)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 6) {
            this.audit.sort(function (a, b) {
                return a.result.time - b.result.time;
            });
        }
        else if (this.sortColumn == 7) {
            this.audit.sort(function (a, b) {
                return (a.result.size || 0) - (b.result.size || 0);
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.audit.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VC Audit: ' + message);
    }
};
VisbocenterAuditComponent.ctorParameters = () => [
    { type: _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_9__["VisboAuditService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], VisbocenterAuditComponent.prototype, "visbocenter", void 0);
VisbocenterAuditComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visbocenter-audit',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visbocenter-audit.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-audit/visbocenter-audit.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./visbocenter-audit.component.css */ "./src/app/visbocenter-audit/visbocenter-audit.component.css")).default]
    })
], VisbocenterAuditComponent);



/***/ }),

/***/ "./src/app/visbocenter-detail/visbocenter-detail.component.css":
/*!*********************************************************************!*\
  !*** ./src/app/visbocenter-detail/visbocenter-detail.component.css ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvdmlzYm9jZW50ZXItZGV0YWlsL3Zpc2JvY2VudGVyLWRldGFpbC5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/visbocenter-detail/visbocenter-detail.component.ts":
/*!********************************************************************!*\
  !*** ./src/app/visbocenter-detail/visbocenter-detail.component.ts ***!
  \********************************************************************/
/*! exports provided: VisbocenterDetailComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisbocenterDetailComponent", function() { return VisbocenterDetailComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");









let VisbocenterDetailComponent = class VisbocenterDetailComponent {
    constructor(messageService, visbocenterService, route, location, router, authenticationService, alertService) {
        this.messageService = messageService;
        this.visbocenterService = visbocenterService;
        this.route = route;
        this.location = location;
        this.router = router;
        this.authenticationService = authenticationService;
        this.alertService = alertService;
        this.newUserInvite = {};
        this.actGroup = {};
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
        this.sortUserColumn = 1;
        this.sortUserAscending = true;
        this.sortVPUserColumn = 1;
        this.sortVPUserAscending = true;
        this.sortGroupColumn = 1;
        this.sortGroupAscending = true;
    }
    ngOnInit() {
        this.getVisboCenter();
        this.getVisboCenterUsers();
    }
    getVisboCenter() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        // this.log(`VisboCenter Detail of: ${id}`);
        // this.log(`VisboCenter Detail of: ${id} permVCDef ${this.permVC["2"]} ${this.permVC.ViewAudit}`);
        this.visbocenterService.getVisboCenter(id)
            .subscribe(visbocenter => {
            this.visbocenter = visbocenter;
            this.combinedPerm = visbocenter.perm;
            this.log(`VisboCenter initialised ${this.visbocenter._id} Perm ${JSON.stringify(this.combinedPerm)} `);
        }, error => {
            this.log(`Get VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    hasVCPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vc & perm) > 0;
    }
    getVCPerm() {
        if (this.combinedPerm == undefined)
            return 0;
        return this.combinedPerm.vc;
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboCenterUsers() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboCenter UserList of: ' + id);
        this.visbocenterService.getVCUsers(id)
            .subscribe(mix => {
            this.vgUsers = mix.users;
            this.vgGroups = mix.groups;
            this.vgVPUsers = mix.vpusers;
            this.log(`fetched Users ${this.vgUsers.length}, Groups ${this.vgGroups.length} Project Users ${this.vgVPUsers.length}`);
            this.sortUserTable();
            this.sortGroupTable();
        }, error => {
            this.log(`Get VC Users failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVCAudit(visbocenter) {
        this.router.navigate(['vcAudit/'.concat(visbocenter._id)]);
    }
    goBack() {
        // this.log(`VC Details go Back ${JSON.stringify(this.location)}`)
        this.location.back();
    }
    gotoVPList(visbocenter) {
        this.router.navigate(['vp/'.concat(visbocenter._id)]);
    }
    gotoVPDetail(vpid) {
        this.router.navigate(['vpDetail/'.concat(vpid)]);
    }
    save() {
        this.visbocenterService.updateVisboCenter(this.visbocenter)
            .subscribe(vc => {
            this.alertService.success(`Visbo Center ${vc.name} updated successfully`, true);
            this.goBack();
        }, error => {
            this.log(`save VC failed: error: ${error.status} message: ${error.error.message} `);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${this.visbocenter.name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Center ${this.visbocenter.name} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    delete(visbocenter) {
        this.log(`Delete VC: ${visbocenter.name} ID: ${visbocenter._id}`);
        this.visbocenterService.deleteVisboCenter(visbocenter)
            .subscribe(vc => {
            this.alertService.success(`Visbo Center ${visbocenter.name} deleted successfully`, true);
            this.goBack();
        }, error => {
            this.log(`delete VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${visbocenter.name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    toggleUserGroup() {
        this.showProjectUsers = false;
        this.showGroups = !this.showGroups;
    }
    showProjectUser() {
        this.showProjectUsers = true;
    }
    addNewVCUser() {
        var email = this.newUserInvite.email.trim();
        var groupName = this.newUserInvite.groupName.trim();
        var inviteGroup = this.vgGroups.filter(group => group.name == groupName)[0];
        var groupId = inviteGroup._id;
        var inviteMessage = '';
        if (this.newUserInvite.inviteMessage)
            inviteMessage = this.newUserInvite.inviteMessage.trim();
        var vcid = this.visbocenter._id;
        this.log(`Add VisboCenter User: ${email} Group: ${groupName}/${groupId} VC: ${vcid}`);
        if (!email || !groupId) {
            return;
        }
        this.visbocenterService.addVCUser(email, groupId, inviteMessage, vcid)
            .subscribe(group => {
            // Add User to User & Group list
            var newUserGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGUserGroup"]();
            newUserGroup.userId = group.users.filter(user => user.email == email)[0].userId;
            newUserGroup.email = email;
            newUserGroup.groupId = group._id;
            newUserGroup.groupName = group.name;
            newUserGroup.groupType = inviteGroup.groupType;
            newUserGroup.internal = inviteGroup.internal;
            this.log(`Add VisboCenter User Push: ${JSON.stringify(newUserGroup)}`);
            this.vgUsers.push(newUserGroup);
            this.sortUserTable();
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == group._id) {
                    this.vgGroups[i] = group;
                    break;
                }
            }
            this.alertService.success(`User ${email} added successfully`);
        }, error => {
            this.log(`Add VisboCenter User error: ${JSON.stringify(error)}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Add User to Visbo Center`);
            }
            else if (error.error) {
                this.log(`Error during add VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperRemoveUser(memberIndex) {
        this.userIndex = memberIndex;
    }
    helperRemoveGroup(memberIndex) {
        this.groupIndex = memberIndex;
    }
    removeVCUser(user, vcid) {
        this.log(`Remove VisboCenter User: ${user.email}/${user.userId} Group: ${user.groupName} VC: ${vcid}`);
        this.visbocenterService.deleteVCUser(user, vcid)
            .subscribe(users => {
            // this.log(`Remove VisboCenter User result: ${JSON.stringify(result)}`);
            // this.visbocenter.users = users;
            // filter user from vgUsers
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser !== user);
            // filter user from vgGroups
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == user.groupId) {
                    for (var j = 0; j < this.vgGroups[i].users.length; j++) {
                        if (this.vgGroups[i].users[j].userId == user.userId) {
                            this.vgGroups[i].users.splice(j, 1); // remove item from array
                            break;
                        }
                    }
                    break;
                }
            }
            this.alertService.success(`User ${user.email} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove User from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperVCPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedView)
            perm += this.permVC.View;
        if (newGroup.checkedViewAudit)
            perm += this.permVC.ViewAudit;
        if (newGroup.checkedModify)
            perm += this.permVC.Modify;
        if (newGroup.checkedCreateVP)
            perm += this.permVC.CreateVP;
        if (newGroup.checkedManagePerm)
            perm += this.permVC.ManagePerm;
        return perm;
    }
    helperVPPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedVPView)
            perm += this.permVP.View;
        if (newGroup.checkedVPViewAudit)
            perm += this.permVP.ViewAudit;
        if (newGroup.checkedVPModify)
            perm += this.permVP.Modify;
        if (newGroup.checkedCreateVariant)
            perm += this.permVP.CreateVariant;
        if (newGroup.checkedVPManagePerm)
            perm += this.permVP.ManagePerm;
        if (newGroup.checkedVPDelete)
            perm += this.permVP.DeleteVP;
        return perm;
    }
    initGroup(curGroup) {
        if (curGroup) {
            this.actGroup.confirm = (curGroup.groupType == 'VC') ? 'Modify' : 'View';
            this.actGroup.gid = curGroup._id;
            this.log(`Init Group Set GroupID : ${this.actGroup.gid} ID ${curGroup._id}`);
            this.actGroup.groupName = curGroup.name;
            this.actGroup.groupType = curGroup.groupType;
            this.actGroup.internal = curGroup.internal;
            this.actGroup.checkGlobal = curGroup.global;
            this.actGroup.checkedView = (curGroup.permission.vc & this.permVC.View) > 0;
            this.actGroup.checkedViewAudit = (curGroup.permission.vc & this.permVC.ViewAudit) > 0;
            this.actGroup.checkedModify = (curGroup.permission.vc & this.permVC.Modify) > 0;
            this.actGroup.checkedCreateVP = (curGroup.permission.vc & this.permVC.CreateVP) > 0;
            this.actGroup.checkedManagePerm = (curGroup.permission.vc & this.permVC.ManagePerm) > 0;
            this.actGroup.checkedVPView = (curGroup.permission.vp & this.permVP.View) > 0;
            this.actGroup.checkedVPViewAudit = (curGroup.permission.vp & this.permVP.ViewAudit) > 0;
            this.actGroup.checkedVPModify = (curGroup.permission.vp & this.permVP.Modify) > 0;
            this.actGroup.checkedCreateVariant = (curGroup.permission.vp & this.permVP.CreateVariant) > 0;
            this.actGroup.checkedVPManagePerm = (curGroup.permission.vp & this.permVP.ManagePerm) > 0;
            this.actGroup.checkedVPDelete = (curGroup.permission.vp & this.permVP.DeleteVP) > 0;
        }
        else {
            this.actGroup.confirm = 'Add';
            this.actGroup.gid = undefined;
            this.actGroup.groupName = '';
            this.actGroup.groupType = 'VC';
            this.actGroup.internal = false;
            this.actGroup.checkGlobal = false;
            this.actGroup.checkedView = true;
        }
        this.log(`Init Group for Creation / Modification: ${this.actGroup.groupName} ID ${this.actGroup.gid} Action ${this.actGroup.confirm} `);
    }
    addModifyVCGroup() {
        var newGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGGroup"];
        newGroup.name = this.actGroup.groupName.trim();
        newGroup.global = this.actGroup.checkGlobal;
        newGroup.vcid = this.visbocenter._id;
        newGroup.permission = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPermission"];
        newGroup.permission.vc = this.helperVCPerm(this.actGroup);
        newGroup.permission.vp = this.helperVPPerm(this.actGroup);
        this.log(`Add/Modify VisboCenter Group: Group: ${newGroup.name} New/Modify ${this.actGroup.gid}`);
        if (this.actGroup.gid) {
            // modify existing Group
            this.log(`Modify VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: vc ${newGroup.permission.vc} vp ${newGroup.permission.vp}`);
            newGroup._id = this.actGroup.gid;
            this.visbocenterService.modifyVCGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Modify VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups = this.vgGroups.filter(vgGroup => vgGroup._id !== newGroup._id);
                this.vgGroups.push(group);
                // update User List to reflect new Group Name & ID
                for (var i = 0; i < this.vgUsers.length; i++) {
                    if (this.vgUsers[i].groupId == newGroup._id) {
                        this.vgUsers[i].groupName = group.name;
                    }
                }
                this.sortUserTable();
                this.sortGroupTable();
                this.alertService.success(`Group ${group.name} changed successfully`);
            }, error => {
                this.log(`Modify VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Modify Group to Visbo Center`);
                }
                else {
                    this.log(`Error during modify VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            // create new Group
            this.log(`Add VisboCenter Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: vc ${newGroup.permission.vc} vp ${newGroup.permission.vp}`);
            this.visbocenterService.addVCGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Add VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups.push(group);
                this.alertService.success(`Group ${group.name} added successfully`);
            }, error => {
                this.log(`Add VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Add Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    removeVCGroup(group) {
        this.log(`Remove VisboCenter Group: ${group.name}/${group._id} VC: ${group.vcid}`);
        this.visbocenterService.deleteVCGroup(group)
            .subscribe(response => {
            this.log(`Remove VisboCenter Group result: ${JSON.stringify(response)}`);
            // filter user from vgUsers
            this.vgGroups = this.vgGroups.filter(vgGroup => vgGroup !== group);
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser.groupId !== group._id);
            this.alertService.success(`Group ${group.name} removed successfully`);
        }, error => {
            this.log(`Remove VisboCenter Group error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove Group from Visbo Center`);
            }
            else {
                this.log(`Error during remove VC user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    sortUserTable(n = undefined) {
        if (!this.vgUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortUserColumn == undefined) {
            if (n != this.sortUserColumn) {
                this.sortUserColumn = n;
                this.sortUserAscending = undefined;
            }
            if (this.sortUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortUserColumn, this.sortUserAscending)
            }
            else
                this.sortUserAscending = !this.sortUserAscending;
        }
        // this.log(`Sort Users Column ${this.sortUserColumn}`); // log to console instead
        if (this.sortUserColumn == 1) {
            // sort user email
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                if (a.email > b.email)
                    result = 1;
                else if (a.email < b.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortUserColumn == 2) {
            // sort user group name
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.groupName.toLowerCase() > b.groupName.toLowerCase())
                    result = 1;
                else if (a.groupName.toLowerCase() < b.groupName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortUserColumn, this.sortUserAscending)
        if (!this.sortUserAscending) {
            this.vgUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortUserColumn, this.sortUserAscending)
        }
    }
    sortVPUserTable(n = undefined) {
        // this.log(`Sort VPUsers Column ${n||0}`); // log to console instead
        if (!this.vgVPUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortVPUserColumn == undefined) {
            if (n != this.sortVPUserColumn) {
                this.sortVPUserColumn = n;
                this.sortVPUserAscending = undefined;
            }
            if (this.sortVPUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortVPUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortVPUserColumn, this.sortVPUserAscending)
            }
            else
                this.sortVPUserAscending = !this.sortVPUserAscending;
        }
        this.log(`Sort VP Users Column ${this.sortVPUserColumn} Asc: ${this.sortVPUserAscending}`); // log to console instead
        if (this.sortVPUserColumn == 1) {
            // sort user email
            this.log(`Sort VP Users `); // log to console instead
            this.vgVPUsers.sort(function (a, b) {
                var result = 0;
                console.log(`Sort VP Users JSON ${JSON.stringify(a)}`); // log to console instead
                if (a.users.email > b.users.email)
                    result = 1;
                else if (a.users.email < b.users.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortVPUserColumn == 2) {
            // sort project name
            this.vgVPUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.vp.name.toLowerCase() > b.vp.name.toLowerCase())
                    result = 1;
                else if (a.vp.name.toLowerCase() < b.vp.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        this.log(`Sort VP Users Column ${this.sortVPUserColumn} Reverse: ${this.sortVPUserAscending}`); // log to console instead
        if (!this.sortVPUserAscending) {
            this.vgVPUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortVPUserColumn, this.sortVPUserAscending)
        }
    }
    sortGroupTable(n = undefined) {
        if (!this.vgGroups)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortGroupColumn == undefined) {
            if (n != this.sortGroupColumn) {
                this.sortGroupColumn = n;
                this.sortGroupAscending = undefined;
            }
            if (this.sortGroupAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortGroupAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortGroupColumn, this.sortGroupAscending)
            }
            else
                this.sortGroupAscending = !this.sortGroupAscending;
        }
        // this.log(`Sort Groups Column ${this.sortGroupColumn}`); // log to console instead
        if (this.sortGroupColumn == 1) {
            // sort user email
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortGroupColumn == 2) {
            // sort user group name
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                return b.users.length - a.users.length;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortGroupColumn, this.sortGroupAscending)
        if (!this.sortGroupAscending) {
            this.vgGroups.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortGroupColumn, this.sortGroupAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboCenter Details: ' + message);
    }
};
VisbocenterDetailComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__["AuthenticationService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], VisbocenterDetailComponent.prototype, "visbocenter", void 0);
VisbocenterDetailComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visbocenter-detail',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visbocenter-detail.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenter-detail/visbocenter-detail.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./visbocenter-detail.component.css */ "./src/app/visbocenter-detail/visbocenter-detail.component.css")).default]
    })
], VisbocenterDetailComponent);



/***/ }),

/***/ "./src/app/visbocenters/visbocenters.component.ts":
/*!********************************************************!*\
  !*** ./src/app/visbocenters/visbocenters.component.ts ***!
  \********************************************************/
/*! exports provided: VisboCentersComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboCentersComponent", function() { return VisboCentersComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");


//import { ActivatedRoute } from '@angular/router';





let VisboCentersComponent = class VisboCentersComponent {
    constructor(visbocenterService, authenticationService, messageService, alertService, route, 
    //private location: Location,
    router) {
        this.visbocenterService = visbocenterService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
    }
    ngOnInit() {
        this.getVisboCenters();
    }
    onSelect(visbocenter) {
        this.getVisboCenters();
    }
    getVisboCenters() {
        // this.log("VC getVisboCenters");
        this.visbocenterService.getVisboCenters()
            .subscribe(visbocenters => {
            this.visbocenters = visbocenters;
            this.sortVCTable(1);
            this.log('get VCs success');
        }, error => {
            this.log(`get VCs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    add(name, description) {
        name = name.trim();
        description = description.trim();
        this.log(`VC: Add VC: ${name}`);
        if (!name) {
            return;
        }
        this.visbocenterService.addVisboCenter({ name: name, description: description }).subscribe(vc => {
            this.visbocenters.push(vc);
            this.sortVCTable(undefined);
            this.alertService.success(`Visbo Center ${vc.name} created successfully`);
        }, error => {
            this.log(`add VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied for Visbo Center ${name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Center Name ${name} already exists or not allowed`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    delete(visbocenter) {
        // remove item from list
        this.messageService.add(`VC: Delete VC: ${visbocenter.name} ID: ${visbocenter._id}`);
        this.visbocenters = this.visbocenters.filter(vc => vc !== visbocenter);
        this.visbocenterService.deleteVisboCenter(visbocenter).subscribe(error => {
            // this.log(`delete VC failed: error: ${JSON.stringify(error)}`);
            this.log(`delete VC failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Center ${name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoDetail(visbocenter) {
        this.router.navigate(['vcDetail/' + visbocenter._id]);
    }
    gotoClickedRow(visbocenter) {
        // this.log(`clicked row ${visbocenter.name}`);
        this.router.navigate(['vp/' + visbocenter._id]);
    }
    sortVCTable(n) {
        if (!this.visbocenters)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortColumn == undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = n == 1 ? true : false;
                // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.visbocenters.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.visbocenters.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort VP Count
            this.visbocenters.sort(function (a, b) { return a.vpCount - b.vpCount; });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.visbocenters.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboCenter: ' + message);
    }
};
VisboCentersComponent.ctorParameters = () => [
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_6__["VisboCenterService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboCentersComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visbocenters',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visbocenters.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visbocenters/visbocenters.component.html")).default
    })
], VisboCentersComponent);



/***/ }),

/***/ "./src/app/visboportfolio-versions/visboportfolio-versions.component.ts":
/*!******************************************************************************!*\
  !*** ./src/app/visboportfolio-versions/visboportfolio-versions.component.ts ***!
  \******************************************************************************/
/*! exports provided: VisboPortfolioVersionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboPortfolioVersionsComponent", function() { return VisboPortfolioVersionsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visboprojectversion */ "./src/app/_models/visboprojectversion.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");










let VisboPortfolioVersionsComponent = class VisboPortfolioVersionsComponent {
    constructor(visboprojectversionService, visboprojectService, messageService, alertService, route, router) {
        this.visboprojectversionService = visboprojectversionService;
        this.visboprojectService = visboprojectService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.visbokeymetrics = [];
        this.dropDown = [];
        this.colorMetric = [{ name: "Critical", color: 'red' }, { name: "Warning", color: 'yellow' }, { name: "Good", color: 'green' }];
        this.typeMetricList = [
            { name: "Total Cost", metric: "Costs" },
            { name: "Change in End Date (weeks)", metric: "EndDate" },
            { name: "Achieved Deadlines", metric: "Deadlines" },
            { name: "Achieved Deliveries", metric: "Deliveries" }
        ];
        this.typeMetricX = this.typeMetricList[0].name;
        this.typeMetricY = this.typeMetricList[1].name;
        this.typeMetricChartX = this.typeMetricList[0].metric;
        this.typeMetricChartY = this.typeMetricList[1].metric;
        this.vpFilter = "";
        this.vpvRefDate = new Date();
        this.refDateInterval = "month";
        this.deleted = false;
        this.chart = true;
        this.tempList = undefined;
        this.showChart = true;
        this.graphBubbleData = [];
        this.graphBubbleOptions = undefined;
        this.sortColumn = 6;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVP"];
    }
    ngOnInit() {
        this.showChartOption(true);
        this.getVisboPortfolioVersions();
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboPortfolioVersions() {
        const id = this.route.snapshot.paramMap.get('id');
        this.parentThis = this;
        var i;
        this.vpSelected = id;
        this.log(`get VP name if ID is used ${id}`);
        if (id) {
            this.visboprojectService.getVisboProject(id)
                .subscribe(visboproject => {
                this.vpActive = visboproject;
                this.combinedPerm = visboproject.perm;
                this.log(`get VP name if ID is used ${this.vpActive.name} Perm ${JSON.stringify(this.combinedPerm)}`);
                this.visboprojectversionService.getVisboPortfolioVersions(id, this.deleted)
                    .subscribe(visboportfolioversions => {
                    this.visboportfolioversions = visboportfolioversions;
                    this.log(`get VPF ${this.vpActive.name} Length ${visboportfolioversions.length} Perm ${JSON.stringify(this.combinedPerm)}`);
                    this.vpfActive = visboportfolioversions[0];
                    this.vpfActiveIndex = visboportfolioversions.length;
                    if (visboportfolioversions.length > 0) {
                        // this.combinedPerm = visboportfolioversions[0].perm;
                        this.dropDownInit();
                        this.getVisboPortfolioKeyMetrics();
                        this.log(`get VPF Index ${this.vpfActiveIndex}`);
                        this.log(`get VPF ${this.vpActive.name} Length ${visboportfolioversions.length} First ${visboportfolioversions[0].timestamp} Last ${visboportfolioversions[visboportfolioversions.length - 1].timestamp} Perm ${JSON.stringify(this.combinedPerm)}`);
                    }
                }, error => {
                    this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                    if (error.status == 403) {
                        this.alertService.error(`Permission Denied for Visbo Project Versions`);
                    }
                    else {
                        this.alertService.error(error.error.message);
                    }
                });
            }, error => {
                this.log(`get VPV VP failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            this.vpSelected = null;
            this.vpActive = null;
            this.visboprojectversionService.getVisboPortfolioVersions(null)
                .subscribe(visboportfolioversions => this.visboportfolioversions = visboportfolioversions, error => {
                this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project Versions`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    getVisboPortfolioKeyMetrics() {
        var showChart = this.showChart;
        this.log(`get VPF keyMetrics ${this.vpfActive.name} ${this.vpfActive._id}`);
        this.showChart = false;
        this.visboprojectversionService.getVisboPortfolioKeyMetrics(this.vpfActive._id, this.vpvRefDate)
            .subscribe(visboprojectversions => {
            this.visboprojectversions = visboprojectversions;
            this.log(`get VPF Key metrics: Get ${visboprojectversions.length} Project Versions`);
            this.visboKeyMetricsCalc();
            if (this.hasVPPerm(this.permVP.ViewAudit)) {
                this.showChartOption(showChart);
            }
            else {
                this.showChartOption(false);
            }
            this.showChart = true;
        }, error => {
            this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied for Visbo Portfolio KeyMetrics`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    getRefDateVersions(increment) {
        this.log(`get getRefDateVersions ${this.vpvRefDate} ${increment}`);
        var newRefDate = new Date(this.vpvRefDate.getTime());
        switch (this.refDateInterval) {
            case 'day':
                newRefDate.setDate(newRefDate.getDate() + increment);
                break;
            case 'week':
                newRefDate.setDate(newRefDate.getDate() + increment * 7);
                break;
            case 'month':
                newRefDate.setMonth(newRefDate.getMonth() + increment);
                break;
            case 'quarter':
                // newRefDate.setMinutes(newRefDate.getMinutes() + increment) // to force quarter skip
                var quarter = Math.trunc((newRefDate.getMonth() + 1) / 3);
                if (increment > 0)
                    quarter += increment;
                newRefDate.setMonth(quarter * 3);
                newRefDate.setDate(1);
                newRefDate.setHours(0, 0, 0, 0);
                var diff = newRefDate.getTime() - this.vpvRefDate.getTime();
                if (diff == 0) {
                    newRefDate.setMonth(newRefDate.getMonth() + increment * 3);
                }
                break;
        }
        this.log(`get getRefDateVersions Quarter ${newRefDate} ${increment}`);
        var today = new Date();
        if (newRefDate > today) {
            newRefDate = today;
        }
        this.log(`get getRefDateVersions Quarter ${newRefDate} ${increment}`);
        this.vpvRefDate = new Date(newRefDate.toISOString()); // to guarantee that the item is refreshed in UI
        this.getVisboPortfolioKeyMetrics();
    }
    visboKeyMetricsCalc() {
        // Calculate the keyMetrics Values to show in Chart and List
        this.visbokeymetrics = [];
        if (!this.visboprojectversions)
            return;
        // this.log(`calc keyMetrics LEN ${this.visboprojectversions.length}`);
        var vpFilter = (this.vpFilter || '').toLowerCase();
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            if (!vpFilter
                || this.visboprojectversions[i].name.toLowerCase().indexOf(vpFilter) >= 0
                || (this.visboprojectversions[i].VorlagenName || '').toLowerCase().indexOf(vpFilter) >= 0
                || (this.visboprojectversions[i].businessUnit || '').toLowerCase().indexOf(vpFilter) >= 0
                || (this.visboprojectversions[i].leadPerson || '').toLowerCase().indexOf(vpFilter) >= 0
                || (this.visboprojectversions[i].description || '').toLowerCase().indexOf(vpFilter) >= 0) {
                if (this.visboprojectversions[i].keyMetrics) {
                    var elementKeyMetric = new _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_7__["VPVKeyMetricsCalc"]();
                    elementKeyMetric.name = this.visboprojectversions[i].name;
                    elementKeyMetric._id = this.visboprojectversions[i]._id;
                    elementKeyMetric.vpid = this.visboprojectversions[i].vpid;
                    elementKeyMetric.timestamp = this.visboprojectversions[i].timestamp;
                    elementKeyMetric.keyMetrics = this.visboprojectversions[i].keyMetrics;
                    // Calculate Saving Cost in % of Total, limit the results to be between -100 and 100
                    elementKeyMetric.savingCostTotal = (elementKeyMetric.keyMetrics.costCurrentTotal || 0) / (elementKeyMetric.keyMetrics.costBaseLastTotal || 1) || 0;
                    // if (elementKeyMetric.savingCostTotal > 2) elementKeyMetric.savingCostTotal = 2;
                    elementKeyMetric.savingCostActual = (elementKeyMetric.keyMetrics.costCurrentActual || 0) / (elementKeyMetric.keyMetrics.costBaseLastActual || 1) || 0;
                    // if (elementKeyMetric.savingCostActual > 2) elementKeyMetric.savingCostActual = 2;
                    // Calculate Saving EndDate in number of weeks related to BaseLine, limit the results to be between -20 and 20
                    elementKeyMetric.savingEndDate = this.helperDateDiff((new Date(elementKeyMetric.keyMetrics.endDateCurrent).toISOString()), (new Date(elementKeyMetric.keyMetrics.endDateBaseLast).toISOString()), 'w') || 0;
                    elementKeyMetric.savingEndDate = Math.round(elementKeyMetric.savingEndDate);
                    // Calculate the Deadlines Completion
                    elementKeyMetric.timeCompletionTotal = (elementKeyMetric.keyMetrics.timeCompletionCurrentTotal || 0) / (elementKeyMetric.keyMetrics.timeCompletionBaseLastTotal || 1) || 0;
                    elementKeyMetric.timeCompletionActual = (elementKeyMetric.keyMetrics.timeCompletionCurrentActual || 0) / (elementKeyMetric.keyMetrics.timeCompletionBaseLastActual || 1) || 0;
                    // Calculate the Delivery Completion
                    elementKeyMetric.deliveryCompletionTotal = (elementKeyMetric.keyMetrics.deliverableCompletionCurrentTotal || 0) / (elementKeyMetric.keyMetrics.deliverableCompletionBaseLastTotal || 1) || 0;
                    elementKeyMetric.deliveryCompletionActual = (elementKeyMetric.keyMetrics.deliverableCompletionCurrentActual || 0) / (elementKeyMetric.keyMetrics.deliverableCompletionBaseLastActual || 1) || 0;
                    this.visbokeymetrics.push(elementKeyMetric);
                }
            }
            else {
                // this.log(`Remove ${this.visboprojectversions[i].name} Vorlage ${this.visboprojectversions[i].VorlagenName} BU ${this.visboprojectversions[i].businessUnit} Lead ${this.visboprojectversions[i].leadPerson} Desc ${this.visboprojectversions[i].description} vs  by Filter  ${this.vpFilter}`);
            }
        }
        this.sortKeyMetricsTable(undefined);
        this.visboKeyMetricsCalcBubble();
    }
    changeChart() {
        this.log(`Switch Chart from ${this.typeMetricChartX} vs  ${this.typeMetricChartY} to ${this.typeMetricX} vs  ${this.typeMetricY}`);
        this.typeMetricChartX = this.typeMetricList.find(x => x.name == this.typeMetricX).metric;
        this.typeMetricChartY = this.typeMetricList.find(x => x.name == this.typeMetricY).metric;
        this.visboKeyMetricsCalc();
        this.showChart = true;
    }
    drawChart(visible) {
        this.showChart = visible;
    }
    visboKeyMetricsCalcBubble() {
        this.graphBubbleOptions = {
            // 'chartArea':{'left':20,'top':0,'width':'100%','height':'100%'},
            'width': '100%',
            // 'title':'Key Metrics: Total Cost vs. End Date Plan vs. Base Line',
            // 'colorAxis': {'colors': ['red', 'yellow', 'green'], 'minValue': 0, 'maxValue': 2, 'legend': {'position': 'none'}},
            // 'vAxis': {'title': 'Delayed \u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 End date (weeks) \u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 Ahead', 'baselineColor': 'blue'},
            'vAxis': { 'direction': -1, 'title': 'Change in End Date (weeks)', 'baselineColor': 'blue' },
            'hAxis': { 'baseline': 1, 'direction': -1, 'format': 'percent', 'title': 'Total Cost', 'baselineColor': 'blue' },
            // 'sizeAxis': {'minValue': 20, 'maxValue': 200},
            // 'chartArea':{'left':20,'top':30,'width':'100%','height':'90%'},
            'explorer': { 'actions': ['dragToZoom', 'rightClickToReset'], 'maxZoomIn': .01 },
            'bubble': { 'textStyle': { 'auraColor': 'none', 'fontSize': 13 } },
            'tooltip': { 'showColorCode': false }
        };
        this.graphBubbleAxis(); // set the Axis Description and properties
        var keyMetrics = [];
        if (!this.visbokeymetrics)
            return;
        if (this.visbokeymetrics.length > 20)
            this.graphBubbleOptions.bubble.textStyle.fontSize = 1;
        keyMetrics.push(['ID', this.graphBubbleLabelX, this.graphBubbleLabelY, 'Key Metrics Status', 'Total Cost (Base Line) in k\u20AC']);
        for (var i = 0; i < this.visbokeymetrics.length; i++) {
            // var colorValue = (this.visbokeymetrics[i].savingCostTotal <= 1 ? 1 : 0) +
            //                   (this.visbokeymetrics[i].savingEndDate <= 0 ? 1 : 0);
            var colorValue = 0;
            var valueX;
            var valueY;
            switch (this.typeMetricChartX) {
                case 'Costs':
                    valueX = this.visbokeymetrics[i].savingCostTotal;
                    colorValue += valueX <= 1 ? 1 : 0;
                    break;
                case 'EndDate':
                    valueX = this.visbokeymetrics[i].savingEndDate;
                    colorValue += valueX <= 0 ? 1 : 0;
                    break;
                case 'Deadlines':
                    valueX = this.visbokeymetrics[i].timeCompletionActual;
                    colorValue += valueX >= 1 ? 1 : 0;
                    break;
                case 'Deliveries':
                    valueX = this.visbokeymetrics[i].deliveryCompletionActual;
                    colorValue += valueX >= 1 ? 1 : 0;
                    break;
            }
            switch (this.typeMetricChartY) {
                case 'Costs':
                    valueY = this.visbokeymetrics[i].savingCostTotal;
                    colorValue += valueY <= 1 ? 1 : 0;
                    break;
                case 'EndDate':
                    valueY = this.visbokeymetrics[i].savingEndDate;
                    colorValue += valueY <= 0 ? 1 : 0;
                    break;
                case 'Deadlines':
                    valueY = this.visbokeymetrics[i].timeCompletionActual;
                    colorValue += valueY >= 1 ? 1 : 0;
                    break;
                case 'Deliveries':
                    valueY = this.visbokeymetrics[i].deliveryCompletionActual;
                    colorValue += valueY >= 1 ? 1 : 0;
                    break;
            }
            keyMetrics.push([
                this.visbokeymetrics[i].name,
                valueX,
                valueY,
                this.colorMetric[colorValue].name,
                Math.trunc(this.visbokeymetrics[i].keyMetrics.costBaseLastTotal)
            ]);
        }
        this.calcRangeAxis();
        this.graphBubbleData = keyMetrics;
    }
    calcRangeAxis() {
        var rangeAxis = 0;
        var minSize = Infinity, maxSize = 0;
        for (var i = 0; i < this.visbokeymetrics.length; i++) {
            minSize = Math.min(minSize, this.visbokeymetrics[i].keyMetrics.costBaseLastTotal);
            maxSize = Math.max(maxSize, this.visbokeymetrics[i].keyMetrics.costBaseLastTotal);
            switch (this.typeMetricChartX) {
                case 'Costs':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].savingCostTotal - 1));
                    break;
                case 'EndDate':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].savingEndDate));
                    break;
                case 'Deadlines':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].timeCompletionActual - 1));
                    break;
                case 'Deliveries':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].deliveryCompletionActual - 1));
                    break;
            }
        }
        // Set the Min/Max Values for the Size of the bubbles decreased/increased by 20%
        // minSize = Math.max(minSize - 100, 0)
        // maxSize += 100;
        minSize *= 0.8;
        maxSize *= 1.2;
        if (!this.graphBubbleOptions.sizeAxis)
            this.graphBubbleOptions.sizeAxis = {};
        this.graphBubbleOptions.sizeAxis.minValue = minSize;
        this.graphBubbleOptions.sizeAxis.maxValue = maxSize;
        if (this.typeMetricChartX == 'EndDate') {
            rangeAxis *= 1.1;
            this.graphBubbleOptions.hAxis.minValue = -rangeAxis;
            this.graphBubbleOptions.hAxis.maxValue = rangeAxis;
        }
        else {
            rangeAxis *= 1.1;
            this.graphBubbleOptions.hAxis.minValue = 1 - rangeAxis;
            this.graphBubbleOptions.hAxis.maxValue = 1 + rangeAxis;
        }
        rangeAxis = 0;
        for (var i = 0; i < this.visbokeymetrics.length; i++) {
            switch (this.typeMetricChartY) {
                case 'Costs':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].savingCostTotal - 1));
                    break;
                case 'EndDate':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].savingEndDate));
                    break;
                case 'Deadlines':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].timeCompletionActual - 1));
                    break;
                case 'Deliveries':
                    rangeAxis = Math.max(rangeAxis, Math.abs(this.visbokeymetrics[i].deliveryCompletionActual - 1));
                    break;
            }
        }
        if (this.typeMetricChartY == 'EndDate') {
            rangeAxis *= 1.1;
            this.graphBubbleOptions.vAxis.minValue = -rangeAxis;
            this.graphBubbleOptions.vAxis.maxValue = rangeAxis;
        }
        else {
            rangeAxis *= 1.1;
            this.graphBubbleOptions.vAxis.minValue = 1 - rangeAxis;
            this.graphBubbleOptions.vAxis.maxValue = 1 + rangeAxis;
        }
    }
    graphBubbleAxis() {
        switch (this.typeMetricChartX) {
            case 'Costs':
                this.graphBubbleOptions.hAxis = { 'baseline': 1, 'direction': -1, 'format': 'percent', 'title': 'Total Cost', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelX = 'Planned Total Cost in %';
                break;
            case 'EndDate':
                this.graphBubbleOptions.hAxis = { 'baseline': 0, 'direction': -1, 'title': 'Change in End Date (weeks)', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelX = 'Change in End Date (Weeks)';
                break;
            case 'Deadlines':
                this.graphBubbleOptions.hAxis = { 'baseline': 1, 'direction': 1, 'format': 'percent', 'title': 'Achieved Deadlines', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelX = 'Achieved Deadlines in %';
                break;
            case 'Deliveries':
                this.graphBubbleOptions.hAxis = { 'baseline': 1, 'direction': 1, 'format': 'percent', 'title': 'Achieved Deliveries', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelX = 'Achieved Deliveries in %';
                break;
        }
        switch (this.typeMetricChartY) {
            case 'Costs':
                this.graphBubbleOptions.vAxis = { 'baseline': 1, 'direction': -1, 'format': 'percent', 'title': 'Total Cost', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelY = 'Planned Total Cost in %';
                break;
            case 'EndDate':
                this.graphBubbleOptions.vAxis = { 'baseline': 0, 'direction': -1, 'title': 'Change in End Date (weeks)', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelY = 'Change in End Date (Weeks)';
                break;
            case 'Deadlines':
                this.graphBubbleOptions.vAxis = { 'baseline': 1, 'direction': 1, 'format': 'percent', 'title': 'Achieved Deadlines', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelY = 'Achieved Deadlines in %';
                break;
            case 'Deliveries':
                this.graphBubbleOptions.vAxis = { 'baseline': 1, 'direction': 1, 'format': 'percent', 'title': 'Achieved Deliveries', 'minValue': -110, 'maxValue': 110, 'baselineColor': 'blue' };
                this.graphBubbleLabelY = 'Achieved Deliveries in %';
                break;
        }
        this.graphBubbleOptions.series = {};
        this.graphBubbleOptions.series.Critical = { color: this.colorMetric[0].color };
        this.graphBubbleOptions.series.Warning = { color: this.colorMetric[1].color };
        this.graphBubbleOptions.series.Good = { color: this.colorMetric[2].color };
        // this.log(`Series: ${JSON.stringify(this.graphBubbleOptions.series)}`)
    }
    // get the details of the project
    gotoVPDetail(visboproject) {
        var deleted = visboproject.deletedAt ? true : false;
        this.log(`goto Detail for VP ${visboproject._id}`);
        this.router.navigate(['vpDetail/'.concat(visboproject._id)], deleted ? { queryParams: { deleted: deleted } } : {});
    }
    gotoClickedRow(vpv) {
        this.log(`goto VP ${vpv.name} (${vpv.vpid}) Deleted? ${this.deleted}`);
        this.router.navigate(['vpKeyMetrics/'.concat(vpv.vpid)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    gotoVC(visboproject) {
        this.router.navigate(['vp/'.concat(visboproject.vcid)]);
    }
    chartSelectRow(row, label) {
        // this.log(`Bubble Chart: ${row} ${label}`);
        var vpv = this.visbokeymetrics.find(x => x.name == label);
        this.log(`Navigate to: ${vpv.vpid} ${vpv.name}`);
        this.router.navigate(['vpKeyMetrics/'.concat(vpv.vpid)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    dropDownInit() {
        this.log(`Init Drop Down List ${this.visboportfolioversions.length}`);
        this.dropDown = [];
        var len = this.visboportfolioversions.length;
        for (var i = 0; i < len; i++) {
            var timestamp = new Date(this.visboportfolioversions[i].timestamp);
            var text = 'Version '.concat((len - i).toString(), ' from ', moment__WEBPACK_IMPORTED_MODULE_3__(timestamp).format('DD.MM.YYYY HH:mm'));
            this.dropDown.push({ name: text, version: i });
        }
        if (len > 0)
            this.dropDownSelected = this.dropDown[0].name;
        // this.log(`Init Drop Down List Finished ${this.dropDown.length} Selected ${this.dropDownSelected}`);
    }
    changePFVersion() {
        this.dropDownValue = this.dropDown.find(x => x.name == this.dropDownSelected).version;
        this.log(`Change Drop Down ${this.dropDownSelected} ${this.dropDownValue}`);
        this.vpfActive = this.visboportfolioversions[this.dropDownValue];
        this.getVisboPortfolioKeyMetrics();
    }
    selectedMetric(metric) {
        if (this.typeMetricChartX == metric || this.typeMetricChartY == metric) {
            return true;
        }
        else {
            return false;
        }
    }
    showChartOption(newStatus = undefined) {
        if (newStatus == undefined)
            this.chart = !this.chart;
        else
            this.chart = newStatus;
        this.chartButton = this.chart ? "Show List" : "Show Chart";
        this.log(`Switch Chart to ${this.chart}`);
    }
    showTempList(newStatus) {
        if (newStatus == undefined)
            return;
        this.log(`Switch temp List from ${this.tempList} to ${newStatus} Date ${this.tempDate}`);
        if (this.tempList == undefined && newStatus == true) {
            if (this.tempDate)
                this.log(`Compare ${(new Date).getTime() - this.tempDate.getTime()} ${(new Date).toISOString()} ${this.tempDate.toISOString()}`);
            if (this.tempDate == undefined || (new Date).getTime() - this.tempDate.getTime() > 300) {
                this.tempChart = this.chart;
                this.chart = false;
                this.tempList = true;
            }
        }
        if (newStatus == false) {
            this.chart = this.tempChart;
            this.tempList = undefined;
            this.tempDate = new Date();
        }
    }
    helperVpIndex(vpIndex) {
        this.log(`VP Helper: ${vpIndex}`);
        // this.auditIndex = auditIndex
    }
    helperDateDiff(from, to, unit) {
        var fromDate = new Date(from);
        var toDate = new Date(to);
        var dateDiff = fromDate.getTime() - toDate.getTime();
        if (unit == 'w') {
            dateDiff = dateDiff / 1000 / 60 / 60 / 24 / 7;
        }
        else if (unit == 'd') {
            dateDiff = dateDiff / 1000 / 60 / 60 / 24;
        }
        else {
            dateDiff = dateDiff / 1000;
        }
        return dateDiff;
    }
    sortKeyMetricsTable(n) {
        if (!this.visbokeymetrics)
            return;
        if (n != undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 1) ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // this.log(`Sort Key Metrics: Col ${n} Asc ${this.sortAscending}`);
        if (this.sortColumn == 1) {
            // sort by VPV name
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.name > b.name)
                    result = 1;
                else if (a.name < b.name)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by keyMetrics Diff Cost
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.savingCostTotal > b.savingCostTotal)
                    result = 1;
                else if (a.savingCostTotal < b.savingCostTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by keyMetrics TotalCost
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.costBaseLastTotal > b.keyMetrics.costBaseLastTotal)
                    result = 1;
                else if (a.keyMetrics.costBaseLastTotal < b.keyMetrics.costBaseLastTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by keyMetrics saving EndDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.savingEndDate > b.savingEndDate)
                    result = 1;
                else if (a.savingEndDate < b.savingEndDate)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.endDateBaseLast > b.keyMetrics.endDateBaseLast)
                    result = 1;
                else if (a.keyMetrics.endDateBaseLast < b.keyMetrics.endDateBaseLast)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 6) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                return a.timeCompletionActual - b.timeCompletionActual;
            });
        }
        else if (this.sortColumn == 7) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                return a.keyMetrics.timeCompletionBaseLastActual - b.keyMetrics.timeCompletionBaseLastActual;
            });
        }
        else if (this.sortColumn == 8) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                return a.deliveryCompletionActual - b.deliveryCompletionActual;
            });
        }
        else if (this.sortColumn == 9) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                return a.keyMetrics.deliverableCompletionBaseLastActual - b.keyMetrics.deliverableCompletionBaseLastActual;
            });
        }
        if (!this.sortAscending) {
            this.visbokeymetrics.reverse();
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboPortfolioVersion: ' + message);
    }
};
VisboPortfolioVersionsComponent.ctorParameters = () => [
    { type: _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_8__["VisboProjectVersionService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_6__["VisboProjectService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboPortfolioVersionsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboportfolio-versions',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboportfolio-versions.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboportfolio-versions/visboportfolio-versions.component.html")).default
    })
], VisboPortfolioVersionsComponent);



/***/ }),

/***/ "./src/app/visboproject-audit/visboproject-audit.component.css":
/*!*********************************************************************!*\
  !*** ./src/app/visboproject-audit/visboproject-audit.component.css ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvdmlzYm9wcm9qZWN0LWF1ZGl0L3Zpc2JvcHJvamVjdC1hdWRpdC5jb21wb25lbnQuY3NzIn0= */");

/***/ }),

/***/ "./src/app/visboproject-audit/visboproject-audit.component.ts":
/*!********************************************************************!*\
  !*** ./src/app/visboproject-audit/visboproject-audit.component.ts ***!
  \********************************************************************/
/*! exports provided: VisboprojectAuditComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboprojectAuditComponent", function() { return VisboprojectAuditComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _models_visboaudit__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visboaudit */ "./src/app/_models/visboaudit.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_services/visboaudit.service */ "./src/app/_services/visboaudit.service.ts");










var encodeCSV = function (source) {
    var result;
    if (!source)
        return source;
    result = source.replace(/\t/g, " ");
    if (result[0] == '=' || result[0] == '+' || result[0] == '-') {
        result = "'".concat(result);
    }
    return result;
};
let VisboprojectAuditComponent = class VisboprojectAuditComponent {
    constructor(visboauditService, visboprojectService, authenticationService, messageService, alertService, location, route, router) {
        this.visboauditService = visboauditService;
        this.visboprojectService = visboprojectService;
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.location = location;
        this.route = route;
        this.router = router;
        this.auditTypeList = [
            { name: "All", action: "" },
            { name: "Read", action: "GET" },
            { name: "Create", action: "POST" },
            { name: "Update", action: "PUT" },
            { name: "Delete", action: "DELETE" }
        ];
        this.deleted = false;
    }
    ngOnInit() {
        this.sysadmin = this.route.snapshot.queryParams['sysadmin'];
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.getVisboProject();
        this.auditCount = 50;
        this.auditType = this.auditTypeList[0].name;
        this.today = new Date();
        this.today.setHours(0, 0, 0, 0);
        this.getVisboProjectAudits();
        this.sortTable(undefined);
    }
    getVisboProject() {
        const id = this.route.snapshot.paramMap.get('id');
        this.log('VisboProject Detail of: ' + id);
        this.visboprojectService.getVisboProject(id, this.sysadmin, this.deleted)
            .subscribe(visboproject => {
            this.visboproject = visboproject;
            this.combinedPerm = visboproject.perm;
            this.log(`Get VisboProject ${id} ${this.visboproject.name} Perm ${JSON.stringify(this.combinedPerm)}`);
        }, error => {
            this.log(`get VPs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    getVisboProjectAudits() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        var queryAudit = new _models_visboaudit__WEBPACK_IMPORTED_MODULE_7__["QueryAuditType"];
        this.log(`Audit getVisboProjectAudits from ${this.auditFrom} to ${this.auditTo} Text ${this.auditText} AuditType ${this.auditType}`);
        // set date values if not set or adopt to end of day in case of to date
        if (this.auditTo) {
            queryAudit.to = new Date(this.auditTo);
        }
        else {
            queryAudit.to = new Date();
        }
        if (this.auditFrom) {
            queryAudit.from = new Date(this.auditFrom);
        }
        else {
            // queryAudit.from = new Date(queryAudit.to);
            // queryAudit.from.setDate(queryAudit.from.getDate()-7);
            // queryAudit.from.setHours(0, 0, 0, 0);
        }
        if (this.auditText)
            queryAudit.text = this.auditText.trim();
        for (var i = 0; i < this.auditTypeList.length; i++) {
            if (this.auditType == this.auditTypeList[i].name) {
                queryAudit.actionType = this.auditTypeList[i].action;
                break;
            }
        }
        queryAudit.maxcount = this.auditCount;
        this.log(`Audit getVisboProjectAudits VP ${id} recalc Query ${JSON.stringify(queryAudit)}`);
        this.visboauditService.getVisboProjectAudits(id, this.sysadmin, this.deleted, queryAudit)
            .subscribe(audit => {
            this.audit = audit;
            this.sortTable(undefined);
            this.log(`get Audit success ${this.audit.length} for ${this.visboproject.name}`);
        }, error => {
            this.log(`get Audit failed: error: ${error.status} message: ${JSON.stringify(error)}`);
            this.alertService.error(error.error.message);
        });
    }
    downloadVisboAudit() {
        this.log(`sysAudit Download ${this.audit.length} Items`);
        var data;
        var separator = "\t";
        var lineItem;
        var userAgent;
        data = 'sep=' + separator + '\n'; // to force excel to use the separator
        data = data + 'date' + separator
            + 'time UTC' + separator
            + 'email' + separator
            + 'actiondDescription' + separator
            + 'action' + separator
            + 'url' + separator
            + 'actionInfo' + separator
            + 'responseTime' + separator
            + 'responseStatus' + separator
            + 'vcid' + separator
            + 'vcname' + separator
            + 'vpid' + separator
            + 'vpname' + separator
            + 'vpvid' + separator
            + 'size' + separator
            + 'ip' + separator
            + 'userId' + separator
            + 'userAgent' + separator
            + 'ttl' + separator
            + 'VC Details' + separator
            + 'VP Details' + '\n';
        var createdAt;
        for (var i = 0; i < this.audit.length; i++) {
            createdAt = new Date(this.audit[i].createdAt).toISOString();
            userAgent = (this.audit[i].userAgent || '').replace(/,/g, ";");
            lineItem = createdAt.substr(0, 10) + separator
                + createdAt.substr(11, 8) + separator
                + encodeCSV(this.audit[i].user.email) + separator
                + encodeCSV(this.audit[i].actionDescription) + separator
                + this.audit[i].action + separator
                + this.audit[i].url + separator
                + this.audit[i].actionInfo + separator
                + (this.audit[i].result ? this.audit[i].result.time : '') + separator
                + (this.audit[i].result ? this.audit[i].result.status : '') + separator
                + (this.audit[i].vc ? this.audit[i].vc.vcid : '') + separator
                + (this.audit[i].vc ? encodeCSV(this.audit[i].vc.name) : '') + separator
                + (this.audit[i].vp ? this.audit[i].vp.vpid : '') + separator
                + (this.audit[i].vp ? encodeCSV(this.audit[i].vp.name) : '') + separator
                + (this.audit[i].vpv ? this.audit[i].vpv.vpvid : '') + separator
                + (this.audit[i].result ? this.audit[i].result.size : '0') + separator
                + this.audit[i].ip + separator
                + this.audit[i].user.userId + separator
                + encodeCSV(userAgent) + separator
                + (this.audit[i].ttl || '') + separator
                + (this.audit[i].vc ? (encodeCSV(this.audit[i].vc.vcjson) || '') : '') + separator
                + (this.audit[i].vp ? (encodeCSV(this.audit[i].vp.vpjson) || '') : '') + '\n';
            data = data.concat(lineItem);
        }
        this.log(`sysAudit CSV Len ${data.length} `);
        var blob = new Blob([data], { type: 'text/plain' });
        var url = window.URL.createObjectURL(blob);
        this.log(`Open URL ${url}`);
        var fileName = `auditlog-VP.csv`;
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.href = url;
        a.download = fileName;
        this.log(`Open URL ${url} doc ${JSON.stringify(a)}`);
        a.click();
        window.URL.revokeObjectURL(url);
    }
    goBack() {
        this.location.back();
    }
    helperAuditIndex(auditIndex) {
        // this.log(`Remove User Helper: ${userIndex}`);
        this.auditIndex = auditIndex;
    }
    helperFormatBytes(a, b = 2) {
        if (0 == a)
            return "0 B";
        var c = 1024, d = b || 2;
        var e = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"];
        var f = Math.floor(Math.log(a) / Math.log(c));
        return parseFloat((a / Math.pow(c, f)).toFixed(d)) + " " + e[f];
    }
    pageAuditIndex(increment) {
        var newAuditIndex;
        newAuditIndex = this.auditIndex + increment;
        if (newAuditIndex < 0)
            newAuditIndex = 0;
        if (newAuditIndex >= this.audit.length)
            newAuditIndex = this.audit.length - 1;
        this.auditIndex = newAuditIndex;
    }
    helperResponseText(visboaudit) {
        if (visboaudit.result.statusText)
            return visboaudit.result.statusText;
        var status = visboaudit.result.status;
        if (status == "200")
            return "Success";
        if (status == "304")
            return "Success";
        if (status == "400")
            return "Bad Request";
        if (status == "401")
            return "Not Authenticated";
        if (status == "403")
            return "Permission Denied";
        if (status == "404")
            return "URL not found";
        if (status == "409")
            return "Conflict";
        if (status == "423")
            return "Locked";
        if (status == "500")
            return "Server Error";
        return status.toString();
    }
    helperShortenText(text, len) {
        if (!text || !len || len < 5 || text.length <= len)
            return (text);
        return text.substring(0, 20).concat('...', text.substring(text.length - 7, text.length));
    }
    toggleDetail() {
        this.log(`Toggle ShowMore`);
        this.showMore = !this.showMore;
    }
    isToday(checkDate) {
        // this.log(`Check Date ${checkDate} ${this.today.toISOString()}`);
        return new Date(checkDate) > this.today;
    }
    sortTable(n) {
        if (!this.audit)
            return;
        this.log(`Sort Table Column ${n}`);
        // change sort order otherwise sort same column same direction
        if (n != undefined) {
            // sort a different column
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            else if (this.sortAscending != undefined)
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = undefined;
        }
        if (this.sortAscending == undefined) {
            // sort name column ascending, number values desc first
            this.sortAscending = (n == 2 || n == 3 || n == 4) ? true : false;
            // console.log("Sort VC Column undefined", this.sortColumn, this.sortAscending)
        }
        // console.log("Sort VC Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            this.audit.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.createdAt > b.createdAt)
                    result = 1;
                else if (a.createdAt < b.createdAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.user.email.toLowerCase() > b.user.email.toLowerCase())
                    result = 1;
                else if (a.user.email.toLowerCase() < b.user.email.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.action > b.action)
                    result = 1;
                else if (a.action < b.action)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.url > b.url)
                    result = 1;
                else if (a.url < b.url)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort Result
            // this.audit.sort(function(a, b) { return a.result.status.toValue() - b.result.status.toValue() })
            this.audit.sort(function (a, b) {
                var result = 0;
                if (a.result.status > b.result.status)
                    result = 1;
                else if (a.result.status < b.result.status)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 6) {
            this.audit.sort(function (a, b) {
                return a.result.time - b.result.time;
            });
        }
        else if (this.sortColumn == 7) {
            this.audit.sort(function (a, b) {
                return (a.result.size || 0) - (b.result.size || 0);
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.audit.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('Audit: ' + message);
    }
};
VisboprojectAuditComponent.ctorParameters = () => [
    { type: _services_visboaudit_service__WEBPACK_IMPORTED_MODULE_9__["VisboAuditService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_8__["VisboProjectService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboprojectAuditComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboproject-audit',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboproject-audit.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-audit/visboproject-audit.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./visboproject-audit.component.css */ "./src/app/visboproject-audit/visboproject-audit.component.css")).default]
    })
], VisboprojectAuditComponent);



/***/ }),

/***/ "./src/app/visboproject-detail/visboproject-detail.component.css":
/*!***********************************************************************!*\
  !*** ./src/app/visboproject-detail/visboproject-detail.component.css ***!
  \***********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = ("\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAvdmlzYm9wcm9qZWN0LWRldGFpbC92aXNib3Byb2plY3QtZGV0YWlsLmNvbXBvbmVudC5jc3MifQ== */");

/***/ }),

/***/ "./src/app/visboproject-detail/visboproject-detail.component.ts":
/*!**********************************************************************!*\
  !*** ./src/app/visboproject-detail/visboproject-detail.component.ts ***!
  \**********************************************************************/
/*! exports provided: VisboprojectDetailComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboprojectDetailComponent", function() { return VisboprojectDetailComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _models_visboproject__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_models/visboproject */ "./src/app/_models/visboproject.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");










let VisboprojectDetailComponent = class VisboprojectDetailComponent {
    constructor(messageService, authenticationService, route, visboprojectService, location, alertService, router) {
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.route = route;
        this.visboprojectService = visboprojectService;
        this.location = location;
        this.alertService = alertService;
        this.router = router;
        this.newUserInvite = {};
        this.actGroup = {};
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVP"];
        this.deleted = false;
        this.sortUserColumn = 1;
        this.sortUserAscending = true;
        this.sortGroupColumn = 1;
        this.sortGroupAscending = true;
    }
    ngOnInit() {
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.getVisboProject();
        this.getVisboProjectUsers();
    }
    getVisboProject() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboProject Detail of: ' + id);
        this.visboprojectService.getVisboProject(id, false, this.deleted)
            .subscribe(visboproject => {
            this.visboproject = visboproject;
            this.combinedPerm = visboproject.perm;
            this.log(`Get VisboProject for VP ${id} Perm ${JSON.stringify(this.combinedPerm)} `);
        }, error => {
            this.log(`get VPs failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVPPerm() {
        if (this.combinedPerm == undefined)
            return 0;
        return this.combinedPerm.vp;
    }
    getVPType(vpType) {
        return _models_visboproject__WEBPACK_IMPORTED_MODULE_8__["VPTYPE"][vpType];
    }
    toggleUserGroup() {
        this.showGroups = !this.showGroups;
    }
    getVisboProjectUsers() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log(`VisboProject UserList of: ${id} Deleted ${this.deleted}`);
        this.visboprojectService.getVPUsers(id, false, this.deleted)
            .subscribe(mix => {
            this.vgUsers = mix.users;
            this.vgGroups = mix.groups;
            this.vgGroupsInvite = this.vgGroups.filter(vgGroup => vgGroup.groupType == 'VP');
            this.log(`fetched Users ${this.vgUsers.length}, Groups ${this.vgGroups.length}, Invite Groups ${this.vgGroupsInvite.length}`);
            this.sortUserTable();
            this.sortGroupTable();
        }, error => {
            this.log(`Get VP Users failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    goBack() {
        this.location.back();
    }
    delete(visboproject) {
        this.visboprojectService.deleteVisboProject(visboproject, this.deleted)
            .subscribe(() => {
            this.alertService.success(`Visbo Project ${visboproject.name} deleted successfully`, true);
            this.log(`delete VP success`);
            // could not use go back as it is used from different places and produces access denied if it returns to KeyMetrics View
            this.router.navigate(['vp/'.concat(visboproject.vcid)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
        }, error => {
            this.log(`delete VP failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${visboproject.name}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVPAudit(visboproject) {
        this.log(`goto VP Audit: ${visboproject._id} Deleted ${this.deleted}`);
        this.router.navigate(['vpAudit/'.concat(visboproject._id)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    gotoVCDetail(visboproject) {
        this.router.navigate(['vcDetail/'.concat(visboproject.vcid)]);
    }
    gotoVPList(visboproject) {
        this.log(`goto VP List: ${visboproject._id} Deleted ${this.deleted}`);
        this.router.navigate(['vp/'.concat(visboproject.vcid)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    save() {
        this.visboprojectService.updateVisboProject(this.visboproject, this.deleted)
            .subscribe((vp) => {
            this.alertService.success(`Visbo Project ${vp.name} updated successfully`, true);
            this.goBack();
        }, error => {
            this.log(`save VP failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${this.visboproject.name}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Project ${this.visboproject.name} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    addNewVPUser() {
        var email = this.newUserInvite.email.trim();
        var groupName = this.newUserInvite.groupName.trim();
        var inviteGroup = this.vgGroups.filter(group => group.name == groupName)[0];
        var groupId = inviteGroup._id;
        var inviteMessage = '';
        if (this.newUserInvite.inviteMessage)
            inviteMessage = this.newUserInvite.inviteMessage.trim();
        var vpid = this.visboproject._id;
        this.log(`Add VisboProject User: ${email} Group: ${groupName}/${groupId} VP: ${vpid}`);
        if (!email || !groupId) {
            return;
        }
        this.visboprojectService.addVPUser(email, groupId, inviteMessage, vpid)
            .subscribe(group => {
            // Add User to User & Group list
            var newUserGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGUserGroup"]();
            newUserGroup.userId = group.users.filter(user => user.email == email)[0].userId;
            newUserGroup.email = email;
            newUserGroup.groupId = group._id;
            newUserGroup.groupName = group.name;
            newUserGroup.groupType = inviteGroup.groupType;
            newUserGroup.internal = inviteGroup.internal;
            this.log(`Add VisboCenter User Push: ${JSON.stringify(newUserGroup)}`);
            this.vgUsers.push(newUserGroup);
            this.sortUserTable();
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == group._id) {
                    this.vgGroups[i] = group;
                    break;
                }
            }
            this.alertService.success(`User ${email} added successfully`);
        }, error => {
            this.log(`Add VisboProject User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Add User to Visbo Project`);
            }
            else {
                this.log(`Error during add VP user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperRemoveUser(memberIndex) {
        // this.log(`Remove User Helper: ${userIndex}`);
        this.userIndex = memberIndex;
    }
    helperRemoveGroup(memberIndex) {
        this.groupIndex = memberIndex;
    }
    removeVPUser(user, vpid) {
        this.log(`Remove VisboProject User: ${user.email}/${user.userId} Group: ${user.groupName} VP: ${vpid}`);
        this.visboprojectService.deleteVPUser(user, vpid)
            .subscribe(users => {
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser !== user);
            // filter user from vgGroups
            for (var i = 0; i < this.vgGroups.length; i++) {
                if (this.vgGroups[i]._id == user.groupId) {
                    for (var j = 0; j < this.vgGroups[i].users.length; j++) {
                        if (this.vgGroups[i].users[j].userId == user.userId) {
                            this.vgGroups[i].users.splice(j, 1); // remove item from array
                            break;
                        }
                    }
                    break;
                }
            }
            this.alertService.success(`User ${user.email} removed successfully`);
        }, error => {
            this.log(`Remove VisboProject User error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove User from Visbo Project`);
            }
            else {
                this.log(`Error during remove User from VP user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    helperVPPerm(newGroup) {
        var perm = 0;
        if (newGroup.checkedVPView)
            perm += this.permVP.View;
        if (newGroup.checkedVPViewAudit)
            perm += this.permVP.ViewAudit;
        if (newGroup.checkedVPModify)
            perm += this.permVP.Modify;
        if (newGroup.checkedCreateVariant)
            perm += this.permVP.CreateVariant;
        if (newGroup.checkedVPManagePerm)
            perm += this.permVP.ManagePerm;
        if (newGroup.checkedVPDelete)
            perm += this.permVP.DeleteVP;
        return perm;
    }
    initGroup(curGroup) {
        if (curGroup) {
            this.actGroup.confirm = (curGroup.groupType == 'VP') ? 'Modify' : 'View';
            this.actGroup.gid = curGroup._id;
            this.log(`Init Group Set GroupID : ${this.actGroup.gid} ID ${curGroup._id}`);
            this.actGroup.groupName = curGroup.name;
            this.actGroup.groupType = curGroup.groupType;
            this.actGroup.internal = curGroup.internal;
            this.actGroup.checkGlobal = curGroup.global;
            this.actGroup.checkedView = (curGroup.permission.vc & this.permVC.View) > 0;
            this.actGroup.checkedViewAudit = (curGroup.permission.vc & this.permVC.ViewAudit) > 0;
            this.actGroup.checkedModify = (curGroup.permission.vc & this.permVC.Modify) > 0;
            this.actGroup.checkedCreateVP = (curGroup.permission.vc & this.permVC.CreateVP) > 0;
            this.actGroup.checkedManagePerm = (curGroup.permission.vc & this.permVC.ManagePerm) > 0;
            this.actGroup.checkedVPView = (curGroup.permission.vp & this.permVP.View) > 0;
            this.actGroup.checkedVPViewAudit = (curGroup.permission.vp & this.permVP.ViewAudit) > 0;
            this.actGroup.checkedVPModify = (curGroup.permission.vp & this.permVP.Modify) > 0;
            this.actGroup.checkedCreateVariant = (curGroup.permission.vp & this.permVP.CreateVariant) > 0;
            this.actGroup.checkedVPManagePerm = (curGroup.permission.vp & this.permVP.ManagePerm) > 0;
            this.actGroup.checkedVPDelete = (curGroup.permission.vp & this.permVP.DeleteVP) > 0;
        }
        else {
            this.actGroup.confirm = 'Add';
            this.actGroup.gid = undefined;
            this.actGroup.groupName = '';
            this.actGroup.groupType = 'VP';
            this.actGroup.internal = false;
            this.actGroup.checkGlobal = false;
            this.actGroup.checkedView = true;
        }
        this.log(`Init Group for Creation / Modification: ${this.actGroup.groupName} ID ${this.actGroup.gid} Action ${this.actGroup.confirm} `);
    }
    addModifyVPGroup() {
        var newGroup = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGGroup"];
        this.log(`Modify VisboProject Group: Group: ${this.actGroup.groupName} VC: ${this.visboproject.vcid} VP: ${this.visboproject._id} }`);
        newGroup.name = this.actGroup.groupName.trim();
        newGroup.global = false;
        newGroup.vcid = this.visboproject.vcid;
        newGroup.vpids = [];
        newGroup.vpids.push(this.visboproject._id);
        newGroup.permission = new _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPermission"];
        newGroup.permission.vp = this.helperVPPerm(this.actGroup);
        if (this.actGroup.gid) {
            // modify existing Group
            this.log(`Modify VisboProject Group: Group: ${newGroup.name} VC: ${newGroup.vcid} Perm: ${JSON.stringify(newGroup.permission)}`);
            newGroup._id = this.actGroup.gid;
            this.visboprojectService.modifyVPGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                this.log(`Modify VisboProject Group Push: ${JSON.stringify(group)}`);
                this.vgGroups = this.vgGroups.filter(vgGroup => vgGroup._id !== newGroup._id);
                this.vgGroups.push(group);
                this.vgGroupsInvite = this.vgGroups.filter(vgGroup => vgGroup.groupType == 'VP');
                // update User List to reflect new Group Name & ID
                for (var i = 0; i < this.vgUsers.length; i++) {
                    if (this.vgUsers[i].groupId == newGroup._id) {
                        this.vgUsers[i].groupName = group.name;
                    }
                }
                this.sortUserTable();
                this.sortGroupTable();
                this.alertService.success(`Group ${group.name} changed successfully`);
            }, error => {
                this.log(`Modify VisboProject Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Modify Group to Visbo Project`);
                }
                else {
                    this.log(`Error during modify VP Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            // create new Group
            this.log(`Add VisboCenter Group: Group: ${newGroup.name} VP: ${newGroup.vpids[0]} Perm: ${JSON.stringify(newGroup.permission)}`);
            this.visboprojectService.addVPGroup(newGroup)
                .subscribe(group => {
                // Add Group to Group list
                // this.log(`Add VisboCenter Group Push: ${JSON.stringify(group)}`);
                this.vgGroups.push(group);
                this.vgGroupsInvite = this.vgGroups.filter(vgGroup => vgGroup.groupType == 'VP');
                this.alertService.success(`Group ${group.name} added successfully`);
            }, error => {
                this.log(`Add VisboCenter Group error: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied: Add Group to Visbo Center`);
                }
                else {
                    this.log(`Error during add VC Group ${error.error.message}`); // log to console instead
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    removeVPGroup(group, vpid) {
        this.log(`Remove VisboProject Group: ${group.name}/${group._id} VP: ${vpid}`);
        this.visboprojectService.deleteVPGroup(group, vpid)
            .subscribe(response => {
            this.log(`Remove VisboProject Group result: ${JSON.stringify(response)}`);
            // filter user from vgUsers
            this.vgGroups = this.vgGroups.filter(vgGroup => vgGroup !== group);
            this.vgUsers = this.vgUsers.filter(vcUser => vcUser.groupId !== group._id);
            this.vgGroupsInvite = this.vgGroups.filter(vgGroup => vgGroup.groupType == 'VP');
            this.alertService.success(`Group ${group.name} removed successfully`);
        }, error => {
            this.log(`Remove VisboProject Group error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove Group from Visbo Project`);
            }
            else {
                this.log(`Error during remove Group from VP user ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    unlockVP(lockIndex) {
        var vpid = this.visboproject._id;
        var variantNameLock = this.visboproject.lock[lockIndex].variantName;
        this.log(`Remove VisboProject Lock: ${this.visboproject.name} Variant ${variantNameLock} ${this.visboproject.lock[lockIndex].expiresAt} VPID: ${vpid}`);
        this.visboprojectService.unlockVP(variantNameLock, vpid)
            .subscribe(response => {
            this.log(`Remove VisboProject Lock result: ${JSON.stringify(response)}`);
            for (var i = 0; i < this.visboproject.lock.length; i++) {
                if (this.visboproject.lock[i].variantName == variantNameLock) {
                    this.visboproject.lock.splice(i, 1);
                    break;
                }
            }
            this.alertService.success(`Lock ${variantNameLock} removed successfully`);
        }, error => {
            this.log(`Remove VisboProject Lock error: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Remove Lock from Visbo Project`);
            }
            else {
                this.log(`Error during remove Lock from VP  ${error.error.message}`); // log to console instead
                this.alertService.error(error.error.message);
            }
        });
    }
    sortUserTable(n = undefined) {
        if (!this.vgUsers)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortUserColumn == undefined) {
            if (n != this.sortUserColumn) {
                this.sortUserColumn = n;
                this.sortUserAscending = undefined;
            }
            if (this.sortUserAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortUserAscending = (n == 1 || n == 2) ? true : false;
                // console.log("Sort VC Column undefined", this.sortUserColumn, this.sortUserAscending)
            }
            else
                this.sortUserAscending = !this.sortUserAscending;
        }
        // this.log(`Sort Users Column ${this.sortUserColumn}`); // log to console instead
        if (this.sortUserColumn == 1) {
            // sort user email
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                if (a.email > b.email)
                    result = 1;
                else if (a.email < b.email)
                    result = -1;
                return result;
            });
        }
        else if (this.sortUserColumn == 2) {
            // sort user group name
            this.vgUsers.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.groupName.toLowerCase() > b.groupName.toLowerCase())
                    result = 1;
                else if (a.groupName.toLowerCase() < b.groupName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortUserColumn, this.sortUserAscending)
        if (!this.sortUserAscending) {
            this.vgUsers.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortUserColumn, this.sortUserAscending)
        }
    }
    sortGroupTable(n = undefined) {
        if (!this.vgGroups)
            return;
        // change sort order otherwise sort same column same direction
        if (n != undefined || this.sortGroupColumn == undefined) {
            if (n != this.sortGroupColumn) {
                this.sortGroupColumn = n;
                this.sortGroupAscending = undefined;
            }
            if (this.sortGroupAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortGroupAscending = (n == 1) ? true : false;
                // console.log("Sort VC Column undefined", this.sortGroupColumn, this.sortGroupAscending)
            }
            else
                this.sortGroupAscending = !this.sortGroupAscending;
        }
        // this.log(`Sort Groups Column ${this.sortGroupColumn}`); // log to console instead
        if (this.sortGroupColumn == 1) {
            // sort user email
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortGroupColumn == 2) {
            // sort user group name
            this.vgGroups.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                return b.users.length - a.users.length;
            });
        }
        // console.log("Sort VC Column %d %s Reverse?", this.sortGroupColumn, this.sortGroupAscending)
        if (!this.sortGroupAscending) {
            this.vgGroups.reverse();
            // console.log("Sort VC Column %d %s Reverse", this.sortGroupColumn, this.sortGroupAscending)
        }
    }
    /** Log a VisboProjectService message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectDetail: ' + message);
    }
};
VisboprojectDetailComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_4__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_6__["AuthenticationService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectService"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_5__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], VisboprojectDetailComponent.prototype, "visboproject", void 0);
VisboprojectDetailComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboproject-detail',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboproject-detail.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-detail/visboproject-detail.component.html")).default,
        styles: [tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! ./visboproject-detail.component.css */ "./src/app/visboproject-detail/visboproject-detail.component.css")).default]
    })
], VisboprojectDetailComponent);



/***/ }),

/***/ "./src/app/visboproject-keymetrics/visboproject-keymetrics.component.ts":
/*!******************************************************************************!*\
  !*** ./src/app/visboproject-keymetrics/visboproject-keymetrics.component.ts ***!
  \******************************************************************************/
/*! exports provided: VisboProjectKeyMetricsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectKeyMetricsComponent", function() { return VisboProjectKeyMetricsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visboprojectversion */ "./src/app/_models/visboprojectversion.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");









let VisboProjectKeyMetricsComponent = class VisboProjectKeyMetricsComponent {
    constructor(visboprojectversionService, visboprojectService, messageService, alertService, route, router) {
        this.visboprojectversionService = visboprojectversionService;
        this.visboprojectService = visboprojectService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.visbokeymetrics = [];
        this.deleted = false;
        this.chartButton = "View List";
        this.chart = true;
        this.history = false;
        this.historyButton = "View Trend";
        this.typeMetricList = [
            { name: "Total & Actual Cost", metric: "Costs" },
            { name: "Delivery Completion", metric: "Deliveries" },
            { name: "Reached Deadlines", metric: "Deadlines" }
        ];
        this.typeMetric = this.typeMetricList[0].name;
        this.typeMetricChart = this.typeMetricList[0].metric;
        // colors: string[] = ['#FF9900', '#FF9900', '#3399cc', '#FA8258'];
        this.colors = ['#F7941E', '#F7941E', '#458CCB', '#458CCB', '#996600', '#996600'];
        this.series = {
            '0': { lineWidth: 4, pointShape: 'star', lineDashStyle: [4, 8, 8, 4] },
            '1': { lineWidth: 4, pointShape: 'star' },
            '2': { lineWidth: 4, pointShape: 'triangle', lineDashStyle: [8, 4, 4, 8] },
            '3': { lineWidth: 4, pointShape: 'triangle' },
            '4': { lineWidth: 1, pointShape: 'circle', pointSize: 4 },
            '5': { lineWidth: 1, pointShape: 'circle', lineDashStyle: [8, 4, 4, 8], pointSize: 4 }
        };
        this.graphDataLineChart = [];
        this.graphOptionsLineChart = undefined;
        this.sortAscending = false;
        this.sortColumn = 1;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVP"];
    }
    ngOnInit() {
        this.getVisboProjectVersions();
    }
    onSelect(visboprojectversion) {
        this.getVisboProjectVersions();
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboProjectVersions() {
        const id = this.route.snapshot.paramMap.get('id');
        var i;
        this.vpSelected = id;
        this.parentThis = this;
        var chartFlag = this.chart;
        this.log(`get VP name if ID is used ${id}`);
        if (id) {
            this.visboprojectService.getVisboProject(id)
                .subscribe(visboproject => {
                this.vpActive = visboproject;
                this.combinedPerm = visboproject.perm;
                this.log(`get VP name if ID is used ${this.vpActive.name} Perm ${JSON.stringify(this.combinedPerm)}`);
                this.visboprojectversionService.getVisboProjectVersions(id, this.deleted, "", true)
                    .subscribe(visboprojectversions => {
                    this.visboprojectversions = visboprojectversions;
                    // this.sortVPVTable(undefined);
                    this.log(`get VPV Key metrics: Get ${visboprojectversions.length} Project Versions`);
                    this.visboKeyMetricsCalc();
                    if (this.hasVPPerm(this.permVP.ViewAudit)) {
                        this.chart = chartFlag;
                    }
                    else {
                        this.chart = false;
                    }
                }, error => {
                    this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                    if (error.status == 403) {
                        this.alertService.error(`Permission Denied for Visbo Project Versions`);
                    }
                    else {
                        this.alertService.error(error.error.message);
                    }
                });
            }, error => {
                this.log(`get VPV VP failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            this.vpSelected = null;
            this.vpActive = null;
            this.visboprojectversionService.getVisboProjectVersions(id, false, "", true)
                .subscribe(visboprojectversions => {
                this.visboprojectversions = visboprojectversions;
                this.log(`get VPF Key metrics: Get ${visboprojectversions.length} Project Versions`);
                this.visboKeyMetricsCalc();
                if (this.hasVPPerm(this.permVP.ViewAudit)) {
                    this.chart = chartFlag;
                }
                else {
                    this.chart = false;
                }
            }, error => {
                this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project Versions`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    visboKeyMetricsCalc() {
        // Calculate the keyMetrics Values to show in Chart and List
        this.visbokeymetrics = [];
        if (!this.visboprojectversions)
            return;
        this.log(`calc keyMetrics LEN ${this.visboprojectversions.length}`);
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            if (this.visboprojectversions[i].keyMetrics) {
                var elementKeyMetric = new _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_6__["VPVKeyMetricsCalc"]();
                elementKeyMetric.name = this.visboprojectversions[i].name;
                elementKeyMetric._id = this.visboprojectversions[i]._id;
                elementKeyMetric.timestamp = this.visboprojectversions[i].timestamp;
                elementKeyMetric.vpid = this.visboprojectversions[i].vpid;
                elementKeyMetric.variantName = this.visboprojectversions[i].variantName;
                elementKeyMetric.Risiko = this.visboprojectversions[i].Risiko;
                elementKeyMetric.StrategicFit = this.visboprojectversions[i].StrategicFit;
                elementKeyMetric.leadPerson = this.visboprojectversions[i].leadPerson;
                elementKeyMetric.status = this.visboprojectversions[i].status;
                elementKeyMetric.ampelStatus = this.visboprojectversions[i].ampelStatus;
                elementKeyMetric.ampelErlaeuterung = this.visboprojectversions[i].ampelErlaeuterung;
                elementKeyMetric.VorlagenName = this.visboprojectversions[i].VorlagenName;
                elementKeyMetric.complexity = this.visboprojectversions[i].complexity;
                elementKeyMetric.description = this.visboprojectversions[i].description;
                elementKeyMetric.businessUnit = this.visboprojectversions[i].businessUnit;
                elementKeyMetric.keyMetrics = this.visboprojectversions[i].keyMetrics;
                // Calculate Saving Cost in % of Total, limit the results to be between -100 and 100
                elementKeyMetric.savingCostTotal = Math.round((1 - (elementKeyMetric.keyMetrics.costCurrentTotal || 0) / (elementKeyMetric.keyMetrics.costBaseLastTotal || 1)) * 100) || 0;
                if (elementKeyMetric.savingCostTotal > 100)
                    elementKeyMetric.savingCostTotal = 100;
                if (elementKeyMetric.savingCostTotal < -100)
                    elementKeyMetric.savingCostTotal = -100;
                elementKeyMetric.savingCostTotal = Math.round(elementKeyMetric.savingCostTotal);
                elementKeyMetric.savingCostActual = ((1 - (elementKeyMetric.keyMetrics.costCurrentActual || 0) / (elementKeyMetric.keyMetrics.costBaseLastActual || 1)) * 100) || 0;
                // Calculate Saving EndDate in number of weeks related to BaseLine, limit the results to be between -20 and 20
                elementKeyMetric.savingEndDate = this.helperDateDiff((new Date(elementKeyMetric.keyMetrics.endDateBaseLast).toISOString()), (new Date(elementKeyMetric.keyMetrics.endDateCurrent).toISOString()), 'w') || 0;
                elementKeyMetric.savingEndDate = Math.round(elementKeyMetric.savingEndDate);
                // Calculate the Delivery Completion
                if (!elementKeyMetric.keyMetrics.deliverableCompletionBaseLastTotal) {
                    elementKeyMetric.deliveryCompletionTotal = 100;
                }
                else {
                    elementKeyMetric.deliveryCompletionTotal = Math.round((elementKeyMetric.keyMetrics.deliverableCompletionCurrentTotal || 0) / elementKeyMetric.keyMetrics.deliverableCompletionBaseLastTotal * 100);
                }
                if (!elementKeyMetric.keyMetrics.deliverableCompletionBaseLastActual) {
                    elementKeyMetric.deliveryCompletionActual = 100;
                }
                else {
                    elementKeyMetric.deliveryCompletionActual = Math.round((elementKeyMetric.keyMetrics.deliverableCompletionCurrentActual || 0) / elementKeyMetric.keyMetrics.deliverableCompletionBaseLastActual * 100);
                }
                // Calculate the Deadline Completion
                if (!elementKeyMetric.keyMetrics.timeCompletionBaseLastTotal) {
                    elementKeyMetric.timeCompletionTotal = 100;
                }
                else {
                    elementKeyMetric.timeCompletionTotal = Math.round((elementKeyMetric.keyMetrics.timeCompletionCurrentTotal || 0) / elementKeyMetric.keyMetrics.timeCompletionBaseLastTotal * 100);
                }
                if (!elementKeyMetric.keyMetrics.timeCompletionBaseLastActual) {
                    elementKeyMetric.timeCompletionActual = 100;
                }
                else {
                    elementKeyMetric.timeCompletionActual = Math.round((elementKeyMetric.keyMetrics.timeCompletionCurrentActual || 0) / elementKeyMetric.keyMetrics.timeCompletionBaseLastActual * 100);
                }
                this.visbokeymetrics.push(elementKeyMetric);
            }
        }
        this.log(`calc keyMetrics Result LEN ${this.visbokeymetrics.length}`);
        this.sortKeyMetricsTable(undefined);
        // select latest element
        this.setVpvActive(this.visbokeymetrics[0]);
        this.visboKeyMetricsCostOverTime();
    }
    sameDay(dateA, dateB) {
        var localA = new Date(dateA);
        var localB = new Date(dateB);
        localA.setHours(0, 0, 0, 0);
        localB.setHours(0, 0, 0, 0);
        // return false;
        return localA.getTime() == localB.getTime();
    }
    visboKeyMetricsCostOverTime() {
        this.graphOptionsLineChart = {
            // 'chartArea':{'left':20,'top':0,width:'800','height':'100%'},
            width: '100%',
            title: 'Actual & Total Cost: Plan vs. Base Line',
            animation: { startup: true, duration: 200 },
            legend: { position: 'top' },
            explorer: { actions: ['dragToZoom', 'rightClickToReset'], maxZoomIn: .01 },
            vAxis: {
                title: 'Cost in k\u20AC',
                minorGridlines: { count: 0, color: 'none' }
            },
            hAxis: {
                format: 'MMM YY',
                gridlines: {
                    count: -1
                },
                minorGridlines: { count: 0, color: 'none' }
            },
            pointSize: 14,
            curveType: 'function',
            series: this.series,
            colors: this.colors
        };
        var keyMetricsCost = [];
        if (!this.visboprojectversions)
            return;
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            if (!this.visboprojectversions[i].keyMetrics) {
                // this.visboprojectversions[i].keyMetrics =  new VPVKeyMetrics;
                continue;
            }
            // skip multiple versions per day
            if (i < this.visboprojectversions.length - 1 && this.sameDay(this.visboprojectversions[i].timestamp, this.visboprojectversions[i + 1].timestamp)) {
                this.log(`visboKeyMetrics Skip Same Day  ${this.visboprojectversions[i].timestamp}  ${this.visboprojectversions[i + 1].timestamp}`);
                continue;
            }
            // this.log(`visboKeyMetrics Push  ${this.visboprojectversions[i].timestamp}`);
            keyMetricsCost.push([
                new Date(this.visboprojectversions[i].timestamp),
                Math.trunc(this.visboprojectversions[i].keyMetrics.costBaseLastTotal || 0),
                Math.trunc(this.visboprojectversions[i].keyMetrics.costBaseLastActual || 0),
                Math.trunc(this.visboprojectversions[i].keyMetrics.costCurrentTotal || 0),
                Math.trunc(this.visboprojectversions[i].keyMetrics.costCurrentActual || 0)
            ]);
        }
        if (keyMetricsCost.length == 0) {
            this.log(`keyMetricsCost empty`);
            keyMetricsCost.push([new Date(), 0, 0, 0, 0]);
        }
        keyMetricsCost.sort(function (a, b) { return a[0] - b[0]; });
        // we need at least 2 items for Line Chart and show the current status for today
        var len = keyMetricsCost.length;
        // this.log(`visboKeyMetrics len ${len} ${JSON.stringify(this.visboprojectversions[len-1])}`);
        if (len == 1) {
            keyMetricsCost.push([
                new Date(),
                keyMetricsCost[len - 1][1],
                keyMetricsCost[len - 1][2],
                keyMetricsCost[len - 1][3],
                keyMetricsCost[len - 1][4]
            ]);
        }
        keyMetricsCost.push(['Timestamp', 'Total (Base Line)', 'Actual (Base Line)', 'Total (Plan)', 'Actual (Plan)']);
        keyMetricsCost.reverse();
        // this.log(`visboKeyMetrics VP cost budget  ${JSON.stringify(keyMetricsCost)}`);
        this.graphDataLineChart = keyMetricsCost;
    }
    visboKeyMetricsDeliveriesOverTime() {
        this.graphOptionsLineChart = {
            // 'chartArea':{'left':20,'top':0,width:'800','height':'100%'},
            width: '100%',
            title: 'Completion of Deliveries: Plan vs. Base Line',
            animation: { startup: true, duration: 200 },
            explorer: { actions: ['dragToZoom', 'rightClickToReset'], maxZoomIn: .01 },
            legend: { position: 'top' },
            vAxes: [
                {
                    title: 'Weighted Number of Deliveries completed',
                    minorGridlines: { count: 0, color: 'none' }
                },
                {
                    title: 'Ahead/Delay in Days',
                    minorGridlines: { count: 0, color: 'none' }
                }
            ],
            // vAxis: {
            //   title: 'Weighted Number of Deliveries completed',
            //   minorGridlines: {count: 0, color: 'none'}
            // },
            hAxis: {
                format: 'MMM YY',
                gridlines: {
                    count: -1
                },
                minorGridlines: { count: 0, color: 'none' }
            },
            curveType: 'function',
            pointSize: 14,
            series: this.series,
            colors: this.colors
        };
        // assign to second yAxis
        this.graphOptionsLineChart.series[4].targetAxisIndex = 1;
        this.graphOptionsLineChart.series[5].targetAxisIndex = 1;
        var keyMetrics = [];
        if (!this.visboprojectversions)
            return;
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            if (!this.visboprojectversions[i].keyMetrics) {
                continue;
            }
            // skip multiple versions per day
            if (i < this.visboprojectversions.length - 1 && this.sameDay(this.visboprojectversions[i].timestamp, this.visboprojectversions[i + 1].timestamp)) {
                this.log(`visboKeyMetrics Skip Same Day  ${this.visboprojectversions[i].timestamp}  ${this.visboprojectversions[i + 1].timestamp}`);
                continue;
            }
            keyMetrics.push([
                new Date(this.visboprojectversions[i].timestamp),
                Math.round((this.visboprojectversions[i].keyMetrics.deliverableCompletionBaseLastTotal || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.deliverableCompletionBaseLastActual || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.deliverableCompletionCurrentTotal || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.deliverableCompletionCurrentActual || 0) * 100) / 100,
                this.visboprojectversions[i].keyMetrics.deliverableDelayCurrentActual || 0,
                this.visboprojectversions[i].keyMetrics.deliverableDelayCurrentTotal || 0
            ]);
            // this.log(`visboKeyMetrics push ${JSON.stringify(keyMetrics[keyMetrics.length-1])}`);
        }
        if (keyMetrics.length == 0) {
            this.log(`visboKeyMetrics empty`);
            keyMetrics.push([new Date(), 0, 0, 0, 0, 0, 0]);
        }
        keyMetrics.sort(function (a, b) { return a[0] - b[0]; });
        // we need at least 2 items for Line Chart and show the current status for today
        var len = keyMetrics.length;
        // this.log(`visboKeyMetrics duplicate ${len-1} ${JSON.stringify(this.visboprojectversions[len-1])}`);
        if (len == 1) {
            keyMetrics.push([
                new Date(),
                keyMetrics[len - 1][1],
                keyMetrics[len - 1][2],
                keyMetrics[len - 1][3],
                keyMetrics[len - 1][4],
                keyMetrics[len - 1][5],
                keyMetrics[len - 1][6]
            ]);
        }
        this.graphOptionsLineChart.vAxes[0].maxValue = this.calcRangeAxis(keyMetrics, 'Delivery');
        this.graphOptionsLineChart.vAxes[0].minValue = -this.graphOptionsLineChart.vAxes[0].maxValue;
        this.graphOptionsLineChart.vAxes[1].maxValue = this.calcRangeAxis(keyMetrics, 'Delay');
        this.graphOptionsLineChart.vAxes[1].minValue = -this.graphOptionsLineChart.vAxes[1].maxValue;
        keyMetrics.push(['Timestamp', 'Total (Base Line)', 'Actual (Base Line)', 'Total', 'Actual Completion', 'Ahead/Delay Actual', 'Ahead/Delay Total']);
        keyMetrics.reverse();
        this.log(`visboKeyMetrics VP Delivery Completion  ${JSON.stringify(this.graphOptionsLineChart)}`);
        this.graphDataLineChart = keyMetrics;
    }
    visboKeyMetricsDeadlinesOverTime() {
        this.graphOptionsLineChart = {
            // 'chartArea':{'left':20,'top':0,width:'800','height':'100%'},
            width: '100%',
            title: 'Achievement of Deadlines current & plan',
            animation: { startup: true, duration: 200 },
            explorer: { actions: ['dragToZoom', 'rightClickToReset'], maxZoomIn: .01 },
            legend: { position: 'top' },
            vAxes: [
                {
                    title: 'Number of weighted completed Deadlines',
                    minorGridlines: { count: 0, color: 'none' }
                },
                {
                    title: 'Ahead/Delay in Days',
                    minorGridlines: { count: 0, color: 'none' }
                }
            ],
            hAxis: {
                format: 'MMM YY',
                gridlines: {
                    count: -1
                },
                minorGridlines: { count: 0, color: 'none' }
            },
            pointSize: 14,
            curveType: 'function',
            series: this.series,
            colors: this.colors
        };
        // assign to second yAxis
        this.graphOptionsLineChart.series[4].targetAxisIndex = 1;
        this.graphOptionsLineChart.series[5].targetAxisIndex = 1;
        var keyMetrics = [];
        if (!this.visboprojectversions)
            return;
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            if (!this.visboprojectversions[i].keyMetrics) {
                continue;
            }
            // skip multiple versions per day
            if (i < this.visboprojectversions.length - 1 && this.sameDay(this.visboprojectversions[i].timestamp, this.visboprojectversions[i + 1].timestamp)) {
                this.log(`visboKeyMetrics Skip Same Day  ${this.visboprojectversions[i].timestamp}  ${this.visboprojectversions[i + 1].timestamp}`);
                continue;
            }
            keyMetrics.push([
                new Date(this.visboprojectversions[i].timestamp),
                Math.round((this.visboprojectversions[i].keyMetrics.timeCompletionBaseLastTotal || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.timeCompletionBaseLastActual || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.timeCompletionCurrentTotal || 0) * 100) / 100,
                Math.round((this.visboprojectversions[i].keyMetrics.timeCompletionCurrentActual || 0) * 100) / 100,
                this.visboprojectversions[i].keyMetrics.timeDelayCurrentActual || 0,
                this.visboprojectversions[i].keyMetrics.timeDelayCurrentTotal || 0
            ]);
        }
        if (keyMetrics.length == 0) {
            this.log(`visboKeyMetrics empty`);
            keyMetrics.push([new Date(), 0, 0, 0, 0, 0, 0]);
        }
        keyMetrics.sort(function (a, b) { return a[0] - b[0]; });
        // we need at least 2 items for Line Chart and show the current status for today
        var len = keyMetrics.length;
        this.log(`visboKeyMetrics duplicate ${len - 1} ${JSON.stringify(this.visboprojectversions[len - 1])}`);
        if (len == 1) {
            keyMetrics.push([
                new Date(),
                keyMetrics[len - 1][1],
                keyMetrics[len - 1][2],
                keyMetrics[len - 1][3],
                keyMetrics[len - 1][4],
                keyMetrics[len - 1][5],
                keyMetrics[len - 1][6]
            ]);
        }
        this.graphOptionsLineChart.vAxes[0].maxValue = this.calcRangeAxis(keyMetrics, 'Deadline');
        this.graphOptionsLineChart.vAxes[0].minValue = -this.graphOptionsLineChart.vAxes[0].maxValue;
        this.graphOptionsLineChart.vAxes[1].maxValue = this.calcRangeAxis(keyMetrics, 'Delay');
        this.graphOptionsLineChart.vAxes[1].minValue = -this.graphOptionsLineChart.vAxes[1].maxValue;
        keyMetrics.push(['Timestamp', 'Total (Base Line)', 'Actual (Base Line)', 'Total Date Completion', 'Actual Date Completion', 'Ahead/Delay Actual', 'Ahead/Delay Total']);
        // keyMetrics.push(['Timestamp', 'All Deadlines', 'Past Deadlines']);
        keyMetrics.reverse();
        // this.log(`visboKeyMetrics VP Date Completion  ${JSON.stringify(keyMetrics)}`);
        this.graphDataLineChart = keyMetrics;
    }
    calcRangeAxis(keyMetrics, type) {
        var rangeAxis = 0;
        var minSize = Infinity, maxSize = 0;
        var minDelayRange = 50;
        rangeAxis = 0;
        for (var i = 0; i < keyMetrics.length; i++) {
            switch (type) {
                case 'Delay':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][5]), Math.abs(keyMetrics[i][6]), minDelayRange);
                    break;
                case 'Delivery':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][1]));
                    break;
                case 'Deadline':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][1]));
                    break;
            }
        }
        rangeAxis *= 1.1;
        this.log(`RangeAxis for ${type}: ${rangeAxis}`);
        return rangeAxis;
    }
    gotoVisboProjectVersions() {
        this.log(`goto VPV All Versions ${this.vpvKeyMetricActive.vpid} `);
        this.router.navigate(['vpv/'.concat(this.vpvKeyMetricActive.vpid)], {});
    }
    gotoViewCost() {
        this.log(`goto VPV View Cost ${this.vpvKeyMetricActive.vpid} `);
        var queryParams = { vpvid: this.vpvKeyMetricActive._id };
        this.router.navigate(['vpViewCost/'.concat(this.vpvKeyMetricActive.vpid)], { queryParams: queryParams });
    }
    gotoClickedRow(visboprojectversion) {
        this.log(`goto VPV Detail for VP ${visboprojectversion.name} Deleted ${this.deleted}`);
        this.router.navigate(['vpvDetail/'.concat(visboprojectversion._id)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
        // this.router.navigate(['vpvDetail/'.concat(visboprojectversion._id)], {});
    }
    listSelectRow(vpv) {
        this.log(`List: User selected ${vpv._id} ${vpv.name}`);
        this.setVpvActive(vpv);
    }
    chartSelectRow(row, col, label) {
        this.log(`Line Chart: User selected ${row} ${col} ${label} Len ${this.visbokeymetrics.length}`);
        if (row < 0 || row >= this.visbokeymetrics.length)
            row = 0;
        this.setVpvActive(this.visbokeymetrics[row]);
        this.log(`Line Chart: User selected ${row} ${col} ${this.vpvKeyMetricActive._id} ${this.vpvKeyMetricActive.timestamp}`);
    }
    setVpvActive(vpv) {
        var keyMetrics = vpv.keyMetrics;
        var index;
        let level1 = 0.05;
        let level2 = 0.15;
        let delay1 = 7;
        this.vpvKeyMetricActive = vpv;
        this.log(`VPV Active: vpv: ${vpv._id} ${this.vpvKeyMetricActive._id} ${this.vpvKeyMetricActive.timestamp}`);
        index = keyMetrics.costCurrentActual / (keyMetrics.costBaseLastActual || 1);
        if (index < 1 + level1)
            this.qualityCost = 1;
        else if (index < 1 + level2)
            this.qualityCost = 2;
        else
            this.qualityCost = 3;
        index = keyMetrics.costCurrentTotal / (keyMetrics.costBaseLastTotal || 1);
        if (index < 1 + level1)
            this.qualityTotalCost = 1;
        else if (index < 1 + level2)
            this.qualityTotalCost = 2;
        else
            this.qualityTotalCost = 3;
        index = keyMetrics.timeCompletionCurrentActual / (keyMetrics.timeCompletionBaseLastActual || 1);
        if (index > 1 - level1)
            this.qualityDeadlines = 1;
        else if (index > 1 - level2)
            this.qualityDeadlines = 2;
        else
            this.qualityDeadlines = 3;
        index = keyMetrics.deliverableCompletionCurrentActual / (keyMetrics.deliverableCompletionBaseLastActual || 1);
        if (index > 1 - level1)
            this.qualityDelivery = 1;
        else if (index > 1 - level2)
            this.qualityDelivery = 2;
        else
            this.qualityDelivery = 3;
        index = keyMetrics.deliverableDelayCurrentActual || 0;
        if (index <= 0)
            this.delayActualDelivery = 1;
        else if (index > delay1)
            this.delayActualDelivery = 2;
        else
            this.delayActualDelivery = 3;
        index = keyMetrics.deliverableDelayCurrentTotal || 0;
        if (index <= 0)
            this.delayTotalDelivery = 1;
        else if (index > delay1)
            this.delayTotalDelivery = 2;
        else
            this.delayTotalDelivery = 3;
        index = keyMetrics.timeDelayCurrentActual || 0;
        if (index <= 0)
            this.delayActualDeadlines = 1;
        else if (index > delay1)
            this.delayActualDeadlines = 2;
        else
            this.delayActualDeadlines = 3;
        index = keyMetrics.timeDelayCurrentTotal || 0;
        if (index <= 0)
            this.delayTotalDeadlines = 1;
        else if (index > delay1)
            this.delayTotalDeadlines = 2;
        else
            this.delayTotalDeadlines = 3;
        index = (new Date(keyMetrics.endDateCurrent)).getTime() - (new Date(keyMetrics.endDateBaseLast)).getTime();
        this.delayEndDate = Math.round(index / 1000 / 60 / 60 / 24) / 7;
        this.log(`Quality End Date ${keyMetrics.endDateCurrent} Cost ${this.qualityCost} Del. ${this.qualityDelivery} Dead. ${this.qualityDeadlines} EndDate ${this.delayEndDate}, Delay Deadlines ${this.delayActualDeadlines} / ${this.delayTotalDeadlines} Delay Deliveries ${this.delayActualDelivery} / ${this.delayTotalDelivery} `);
    }
    gotoVPDetail(visboproject) {
        this.router.navigate(['vpDetail/'.concat(visboproject._id)]);
    }
    gotoVC(visboproject) {
        this.router.navigate(['vp/'.concat(visboproject.vcid)]);
    }
    changeChart() {
        this.log(`Switch Chart to ${this.typeMetric} `);
        this.typeMetricChart = this.typeMetricList.find(x => x.name == this.typeMetric).metric;
        switch (this.typeMetricChart) {
            case 'Costs':
                this.visboKeyMetricsCostOverTime();
                break;
            case 'Deadlines':
                this.visboKeyMetricsDeadlinesOverTime();
                break;
            case 'Deliveries':
                this.visboKeyMetricsDeliveriesOverTime();
                break;
        }
    }
    switchTo(metric) {
        this.log(`Switch Chart from ${this.typeMetricChart} to ${metric} `);
        if (this.typeMetricChart == metric) {
            this.showHistory(!this.history);
            return;
        }
        var newTypeMetric = this.typeMetricList.find(x => x.metric == metric).name;
        // toggle between drop down views
        if (newTypeMetric) {
            this.typeMetricChart = metric;
            this.typeMetric = newTypeMetric;
            this.showHistory(true);
            switch (metric) {
                case 'Costs':
                    this.visboKeyMetricsCostOverTime();
                    break;
                case 'Deadlines':
                    this.visboKeyMetricsDeadlinesOverTime();
                    break;
                case 'Deliveries':
                    this.visboKeyMetricsDeliveriesOverTime();
                    break;
            }
        }
        else {
            // toggle to vpv Detail View
            switch (metric) {
                case 'DetailCosts':
                    break;
                case 'DetailDeadlines':
                    break;
                case 'DetailDeliveries':
                    break;
            }
        }
    }
    switchChart() {
        this.chart = !this.chart;
        this.chartButton = this.chart ? "View List" : "View Chart";
        // this.log(`Toggle Chart to ${this.chart} Graph ${JSON.stringify(this.graphDataLineChart)}`);
    }
    showHistory(newValue) {
        this.history = newValue;
        this.historyButton = this.history ? "Hide Trend" : "View Trend";
    }
    helperDateDiff(from, to, unit) {
        var fromDate = new Date(from);
        var toDate = new Date(to);
        var dateDiff = fromDate.getTime() - toDate.getTime();
        if (unit == 'w') {
            dateDiff = dateDiff / 1000 / 60 / 60 / 24 / 7;
        }
        else if (unit == 'd') {
            dateDiff = dateDiff / 1000 / 60 / 60 / 24;
        }
        else {
            dateDiff = dateDiff / 1000;
        }
        return dateDiff;
    }
    getShortText(text, len) {
        if (!text)
            return "";
        if (text.length < len)
            return text;
        if (len < 3)
            return '...';
        return text.substring(0, len - 3).concat('...');
    }
    sortVPVTable(n) {
        if (!this.visboprojectversions)
            return;
        if (n != undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 5) ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = false;
        }
        if (this.sortColumn == 1) {
            // sort by VPV Timestamp
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.timestamp > b.timestamp)
                    result = 1;
                else if (a.timestamp < b.timestamp)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by VPV endDate
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.endDate > b.endDate)
                    result = 1;
                else if (a.endDate < b.endDate)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by VPV ampelStatus
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.ampelStatus > b.ampelStatus)
                    result = 1;
                else if (a.ampelStatus < b.ampelStatus)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by VPV Erloes
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.Erloes > b.Erloes)
                    result = 1;
                else if (a.Erloes < b.Erloes)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by VC vpvCount
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.variantName.toLowerCase() > b.variantName.toLowerCase())
                    result = 1;
                else if (a.variantName.toLowerCase() < b.variantName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        if (!this.sortAscending) {
            this.visboprojectversions.reverse();
        }
    }
    sortKeyMetricsTable(n) {
        if (!this.visbokeymetrics)
            return;
        if (n != undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 1) ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = false;
        }
        this.log(`Sort Key Metrics: Col ${n} Asc ${this.sortAscending}`);
        if (this.sortColumn == 1) {
            // sort by Timestamp
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.timestamp > b.timestamp)
                    result = 1;
                else if (a.timestamp < b.timestamp)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by keyMetrics Saving Cost Actual
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.savingCostActual > b.savingCostActual)
                    result = 1;
                else if (a.savingCostActual < b.savingCostActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by keyMetrics Saving Cost Total
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.savingCostTotal > b.savingCostTotal)
                    result = 1;
                else if (a.savingCostTotal < b.savingCostTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by keyMetrics Base Line Cost Actual
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.costBaseLastActual > b.keyMetrics.costBaseLastActual)
                    result = 1;
                else if (a.keyMetrics.costBaseLastActual < b.keyMetrics.costBaseLastActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by keyMetrics Base Line Cost Total
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.costBaseLastTotal > b.keyMetrics.costBaseLastTotal)
                    result = 1;
                else if (a.keyMetrics.costBaseLastTotal < b.keyMetrics.costBaseLastTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 6) {
            // sort by keyMetrics Traffic Light
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.ampelStatus > b.ampelStatus)
                    result = 1;
                else if (a.ampelStatus < b.ampelStatus)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 10) {
            // sort by keyMetrics Status
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.timeCompletionActual > b.timeCompletionActual)
                    result = 1;
                else if (a.timeCompletionActual < b.timeCompletionActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 11) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.timeCompletionBaseLastActual > b.keyMetrics.timeCompletionBaseLastActual)
                    result = 1;
                else if (a.keyMetrics.timeCompletionBaseLastActual < b.keyMetrics.timeCompletionBaseLastActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 12) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.timeCompletionBaseLastTotal > b.keyMetrics.timeCompletionBaseLastTotal)
                    result = 1;
                else if (a.keyMetrics.timeCompletionBaseLastTotal < b.keyMetrics.timeCompletionBaseLastTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 13) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.timeDelayCurrentActual > b.keyMetrics.timeDelayCurrentActual)
                    result = 1;
                else if (a.keyMetrics.timeDelayCurrentActual < b.keyMetrics.timeDelayCurrentActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 14) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.timeDelayCurrentTotal > b.keyMetrics.timeDelayCurrentTotal)
                    result = 1;
                else if (a.keyMetrics.timeDelayCurrentTotal < b.keyMetrics.timeDelayCurrentTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 20) {
            // sort by keyMetrics Status
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.deliveryCompletionActual > b.deliveryCompletionActual)
                    result = 1;
                else if (a.deliveryCompletionActual < b.deliveryCompletionActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 21) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.deliverableCompletionCurrentActual > b.keyMetrics.deliverableCompletionCurrentActual)
                    result = 1;
                else if (a.keyMetrics.deliverableCompletionCurrentActual < b.keyMetrics.deliverableCompletionCurrentActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 22) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.deliverableCompletionCurrentTotal > b.keyMetrics.deliverableCompletionCurrentTotal)
                    result = 1;
                else if (a.keyMetrics.deliverableCompletionCurrentTotal < b.keyMetrics.deliverableCompletionCurrentTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 23) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.deliverableDelayCurrentActual > b.keyMetrics.deliverableDelayCurrentActual)
                    result = 1;
                else if (a.keyMetrics.deliverableDelayCurrentActual < b.keyMetrics.deliverableDelayCurrentActual)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 24) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.deliverableDelayCurrentTotal > b.keyMetrics.deliverableDelayCurrentTotal)
                    result = 1;
                else if (a.keyMetrics.deliverableDelayCurrentTotal < b.keyMetrics.deliverableDelayCurrentTotal)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 32) {
            // sort by keyMetrics endDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.keyMetrics.endDateBaseLast > b.keyMetrics.endDateBaseLast)
                    result = 1;
                else if (a.keyMetrics.endDateBaseLast < b.keyMetrics.endDateBaseLast)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 33) {
            // sort by keyMetrics saving EndDate
            this.visbokeymetrics.sort(function (a, b) {
                var result = 0;
                if (a.savingEndDate > b.savingEndDate)
                    result = 1;
                else if (a.savingEndDate < b.savingEndDate)
                    result = -1;
                return result;
            });
        }
        if (!this.sortAscending) {
            this.visbokeymetrics.reverse();
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectKeyMetrics: ' + message);
    }
};
VisboProjectKeyMetricsComponent.ctorParameters = () => [
    { type: _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectVersionService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__["VisboProjectService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboProjectKeyMetricsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboproject-keymetrics',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboproject-keymetrics.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-keymetrics/visboproject-keymetrics.component.html")).default
    })
], VisboProjectKeyMetricsComponent);



/***/ }),

/***/ "./src/app/visboproject-viewcost/visboproject-viewcost.component.ts":
/*!**************************************************************************!*\
  !*** ./src/app/visboproject-viewcost/visboproject-viewcost.component.ts ***!
  \**************************************************************************/
/*! exports provided: VisboProjectViewCostComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectViewCostComponent", function() { return VisboProjectViewCostComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visboprojectversion */ "./src/app/_models/visboprojectversion.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");









let VisboProjectViewCostComponent = class VisboProjectViewCostComponent {
    constructor(visboprojectversionService, visboprojectService, messageService, alertService, route, router) {
        this.visboprojectversionService = visboprojectversionService;
        this.visboprojectService = visboprojectService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.deleted = false;
        this.refDateInterval = "month";
        this.chartButton = "View List";
        this.chart = true;
        this.history = false;
        this.historyButton = "View Trend";
        // colors: string[] = ['#FF9900', '#FF9900', '#3399cc', '#FA8258'];
        this.colors = ['#F7941E', '#458CCB'];
        this.series = {
            '0': { lineWidth: 4, pointShape: 'star' },
            '1': { lineWidth: 4, pointShape: 'triangle' }
        };
        this.graphDataLineChart = [];
        this.graphOptionsLineChart = undefined;
        this.sortAscending = false;
        this.sortColumn = 1;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_8__["VGPVP"];
    }
    ngOnInit() {
        if (this.route.snapshot.queryParams.vpvid) {
            this.initVPVID = this.route.snapshot.queryParams.vpvid;
        }
        this.getVisboProjectVersions();
    }
    onSelect(visboprojectversion) {
        this.getVisboProjectVersions();
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboProjectVersions() {
        const id = this.route.snapshot.paramMap.get('id');
        var i;
        this.vpSelected = id;
        this.parentThis = this;
        var chartFlag = this.chart;
        this.log(`get VP name if ID is used ${id}`);
        if (id) {
            this.visboprojectService.getVisboProject(id)
                .subscribe(visboproject => {
                this.vpActive = visboproject;
                this.combinedPerm = visboproject.perm;
                this.log(`get VP name if ID is used ${this.vpActive.name} Perm ${JSON.stringify(this.combinedPerm)}`);
                this.visboprojectversionService.getVisboProjectVersions(id, this.deleted, "", false)
                    .subscribe(visboprojectversions => {
                    this.visboprojectversions = visboprojectversions;
                    this.log(`get VPV: Get ${visboprojectversions.length} Project Versions`);
                    if (visboprojectversions.length > 0) {
                        this.sortVPVTable();
                    }
                    var initIndex = 0;
                    if (this.initVPVID) {
                        for (var i = 0; i < visboprojectversions.length; i++) {
                            if (visboprojectversions[i]._id.toString() == this.initVPVID) {
                                initIndex = i;
                                break;
                            }
                        }
                    }
                    this.visboCostCalc(initIndex);
                    if (this.hasVPPerm(this.permVP.ViewAudit)) {
                        this.chart = chartFlag;
                    }
                    else {
                        this.chart = false;
                    }
                }, error => {
                    this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                    if (error.status == 403) {
                        this.alertService.error(`Permission Denied for Visbo Project Versions`);
                    }
                    else {
                        this.alertService.error(error.error.message);
                    }
                });
            }, error => {
                this.log(`get VPV VP failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    visboCostCalc(index) {
        var chartFlag = this.chart;
        this.chart = false;
        this.vpvActive = this.visboprojectversions[index];
        this.vpvRefDate = this.vpvActive.timestamp;
        if (!this.vpvActive)
            return;
        // MS TODO: check if we have the cost already for this timestamp and skip fetching it again
        // if (this.vpvActive.cost) {
        //   this.visboViewCostOverTime(this.vpvActive._id);
        //   if (this.hasVPPerm(this.permVP.ViewAudit)) {
        //     this.chart = chartFlag;
        //   } else {
        //     this.chart = false;
        //   }
        //   return;
        // }
        this.log(`Cost Calc for Version  ${this.vpvActive._id} ${this.vpvActive.timestamp}`);
        this.visboprojectversionService.getCost(this.vpvActive._id)
            .subscribe(visboprojectversions => {
            this.log(`get VPV Calc: Get ${visboprojectversions.length} vpvs with ${visboprojectversions[0].cost.length} cost entries`);
            if (visboprojectversions.length != 1 || !visboprojectversions[0].cost) {
                this.log(`get VPV Calc: Reset Cost to empty `);
                // this.vpvCost[visboprojectversions[0]._id] = [];
                this.vpvCost = [new _models_visboprojectversion__WEBPACK_IMPORTED_MODULE_6__["VPVCost"]];
            }
            else {
                this.log(`Store Cost for ${visboprojectversions[0]._id} Len ${visboprojectversions[0].cost.length} `);
                // this.vpvCost[visboprojectversions[0]._id] = visboprojectversions[0].cost;
                this.vpvCost = visboprojectversions[0].cost;
                this.visboprojectversions[index].cost = this.vpvCost;
            }
            this.visboViewCostOverTime(visboprojectversions[0]._id);
            if (this.hasVPPerm(this.permVP.ViewAudit)) {
                this.chart = chartFlag;
            }
            else {
                this.chart = false;
            }
        }, error => {
            this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied for Visbo Project Versions`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    sameDay(dateA, dateB) {
        var localA = new Date(dateA);
        var localB = new Date(dateB);
        localA.setHours(0, 0, 0, 0);
        localB.setHours(0, 0, 0, 0);
        // return false;
        return localA.getTime() == localB.getTime();
    }
    visboViewCostOverTime(id) {
        this.graphOptionsLineChart = {
            // 'chartArea':{'left':20,'top':0,width:'800','height':'100%'},
            width: '100%',
            title: 'Monthly Cost: Plan vs. Base Line',
            // animation: {startup: true, duration: 200},
            legend: { position: 'top' },
            explorer: { actions: ['dragToZoom', 'rightClickToReset'], maxZoomIn: .01 },
            vAxis: {
                title: 'Monthly Cost in k\u20AC',
                minorGridlines: { count: 0, color: 'none' }
            },
            hAxis: {
                format: 'MMM YY',
                gridlines: {
                    count: -1
                },
                minorGridlines: { count: 0, color: 'none' }
            },
            pointSize: 14,
            curveType: 'function',
            series: this.series,
            colors: this.colors
        };
        var graphDataCost = [];
        if (!this.vpvCost)
            return;
        var cost = this.vpvCost;
        this.vpvTotalCostBaseLine = 0;
        this.vpvTotalCostCurrent = 0;
        for (var i = 0; i < cost.length; i++) {
            // this.log(`ViewCostOverTime Push  ${cost[i].currentDate}`);
            graphDataCost.push([
                new Date(cost[i].currentDate),
                Math.trunc(cost[i].baseLineCost || 0),
                Math.trunc(cost[i].currentCost || 0)
            ]);
            this.vpvTotalCostBaseLine += cost[i].baseLineCost || 0;
            this.vpvTotalCostCurrent += cost[i].currentCost || 0;
        }
        if (graphDataCost.length == 0) {
            this.log(`ViewCostOverTime Result empty`);
            graphDataCost.push([new Date(), 0, 0, 0, 0]);
        }
        graphDataCost.sort(function (a, b) { return a[0].getTime() - b[0].getTime(); });
        // we need at least 2 items for Line Chart and show the current status for today
        var len = graphDataCost.length;
        // this.log(`visboKeyMetrics len ${len} ${JSON.stringify(this.visboprojectversions[len-1])}`);
        if (len == 1) {
            graphDataCost.push([
                new Date(),
                graphDataCost[len - 1][1],
                graphDataCost[len - 1][2]
            ]);
        }
        graphDataCost.push(['Timestamp', 'Cost Base Line', 'Cost Plan']);
        graphDataCost.reverse();
        // this.log(`view Cost VP cost budget  ${JSON.stringify(graphDataCost)}`);
        this.graphDataLineChart = graphDataCost;
    }
    calcRangeAxis(keyMetrics, type) {
        var rangeAxis = 0;
        var minSize = Infinity, maxSize = 0;
        var minDelayRange = 50;
        rangeAxis = 0;
        for (var i = 0; i < keyMetrics.length; i++) {
            switch (type) {
                case 'Delay':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][5]), Math.abs(keyMetrics[i][6]), minDelayRange);
                    break;
                case 'Delivery':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][1]));
                    break;
                case 'Deadline':
                    rangeAxis = Math.max(rangeAxis, Math.abs(keyMetrics[i][1]));
                    break;
            }
        }
        rangeAxis *= 1.1;
        this.log(`RangeAxis for ${type}: ${rangeAxis}`);
        return rangeAxis;
    }
    getRefDateVersions(increment) {
        this.log(`get getRefDateVersions ${this.vpvRefDate} ${increment} ${this.refDateInterval}`);
        var newRefDate = new Date(this.vpvRefDate);
        switch (this.refDateInterval) {
            case 'day':
                newRefDate.setDate(newRefDate.getDate() + increment);
                break;
            case 'week':
                newRefDate.setDate(newRefDate.getDate() + increment * 7);
                break;
            case 'month':
                newRefDate.setMonth(newRefDate.getMonth() + increment);
                break;
            case 'quarter':
                // newRefDate.setMinutes(newRefDate.getMinutes() + increment) // to force quarter skip
                var quarter = Math.trunc((newRefDate.getMonth() + 1) / 3);
                if (increment > 0)
                    quarter += increment;
                newRefDate.setMonth(quarter * 3);
                newRefDate.setDate(1);
                newRefDate.setHours(0, 0, 0, 0);
                var diff = newRefDate.getTime() - this.vpvRefDate.getTime();
                if (diff == 0) {
                    newRefDate.setMonth(newRefDate.getMonth() + increment * 3);
                }
                break;
        }
        this.log(`get getRefDateVersions ${(new Date(newRefDate)).toISOString()}`);
        if (increment > 0) {
            refDate = new Date(this.visboprojectversions[0].timestamp);
            if (newRefDate.toISOString() > refDate.toISOString()) {
                this.visboCostCalc(0);
                return;
            }
        }
        if (increment < 0) {
            var refDate = new Date(this.visboprojectversions[this.visboprojectversions.length - 1].timestamp);
            if (newRefDate.toISOString() < refDate.toISOString()) {
                this.visboCostCalc(this.visboprojectversions.length - 1);
                return;
            }
        }
        this.log(`get getRefDateVersions normalised ${(new Date(newRefDate)).toISOString()}`);
        for (var i = 0; i < this.visboprojectversions.length; i++) {
            var cmpDate = new Date(this.visboprojectversions[i].timestamp);
            this.log(`Compare Date ${cmpDate.toISOString()} ${newRefDate.toISOString()}`);
            if (cmpDate.toISOString() <= newRefDate.toISOString()) {
                this.visboCostCalc(increment > 0 ? i - 1 : i);
                break;
            }
        }
    }
    gotoVisboProjectVersions() {
        // this.log(`goto VPV All Versions ${this.vpvKeyMetricActive.vpid} `);
        // this.router.navigate(['vpv/'.concat(this.vpvKeyMetricActive.vpid)], {});
    }
    gotoClickedRow(visboprojectversion) {
        // this.log(`goto VPV Detail for VP ${visboprojectversion.name} Deleted ${this.deleted}`);
        // this.router.navigate(['vpvDetail/'.concat(visboprojectversion._id)], this.deleted ? { queryParams: { deleted: this.deleted }} : {});
    }
    listSelectRow(vpv) {
        this.log(`List: User selected ${vpv._id} ${vpv.name}`);
        // this.setVpvActive(vpv);
    }
    chartSelectRow(row, col, label) {
        this.log(`Line Chart: User selected ${row} ${col} ${label} Len`);
        // if (row < 0 || row >= this.visbokeymetrics.length) row = 0;
        // this.setVpvActive(this.visbokeymetrics[row]);
        // this.log(`Line Chart: User selected ${row} ${col} ${this.vpvKeyMetricActive._id} ${this.vpvKeyMetricActive.timestamp}`);
    }
    setVpvActive(vpv) {
        this.log(`setVpvActive Not Implemented`);
    }
    gotoVPDetail(visboproject) {
        this.router.navigate(['vpDetail/'.concat(visboproject._id)]);
    }
    gotoVP(visboproject) {
        this.router.navigate(['vpKeyMetrics/'.concat(visboproject._id)]);
    }
    gotoVC(visboproject) {
        this.router.navigate(['vp/'.concat(visboproject.vcid)]);
    }
    getShortText(text, len) {
        if (!text)
            return "";
        if (text.length < len)
            return text;
        if (len < 3)
            return '...';
        return text.substring(0, len - 3).concat('...');
    }
    sortVPVTable(n = undefined) {
        if (!this.visboprojectversions)
            return;
        if (n != undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 5) ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        else {
            this.sortColumn = 1;
            this.sortAscending = false;
        }
        if (this.sortColumn == 1) {
            // sort by VPV Timestamp
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.timestamp > b.timestamp)
                    result = 1;
                else if (a.timestamp < b.timestamp)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by VPV endDate
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.endDate > b.endDate)
                    result = 1;
                else if (a.endDate < b.endDate)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by VPV ampelStatus
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.ampelStatus > b.ampelStatus)
                    result = 1;
                else if (a.ampelStatus < b.ampelStatus)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by VPV Erloes
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.Erloes > b.Erloes)
                    result = 1;
                else if (a.Erloes < b.Erloes)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by VC vpvCount
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.variantName.toLowerCase() > b.variantName.toLowerCase())
                    result = 1;
                else if (a.variantName.toLowerCase() < b.variantName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        if (!this.sortAscending) {
            this.visboprojectversions.reverse();
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboViewCost: ' + message);
    }
};
VisboProjectViewCostComponent.ctorParameters = () => [
    { type: _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectVersionService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__["VisboProjectService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboProjectViewCostComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboproject-viewcost',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboproject-viewcost.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboproject-viewcost/visboproject-viewcost.component.html")).default
    })
], VisboProjectViewCostComponent);



/***/ }),

/***/ "./src/app/visboprojects/visboprojects.component.ts":
/*!**********************************************************!*\
  !*** ./src/app/visboprojects/visboprojects.component.ts ***!
  \**********************************************************/
/*! exports provided: VisboProjectsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectsComponent", function() { return VisboProjectsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _models_visboproject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_models/visboproject */ "./src/app/_models/visboproject.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visbocenter.service */ "./src/app/_services/visbocenter.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");










let VisboProjectsComponent = class VisboProjectsComponent {
    constructor(authenticationService, messageService, alertService, visboprojectService, visbocenterService, route, 
    //private location: Location,
    router) {
        this.authenticationService = authenticationService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.visboprojectService = visboprojectService;
        this.visbocenterService = visbocenterService;
        this.route = route;
        this.router = router;
        this.deleted = false;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVP"];
    }
    ngOnInit() {
        this.log(`Init GetVisboProjects ${JSON.stringify(this.route.snapshot.queryParams)}`);
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.log(`Init VP Deleted: ${this.deleted}`);
        this.getVisboProjects(this.deleted);
    }
    onSelect(visboproject) {
        this.getVisboProjects(this.deleted);
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    hasVCPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vc & perm) > 0;
    }
    getVPType(vpType) {
        return _models_visboproject__WEBPACK_IMPORTED_MODULE_6__["VPTYPE"][vpType];
    }
    toggleVisboProjects() {
        this.deleted = !this.deleted;
        var url = this.route.snapshot.url.join('/');
        this.log(`VP toggleVisboProjects ${this.deleted} URL ${url}`);
        this.getVisboProjects(this.deleted);
        // MS TODO: go to the current url and add delete flag
        this.router.navigate([url], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    getVisboProjects(deleted) {
        const id = this.route.snapshot.paramMap.get('id');
        var i;
        var currentUser = this.authenticationService.getActiveUser();
        this.vcSelected = id;
        if (id) {
            this.visbocenterService.getVisboCenter(id)
                .subscribe(visbocenters => {
                this.vcActive = visbocenters;
                this.combinedPerm = visbocenters.perm;
                this.visboprojectService.getVisboProjects(id, false, deleted)
                    .subscribe(visboprojects => {
                    this.visboprojects = visboprojects;
                    this.sortVPTable(1);
                }, error => {
                    this.log(`get VPs failed: error:  ${error.status} message: ${error.error.message}`);
                    this.alertService.error(error.error.message);
                });
            }, error => {
                this.log(`get VC failed: error:  ${error.status} message: ${error.error.message}`);
                this.alertService.error(error.error.message);
            });
        }
        else {
            this.vcSelected = null;
            this.vcActive = null;
            this.visboprojectService.getVisboProjects(null, false, deleted)
                .subscribe(visboprojects => {
                this.visboprojects = visboprojects;
                this.sortVPTable(1);
            }, error => {
                this.log(`get VPs all failed: error:  ${error.status} message: ${error.error.message}`);
                this.alertService.error(error.error.message);
            });
        }
    }
    addproject(name, vcid, desc) {
        name = name.trim();
        this.log(`call create VP ${name} with VCID ${vcid} Desc ${desc} `);
        if (!name) {
            return;
        }
        this.visboprojectService.addVisboProject({ name: name, description: desc, vcid: vcid }).subscribe(vp => {
            // console.log("add VP %s with ID %s to VC %s", vp[0].name, vp[0]._id, vp[0].vcid);
            this.visboprojects.push(vp);
            this.sortVPTable(undefined);
            this.alertService.success(`Visbo Project ${vp.name} created successfully`);
        }, error => {
            this.log(`add VP failed: error: ${error.status} messages: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied for Visbo Project ${name}`);
            }
            else if (error.status == 409) {
                // this.alertService.error(`Visbo Project ${name} already exists or not allowed`);
                this.alertService.error('Visbo Project already exists or not allowed');
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    delete(visboproject) {
        // remove item from list
        this.visboprojects = this.visboprojects.filter(vp => vp !== visboproject);
        this.visboprojectService.deleteVisboProject(visboproject)
            .subscribe(error => {
            // this.log(`delete VP failed: error: ${error.status} messages: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${name}`, true);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    // get the versions of the project
    gotoClickedRow(visboproject) {
        var deleted = visboproject.deletedAt ? true : false;
        // MS TODO: use enumerator for Type
        if (visboproject.vpType == 1) {
            this.log(`goto VPF for VP ${visboproject._id} Deleted ${deleted}`);
            this.router.navigate(['vpf/'.concat(visboproject._id)], deleted ? { queryParams: { deleted: deleted } } : {});
        }
        else {
            this.log(`goto VPV for VP ${visboproject._id} Deleted ${deleted}`);
            this.router.navigate(['vpKeyMetrics/'.concat(visboproject._id)], deleted ? { queryParams: { deleted: deleted } } : {});
        }
    }
    // get the details of the project
    gotoDetail(visboproject) {
        var deleted = visboproject.deletedAt ? true : false;
        this.log(`goto Detail for VP ${visboproject._id}`);
        this.router.navigate(['vpDetail/'.concat(visboproject._id)], deleted ? { queryParams: { deleted: deleted } } : {});
    }
    gotoVCDetail(visbocenter) {
        this.router.navigate(['vcDetail/'.concat(visbocenter._id)]);
    }
    sortVPTable(n) {
        if (n != undefined) {
            if (!this.visboprojects)
                return;
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = n == 1 || n == 3 ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        // console.log("Sort VP Column %d Asc %s", this.sortColumn, this.sortAscending)
        if (this.sortColumn == 1) {
            // sort by VP Name
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                if (a.name.toLowerCase() > b.name.toLowerCase())
                    result = 1;
                else if (a.name.toLowerCase() < b.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by VP updatedAt
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.updatedAt > b.updatedAt)
                    result = 1;
                else if (a.updatedAt < b.updatedAt)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by VC Name
            this.visboprojects.sort(function (a, b) {
                var result = 0;
                // console.log("Sort VC Date %s", a.updatedAt)
                if (a.vc.name.toLowerCase() > b.vc.name.toLowerCase())
                    result = 1;
                else if (a.vc.name.toLowerCase() < b.vc.name.toLowerCase())
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by VC vpvCount
            this.visboprojects.sort(function (a, b) {
                return a.vpvCount - b.vpvCount;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by VP vpType
            this.visboprojects.sort(function (a, b) {
                return a.vpType - b.vpType;
            });
        }
        // console.log("Sort VP Column %d %s Reverse?", this.sortColumn, this.sortAscending)
        if (!this.sortAscending) {
            this.visboprojects.reverse();
            // console.log("Sort VP Column %d %s Reverse", this.sortColumn, this.sortAscending)
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProject: ' + message);
    }
};
VisboProjectsComponent.ctorParameters = () => [
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectService"] },
    { type: _services_visbocenter_service__WEBPACK_IMPORTED_MODULE_8__["VisboCenterService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboProjectsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboprojects',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboprojects.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojects/visboprojects.component.html")).default
    })
], VisboProjectsComponent);



/***/ }),

/***/ "./src/app/visboprojectversion-detail/visboprojectversion-detail.component.ts":
/*!************************************************************************************!*\
  !*** ./src/app/visboprojectversion-detail/visboprojectversion-detail.component.ts ***!
  \************************************************************************************/
/*! exports provided: VisboProjectVersionDetailComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectVersionDetailComponent", function() { return VisboProjectVersionDetailComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm2015/common.js");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/authentication.service */ "./src/app/_services/authentication.service.ts");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");










let VisboProjectVersionDetailComponent = class VisboProjectVersionDetailComponent {
    constructor(messageService, authenticationService, route, visboprojectService, visboprojectversionService, location, alertService, router) {
        this.messageService = messageService;
        this.authenticationService = authenticationService;
        this.route = route;
        this.visboprojectService = visboprojectService;
        this.visboprojectversionService = visboprojectversionService;
        this.location = location;
        this.alertService = alertService;
        this.router = router;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_9__["VGPVP"];
        this.deleted = false;
    }
    ngOnInit() {
        this.deleted = this.route.snapshot.queryParams['deleted'] ? true : false;
        this.getVisboProjectVersion();
    }
    getVisboProjectVersion() {
        const id = this.route.snapshot.paramMap.get('id');
        var currentUser = this.authenticationService.getActiveUser();
        this.log('VisboProjectVersion Detail of: ' + id);
        this.visboprojectversionService.getVisboProjectVersion(id, this.deleted)
            .subscribe(visboprojectversion => {
            this.combinedPerm = visboprojectversion.perm;
            this.visboprojectversion = visboprojectversion;
            this.log(`Get VisboProjectVersion for VPV ${id} ${visboprojectversion.name} ${JSON.stringify(this.combinedPerm)}`);
        }, error => {
            this.log(`get VPV failed: error: ${error.status} message: ${error.error.message}`);
            this.alertService.error(error.error.message);
        });
    }
    goBack() {
        this.location.back();
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    delete(visboprojectversion) {
        this.log(`delete VPV ${visboprojectversion._id}`);
        this.visboprojectversionService.deleteVisboProjectVersion(visboprojectversion, this.deleted)
            .subscribe(() => {
            this.alertService.success(`Visbo Project Version ${visboprojectversion._id} deleted successfully`, true);
            this.log(`delete VPV success`);
            this.goBack();
        }, error => {
            this.log(`delete VPV failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project Version ${visboprojectversion._id}`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    gotoVCDetail(visboproject) {
        this.router.navigate(['vcDetail/'.concat(visboproject.vcid)]);
    }
    gotoVPVList(visboprojectversion) {
        this.log(`goto VPV List: ${visboprojectversion.vpid} Deleted ${this.deleted}`);
        this.router.navigate(['vpKeyMetrics/'.concat(visboprojectversion.vpid)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    save() {
        this.log(`update VPV ${this.visboprojectversion._id}`);
        this.visboprojectversionService.updateVisboProjectVersion(this.visboprojectversion, this.deleted)
            .subscribe((vpv) => {
            this.alertService.success(`Visbo Project ${vpv.name} updated successfully`, true);
            this.goBack();
        }, error => {
            this.log(`save VPV failed: error: ${error.status} message: ${error.error.message}`);
            if (error.status == 403) {
                this.alertService.error(`Permission Denied: Visbo Project ${this.visboprojectversion._id}`);
            }
            else if (error.status == 409) {
                this.alertService.error(`Visbo Project ${this.visboprojectversion._id} exists already`);
            }
            else {
                this.alertService.error(error.error.message);
            }
        });
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectVersionDetail: ' + message);
    }
};
VisboProjectVersionDetailComponent.ctorParameters = () => [
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_6__["MessageService"] },
    { type: _services_authentication_service__WEBPACK_IMPORTED_MODULE_5__["AuthenticationService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_7__["VisboProjectService"] },
    { type: _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_8__["VisboProjectVersionService"] },
    { type: _angular_common__WEBPACK_IMPORTED_MODULE_3__["Location"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"])()
], VisboProjectVersionDetailComponent.prototype, "visboprojectversion", void 0);
VisboProjectVersionDetailComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboprojectversion-detail',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboprojectversion-detail.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversion-detail/visboprojectversion-detail.component.html")).default
    })
], VisboProjectVersionDetailComponent);



/***/ }),

/***/ "./src/app/visboprojectversions/visboprojectversions.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/visboprojectversions/visboprojectversions.component.ts ***!
  \************************************************************************/
/*! exports provided: VisboProjectVersionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VisboProjectVersionsComponent", function() { return VisboProjectVersionsComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm2015/router.js");
/* harmony import */ var _services_message_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../_services/message.service */ "./src/app/_services/message.service.ts");
/* harmony import */ var _services_alert_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_services/alert.service */ "./src/app/_services/alert.service.ts");
/* harmony import */ var _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../_services/visboproject.service */ "./src/app/_services/visboproject.service.ts");
/* harmony import */ var _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../_services/visboprojectversion.service */ "./src/app/_services/visboprojectversion.service.ts");
/* harmony import */ var _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_models/visbogroup */ "./src/app/_models/visbogroup.ts");








let VisboProjectVersionsComponent = class VisboProjectVersionsComponent {
    constructor(visboprojectversionService, visboprojectService, messageService, alertService, route, 
    //private location: Location,
    router) {
        this.visboprojectversionService = visboprojectversionService;
        this.visboprojectService = visboprojectService;
        this.messageService = messageService;
        this.alertService = alertService;
        this.route = route;
        this.router = router;
        this.deleted = false;
        this.combinedPerm = undefined;
        this.permVC = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVC"];
        this.permVP = _models_visbogroup__WEBPACK_IMPORTED_MODULE_7__["VGPVP"];
    }
    ngOnInit() {
        // this.getVisboCenters();
        this.getVisboProjectVersions();
    }
    onSelect(visboprojectversion) {
        this.getVisboProjectVersions();
    }
    hasVPPerm(perm) {
        if (this.combinedPerm == undefined)
            return false;
        return (this.combinedPerm.vp & perm) > 0;
    }
    getVisboProjectVersions() {
        const id = this.route.snapshot.paramMap.get('id');
        var i;
        this.vpSelected = id;
        this.log(`get VP name if ID is used ${id}`);
        if (id) {
            this.visboprojectService.getVisboProject(id)
                .subscribe(visboproject => {
                this.vpActive = visboproject;
                this.combinedPerm = visboproject.perm;
                this.log(`get VP name if ID is used ${this.vpActive.name} Perm ${JSON.stringify(this.combinedPerm)}`);
                this.visboprojectversionService.getVisboProjectVersions(id, this.deleted)
                    .subscribe(visboprojectversions => this.visboprojectversions = visboprojectversions, error => {
                    this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                    if (error.status == 403) {
                        this.alertService.error(`Permission Denied for Visbo Project Versions`);
                    }
                    else {
                        this.alertService.error(error.error.message);
                    }
                });
            }, error => {
                this.log(`get VPV VP failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
        else {
            this.vpSelected = null;
            this.vpActive = null;
            this.visboprojectversionService.getVisboProjectVersions(null)
                .subscribe(visboprojectversions => this.visboprojectversions = visboprojectversions, error => {
                this.log(`get VPVs failed: error: ${error.status} message: ${error.error.message}`);
                if (error.status == 403) {
                    this.alertService.error(`Permission Denied for Visbo Project Versions`);
                }
                else {
                    this.alertService.error(error.error.message);
                }
            });
        }
    }
    toggleVisboProjectVersions() {
        this.deleted = !this.deleted;
        var url = this.route.snapshot.url.join('/');
        this.log(`VP toggleVisboProjectVersions ${this.deleted} URL ${url}`);
        this.getVisboProjectVersions();
        // MS TODO: go to the current url and add delete flag
        this.router.navigate([url], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
    }
    gotoClickedRow(visboprojectversion) {
        this.log(`goto VPV Detail for VP ${visboprojectversion.name} Deleted ${this.deleted}`);
        this.router.navigate(['vpvDetail/'.concat(visboprojectversion._id)], this.deleted ? { queryParams: { deleted: this.deleted } } : {});
        // this.router.navigate(['vpvDetail/'.concat(visboprojectversion._id)], {});
    }
    gotoVPDetail(visboproject) {
        this.router.navigate(['vpDetail/'.concat(visboproject._id)]);
    }
    sortVPVTable(n) {
        if (!this.visboprojectversions)
            return;
        if (n != undefined) {
            if (n != this.sortColumn) {
                this.sortColumn = n;
                this.sortAscending = undefined;
            }
            if (this.sortAscending == undefined) {
                // sort name column ascending, number values desc first
                this.sortAscending = (n == 5) ? true : false;
            }
            else
                this.sortAscending = !this.sortAscending;
        }
        if (this.sortColumn == 1) {
            // sort by VPV Timestamp
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.timestamp > b.timestamp)
                    result = 1;
                else if (a.timestamp < b.timestamp)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 2) {
            // sort by VPV endDate
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.endDate > b.endDate)
                    result = 1;
                else if (a.endDate < b.endDate)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 3) {
            // sort by VPV ampelStatus
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.ampelStatus > b.ampelStatus)
                    result = 1;
                else if (a.ampelStatus < b.ampelStatus)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 4) {
            // sort by VPV Erloes
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                // this.log("Sort VC Date %s", a.updatedAt)
                if (a.Erloes > b.Erloes)
                    result = 1;
                else if (a.Erloes < b.Erloes)
                    result = -1;
                return result;
            });
        }
        else if (this.sortColumn == 5) {
            // sort by VC vpvCount
            this.visboprojectversions.sort(function (a, b) {
                var result = 0;
                if (a.variantName.toLowerCase() > b.variantName.toLowerCase())
                    result = 1;
                else if (a.variantName.toLowerCase() < b.variantName.toLowerCase())
                    result = -1;
                return result;
            });
        }
        if (!this.sortAscending) {
            this.visboprojectversions.reverse();
        }
    }
    /** Log a message with the MessageService */
    log(message) {
        this.messageService.add('VisboProjectVersion: ' + message);
    }
};
VisboProjectVersionsComponent.ctorParameters = () => [
    { type: _services_visboprojectversion_service__WEBPACK_IMPORTED_MODULE_6__["VisboProjectVersionService"] },
    { type: _services_visboproject_service__WEBPACK_IMPORTED_MODULE_5__["VisboProjectService"] },
    { type: _services_message_service__WEBPACK_IMPORTED_MODULE_3__["MessageService"] },
    { type: _services_alert_service__WEBPACK_IMPORTED_MODULE_4__["AlertService"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["ActivatedRoute"] },
    { type: _angular_router__WEBPACK_IMPORTED_MODULE_2__["Router"] }
];
VisboProjectVersionsComponent = tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"]([
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
        selector: 'app-visboprojectversions',
        template: tslib__WEBPACK_IMPORTED_MODULE_0__["__importDefault"](__webpack_require__(/*! raw-loader!./visboprojectversions.component.html */ "./node_modules/raw-loader/dist/cjs.js!./src/app/visboprojectversions/visboprojectversions.component.html")).default
    })
], VisboProjectVersionsComponent);



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
// The file contents for the current environment will overwrite these during build.
// The build system defaults to the dev environment which uses `environment.ts`, but if you do
// `ng build --env=prod` then `environment.prod.ts` will be used instead.
// The list of which env maps to which file can be found in `.angular-cli.json`.

const environment = {
    production: false,
    restUrl: 'http://localhost:3484'
};


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm2015/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm2015/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");





if (_environments_environment__WEBPACK_IMPORTED_MODULE_4__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"]);


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /Users/markus/Documents/GitHub/visbo-server-ui/src/main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main-es2015.js.map